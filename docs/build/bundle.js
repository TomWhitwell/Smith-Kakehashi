var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function r(e){e.forEach(t)}function o(e){return"function"==typeof e}function s(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function i(t,n,r){t.$$.on_destroy.push(function(t,...n){if(null==t)return e;const r=t.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}(n,r))}function a(e,t,n,r){if(e){const o=l(e,t,n,r);return e[0](o)}}function l(e,t,n,r){return e[1]&&r?function(e,t){for(const n in t)e[n]=t[n];return e}(n.ctx.slice(),e[1](r(t))):n.ctx}function c(e,t,n,r){if(e[2]&&r){const o=e[2](r(n));if("object"==typeof t.dirty){const e=[],n=Math.max(t.dirty.length,o.length);for(let r=0;r<n;r+=1)e[r]=t.dirty[r]|o[r];return e}return t.dirty|o}return t.dirty}function u(e){return null==e?"":e}function d(e,t,n=t){return e.set(n),t}function f(e,t){e.appendChild(t)}function p(e,t,n){e.insertBefore(t,n||null)}function h(e){e.parentNode.removeChild(e)}function m(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function g(e){return document.createElement(e)}function $(e){return document.createTextNode(e)}function v(){return $(" ")}function b(){return $("")}function E(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function y(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function _(e){return""===e?void 0:+e}function M(e,t){t=""+t,e.data!==t&&(e.data=t)}function S(e,t){(null!=t||e.value)&&(e.value=t)}function I(e,t,n,r){e.style.setProperty(t,n,r?"important":"")}function w(e,t){for(let n=0;n<e.options.length;n+=1){const r=e.options[n];if(r.__value===t)return void(r.selected=!0)}}function x(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}function C(e,t,n){e.classList[n?"add":"remove"](t)}let A;function N(e){A=e}function T(){if(!A)throw new Error("Function called outside component initialization");return A}function D(e){T().$$.on_destroy.push(e)}function B(){const e=T();return(t,n)=>{const r=e.$$.callbacks[t];if(r){const o=function(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}(t,n);r.slice().forEach(t=>{t.call(e,o)})}}}function k(e){return T().$$.context.get(e)}const R=[],G=[],P=[],O=[],H=Promise.resolve();let F=!1;function L(e){P.push(e)}function q(e){O.push(e)}let j=!1;const V=new Set;function Y(){if(!j){j=!0;do{for(let e=0;e<R.length;e+=1){const t=R[e];N(t),U(t.$$)}for(R.length=0;G.length;)G.pop()();for(let e=0;e<P.length;e+=1){const t=P[e];V.has(t)||(V.add(t),t())}P.length=0}while(R.length);for(;O.length;)O.pop()();F=!1,j=!1,V.clear()}}function U(e){if(null!==e.fragment){e.update(),r(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(L)}}const W=new Set;let z;function J(){z={r:0,c:[],p:z}}function K(){z.r||r(z.c),z=z.p}function Q(e,t){e&&e.i&&(W.delete(e),e.i(t))}function X(e,t,n,r){if(e&&e.o){if(W.has(e))return;W.add(e),z.c.push(()=>{W.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}}function Z(e,t,n){const r=e.$$.props[t];void 0!==r&&(e.$$.bound[r]=n,n(e.$$.ctx[r]))}function ee(e){e&&e.c()}function te(e,n,s){const{fragment:i,on_mount:a,on_destroy:l,after_update:c}=e.$$;i&&i.m(n,s),L(()=>{const n=a.map(t).filter(o);l?l.push(...n):r(n),e.$$.on_mount=[]}),c.forEach(L)}function ne(e,t){const n=e.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function re(e,t){-1===e.$$.dirty[0]&&(R.push(e),F||(F=!0,H.then(Y)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function oe(t,o,s,i,a,l,c=[-1]){const u=A;N(t);const d=o.props||{},f=t.$$={fragment:null,ctx:null,props:l,update:e,not_equal:a,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:n(),dirty:c};let p=!1;f.ctx=s?s(t,d,(e,n,...r)=>{const o=r.length?r[0]:n;return f.ctx&&a(f.ctx[e],f.ctx[e]=o)&&(f.bound[e]&&f.bound[e](o),p&&re(t,e)),n}):[],f.update(),p=!0,r(f.before_update),f.fragment=!!i&&i(f.ctx),o.target&&(o.hydrate?f.fragment&&f.fragment.l(function(e){return Array.from(e.childNodes)}(o.target)):f.fragment&&f.fragment.c(),o.intro&&Q(t.$$.fragment),te(t,o.target,o.anchor),Y()),N(u)}class se{$destroy(){ne(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(){}}function ie(...e){window.debugMode&&console.log(...e)}class ae{constructor({faderBlink:e=!0,accelBlink:t=!0,controllerFlip:n=!1,deviceId:r=0,i2cMaster:o=!1,midiThru:s=!1,midiMode:i=!0,dxMode:a=!1,pageNumber:l=0,fadermin:c=0,fadermax:u=4096,firmwareVersion:d="unknown",usbControls:f=[],trsControls:p=[],usbButtons:h=[],trsButtons:m=[]}){this.faderBlink=e,this.accelBlink=t,this.controllerFlip=n,this.deviceId=r,this.firmwareVersion=d,this.i2cMaster=o,this.midiThru=s,this.midiMode=i,this.dxMode=a,this.pageNumber=l,this.fadermin=c,this.fadermax=u,this.usbControls=f,this.trsControls=p,this.usbButtons=h,this.trsButtons=m}isEquivalent(e){let t=this.faderBlink==e.faderBlink&&this.accelBlink==e.accelBlink&&this.controllerFlip==e.controllerFlip&&this.midiThru==e.midiThru&&this.midiMode==e.midiMode&&this.dxMode==e.dxMode&&this.pageNumber==e.pageNumber;("i2cMaster"in this||"i2cMaster"in e)&&(t=t&&this.i2cMaster==e.i2cMaster),("fadermax"in this||"fadermax"in e)&&(t=t&&this.fadermax==e.fadermax&&this.fadermin==e.fadermin);let n=!0;this.usbControls.forEach((t,r)=>{let o=e.usbControls[r];t.channel==o.channel&&t.cc==o.cc||(n=!1)}),this.trsControls.forEach((t,r)=>{let o=e.trsControls[r];t.channel==o.channel&&t.cc==o.cc||(n=!1)});let r=!0;return this.usbButtons.forEach((t,n)=>{let o=e.usbButtons[n];(t.channel!=o.channel||t.mode!=o.mode||t.paramA!=o.paramA|t.paramB!=o.paramB)&&(r=!1)}),this.trsButtons.forEach((t,n)=>{let o=e.trsButtons[n];(t.channel!=o.channel||t.mode!=o.mode||t.paramA!=o.paramA|t.paramB!=o.paramB)&&(r=!1)}),t&&n&&r&&!0}toSysexArray(){let e=Array.from({length:116},e=>0);e[0]=this.deviceId,e[1]=this.firmwareArray()[0],e[2]=this.firmwareArray()[1],e[3]=this.firmwareArray()[2],e[4]=this.faderBlink?1:0,e[5]=this.accelBlink?1:0,e[6]=this.controllerFlip?1:0,e[7]=this.i2cMaster;let t=this.fadermin>>7,n=this.fadermin-(t<<7);e[8]=n,e[9]=t;let r=this.fadermax>>7,o=this.fadermax-(r<<7);e[10]=o,e[11]=r,e[12]=this.midiThru?1:0,e[13]=this.midiMode?1:0,e[14]=this.dxMode?1:0,e[15]=this.pageNumber;this.usbControls.forEach((t,n)=>{e[n+20]=t.channel,e[n+52]=t.cc}),this.trsControls.forEach((t,n)=>{e[n+36]=t.channel,e[n+68]=t.cc});return this.usbButtons.forEach((t,n)=>{e[n+84]=t.channel,e[n+92]=t.mode,e[n+100]=t.paramA,e[n+108]=t.paramB}),this.trsButtons.forEach((t,n)=>{e[n+88]=t.channel,e[n+96]=t.mode,e[n+104]=t.paramA,e[n+112]=t.paramB}),e}toDeviceOptionsSysexArray(){return this.toSysexArray().slice(4,20)}toUSBOptionsSysexArray(){const e=this.toSysexArray(),t=e.slice(20,36),n=e.slice(52,68);return t.concat(n)}toTRSOptionsSysexArray(){const e=this.toSysexArray(),t=e.slice(36,52),n=e.slice(68,84);return t.concat(n)}toJsonString(){let e=ae.clone(this),t=this.device().controlCount;return e.usbControls=e.usbControls.splice(0,t),e.usbControls.forEach(e=>delete e.val),e.trsControls=e.trsControls.splice(0,t),JSON.stringify(e,!1,2)}isNewConfigInvalid(e){return e.deviceId!=this.deviceId&&`Cannot update - this data file is for a ${ae.devices[e.deviceId].name}, but you are trying to install it on a ${this.device().name} `}updateFromJson(e){return Object.keys(e).forEach(t=>{this[t]=e[t]}),this}device(){return ae.devices[this.deviceId]}firmwareArray(){return this.firmwareVersion.trim().split(".").map(e=>parseInt(e))}static clone(e){let t=new ae({faderBlink:e.faderBlink,accelBlink:e.accelBlink,controllerFlip:e.controllerFlip,usbControls:[],trsControls:[],deviceId:e.deviceId,firmwareVersion:e.firmwareVersion,i2cMaster:e.i2cMaster,fadermin:e.fadermin,fadermax:e.fadermax,midiThru:e.midiThru,midiMode:e.midiMode,dxMode:e.dxMode,pageNumber:e.pageNumber});return e.usbControls.forEach((e,n)=>{t.usbControls[n]={...e}}),e.trsControls.forEach((e,n)=>{t.trsControls[n]={...e}}),e.usbButtons.forEach((e,n)=>{t.usbButtons[n]={...e}}),e.trsButtons.forEach((e,n)=>{t.trsButtons[n]={...e}}),t}static returnConfigHashFromSysex(e){ie("Generating config from",e);let t=e[5],n=e[6]+"."+e[7]+"."+e[8],r=e[9],o=e[10],s=e[11],i=1==e[12],a=e[13],l=e[14],c=e[15],u=(l<<7)+a,d=(e[16]<<7)+c,f=e[17],p=e[18],h=e[19],m=e[20],g=[],$=[],v=[],b=[];return e.slice(25,41).forEach((e,t)=>{127!=e&&(g[t]={channel:e})}),e.slice(41,57).forEach((e,t)=>{127!=e&&($[t]={channel:e})}),e.slice(57,73).forEach((e,t)=>{127!=e&&(g[t].cc=e)}),e.slice(73,89).forEach((e,t)=>{127!=e&&($[t].cc=e)}),e.slice(89,93).forEach((e,t)=>{127!=e&&(v[t]={channel:e})}),e.slice(93,97).forEach((e,t)=>{127!=e&&(b[t]={channel:e})}),e.slice(97,101).forEach((e,t)=>{127!=e&&(v[t].mode=e)}),e.slice(101,105).forEach((e,t)=>{127!=e&&(b[t].mode=e)}),e.slice(105,109).forEach((e,t)=>{127!=e&&(v[t].paramA=e)}),e.slice(109,113).forEach((e,t)=>{127!=e&&(b[t].paramA=e)}),e.slice(113,117).forEach((e,t)=>{127!=e&&(v[t].paramB=e)}),e.slice(117,121).forEach((e,t)=>{127!=e&&(b[t].paramB=e)}),g.forEach(e=>e.val=0),new ae({faderBlink:r,accelBlink:o,controllerFlip:s,midiThru:f,midiMode:p,dxMode:h,usbControls:g,trsControls:$,deviceId:t,firmwareVersion:n,i2cMaster:i,fadermin:u,fadermax:d,usbButtons:v,trsButtons:b,midiThru:f,midiMode:p,dxMode:h,pageNumber:m})}}ae.devices=[{name:"unknown",controlCount:0,capabilities:{}},{name:"Oxion development board",controlCount:4,capabilities:{led:!0}},{name:"16n",controlCount:16,capabilities:{i2c:!0,led:!0}},{name:"16n (LC)",controlCount:16,capabilities:{i2c:!0,led:!0},sendShortMessages:!0},{name:"Music Thing M0 Plus",controlCount:16,buttonCount:4,capabilities:{i2c:!1,led:!0}}];class le{static import(e,t,n){let r=document.createElement("input");r.setAttribute("type","file"),r.setAttribute("id","uploadedConfig"),r.setAttribute("onchange","window.handleFiles(this.files)"),window.handleFiles=r=>{if(r.length>0){let o=r[0];const s=new FileReader;s.addEventListener("load",r=>{const o=JSON.parse(s.result),i=e.isNewConfigInvalid(o);i?alert(i):(n.update(t=>e.updateFromJson(o)),e.isEquivalent(t)?alert("Imported configuration is identical to currently loaded configuration; no changes to upload."):alert("New configuration imported. Choose 'update controller' to import, or 'Cancel' to abort"))}),s.readAsText(o),window.handleFiles=null}},r.click(),r.remove()}static export(e){let t="data:text/json;charset=utf-8,"+encodeURIComponent(e.toJsonString()),n=document.createElement("a");n.setAttribute("href",t),n.setAttribute("download",`${e.device().name}_controller_config.json`),document.body.appendChild(n),n.click(),n.remove()}}var ce="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var ue=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e){!function(t){function n(){if(n.prototype._singleton)throw new Error("WebMidi is a singleton, it cannot be instantiated directly.");(n.prototype._singleton=this)._inputs=[],this._outputs=[],this._userHandlers={},this._stateChangeQueue=[],this._processingStateChange=!1,this._midiInterfaceEvents=["connected","disconnected"],this._nrpnBuffer=[[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]],this._nrpnEventsEnabled=!0,this._nrpnTypes=["entry","increment","decrement"],this._notes=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],this._semitones={C:0,D:2,E:4,F:5,G:7,A:9,B:11},Object.defineProperties(this,{MIDI_SYSTEM_MESSAGES:{value:{sysex:240,timecode:241,songposition:242,songselect:243,tuningrequest:246,sysexend:247,clock:248,start:250,continue:251,stop:252,activesensing:254,reset:255,midimessage:0,unknownsystemmessage:-1},writable:!1,enumerable:!0,configurable:!1},MIDI_CHANNEL_MESSAGES:{value:{noteoff:8,noteon:9,keyaftertouch:10,controlchange:11,channelmode:11,nrpn:11,programchange:12,channelaftertouch:13,pitchbend:14},writable:!1,enumerable:!0,configurable:!1},MIDI_REGISTERED_PARAMETER:{value:{pitchbendrange:[0,0],channelfinetuning:[0,1],channelcoarsetuning:[0,2],tuningprogram:[0,3],tuningbank:[0,4],modulationrange:[0,5],azimuthangle:[61,0],elevationangle:[61,1],gain:[61,2],distanceratio:[61,3],maximumdistance:[61,4],maximumdistancegain:[61,5],referencedistanceratio:[61,6],panspreadangle:[61,7],rollangle:[61,8]},writable:!1,enumerable:!0,configurable:!1},MIDI_CONTROL_CHANGE_MESSAGES:{value:{bankselectcoarse:0,modulationwheelcoarse:1,breathcontrollercoarse:2,footcontrollercoarse:4,portamentotimecoarse:5,dataentrycoarse:6,volumecoarse:7,balancecoarse:8,pancoarse:10,expressioncoarse:11,effectcontrol1coarse:12,effectcontrol2coarse:13,generalpurposeslider1:16,generalpurposeslider2:17,generalpurposeslider3:18,generalpurposeslider4:19,bankselectfine:32,modulationwheelfine:33,breathcontrollerfine:34,footcontrollerfine:36,portamentotimefine:37,dataentryfine:38,volumefine:39,balancefine:40,panfine:42,expressionfine:43,effectcontrol1fine:44,effectcontrol2fine:45,holdpedal:64,portamento:65,sustenutopedal:66,softpedal:67,legatopedal:68,hold2pedal:69,soundvariation:70,resonance:71,soundreleasetime:72,soundattacktime:73,brightness:74,soundcontrol6:75,soundcontrol7:76,soundcontrol8:77,soundcontrol9:78,soundcontrol10:79,generalpurposebutton1:80,generalpurposebutton2:81,generalpurposebutton3:82,generalpurposebutton4:83,reverblevel:91,tremololevel:92,choruslevel:93,celestelevel:94,phaserlevel:95,databuttonincrement:96,databuttondecrement:97,nonregisteredparametercoarse:98,nonregisteredparameterfine:99,registeredparametercoarse:100,registeredparameterfine:101},writable:!1,enumerable:!0,configurable:!1},MIDI_NRPN_MESSAGES:{value:{entrymsb:6,entrylsb:38,increment:96,decrement:97,paramlsb:98,parammsb:99,nullactiveparameter:127},writable:!1,enumerable:!0,configurable:!1},MIDI_CHANNEL_MODE_MESSAGES:{value:{allsoundoff:120,resetallcontrollers:121,localcontrol:122,allnotesoff:123,omnimodeoff:124,omnimodeon:125,monomodeon:126,polymodeon:127},writable:!1,enumerable:!0,configurable:!1},octaveOffset:{value:0,writable:!0,enumerable:!0,configurable:!1}}),Object.defineProperties(this,{supported:{enumerable:!0,get:function(){return"requestMIDIAccess"in navigator}},enabled:{enumerable:!0,get:function(){return void 0!==this.interface}.bind(this)},inputs:{enumerable:!0,get:function(){return this._inputs}.bind(this)},outputs:{enumerable:!0,get:function(){return this._outputs}.bind(this)},sysexEnabled:{enumerable:!0,get:function(){return!(!this.interface||!this.interface.sysexEnabled)}.bind(this)},nrpnEventsEnabled:{enumerable:!0,get:function(){return!!this._nrpnEventsEnabled}.bind(this),set:function(e){return this._nrpnEventsEnabled=e,this._nrpnEventsEnabled}},nrpnTypes:{enumerable:!0,get:function(){return this._nrpnTypes}.bind(this)},time:{enumerable:!0,get:function(){return performance.now()}}})}var r=new n;function o(e){var t=this;this._userHandlers={channel:{},system:{}},this._midiInput=e,Object.defineProperties(this,{connection:{enumerable:!0,get:function(){return t._midiInput.connection}},id:{enumerable:!0,get:function(){return t._midiInput.id}},manufacturer:{enumerable:!0,get:function(){return t._midiInput.manufacturer}},name:{enumerable:!0,get:function(){return t._midiInput.name}},state:{enumerable:!0,get:function(){return t._midiInput.state}},type:{enumerable:!0,get:function(){return t._midiInput.type}}}),this._initializeUserHandlers(),this._midiInput.onmidimessage=this._onMidiMessage.bind(this)}function s(e){var t=this;this._midiOutput=e,Object.defineProperties(this,{connection:{enumerable:!0,get:function(){return t._midiOutput.connection}},id:{enumerable:!0,get:function(){return t._midiOutput.id}},manufacturer:{enumerable:!0,get:function(){return t._midiOutput.manufacturer}},name:{enumerable:!0,get:function(){return t._midiOutput.name}},state:{enumerable:!0,get:function(){return t._midiOutput.state}},type:{enumerable:!0,get:function(){return t._midiOutput.type}}})}n.prototype.enable=function(e,t){this.enabled||(this.supported?navigator.requestMIDIAccess({sysex:t}).then(function(t){var n,r=[],o=[];this.interface=t,this._resetInterfaceUserHandlers(),this.interface.onstatechange=function(e){r.push(e)};for(var s=t.inputs.values(),i=s.next();i&&!i.done;i=s.next())o.push(i.value.open());for(var a=t.outputs.values(),l=a.next();l&&!l.done;l=a.next())o.push(l.value.open());function c(){clearTimeout(n),this._updateInputsAndOutputs(),this.interface.onstatechange=this._onInterfaceStateChange.bind(this),"function"==typeof e&&e.call(this),r.forEach(function(e){this._onInterfaceStateChange(e)}.bind(this))}n=setTimeout(c.bind(this),200),Promise&&Promise.all(o).catch((function(e){})).then(c.bind(this))}.bind(this),function(t){"function"==typeof e&&e.call(this,t)}.bind(this)):"function"==typeof e&&e(new Error("The Web MIDI API is not supported by your browser.")))},n.prototype.disable=function(){if(!this.supported)throw new Error("The Web MIDI API is not supported by your browser.");this.interface&&(this.interface.onstatechange=void 0),this.interface=void 0,this._inputs=[],this._outputs=[],this._nrpnEventsEnabled=!0,this._resetInterfaceUserHandlers()},n.prototype.addListener=function(e,t){if(!this.enabled)throw new Error("WebMidi must be enabled before adding event listeners.");if("function"!=typeof t)throw new TypeError("The 'listener' parameter must be a function.");if(!(0<=this._midiInterfaceEvents.indexOf(e)))throw new TypeError("The specified event type is not supported.");return this._userHandlers[e].push(t),this},n.prototype.hasListener=function(e,t){if(!this.enabled)throw new Error("WebMidi must be enabled before checking event listeners.");if("function"!=typeof t)throw new TypeError("The 'listener' parameter must be a function.");if(!(0<=this._midiInterfaceEvents.indexOf(e)))throw new TypeError("The specified event type is not supported.");for(var n=0;n<this._userHandlers[e].length;n++)if(this._userHandlers[e][n]===t)return!0;return!1},n.prototype.removeListener=function(e,t){if(!this.enabled)throw new Error("WebMidi must be enabled before removing event listeners.");if(void 0!==t&&"function"!=typeof t)throw new TypeError("The 'listener' parameter must be a function.");if(0<=this._midiInterfaceEvents.indexOf(e))if(t)for(var n=0;n<this._userHandlers[e].length;n++)this._userHandlers[e][n]===t&&this._userHandlers[e].splice(n,1);else this._userHandlers[e]=[];else{if(void 0!==e)throw new TypeError("The specified event type is not supported.");this._resetInterfaceUserHandlers()}return this},n.prototype.toMIDIChannels=function(e){var t;if("all"===e||void 0===e)t=["all"];else{if("none"===e)return[];t=Array.isArray(e)?e:[e]}return-1<t.indexOf("all")&&(t=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]),t.map((function(e){return parseInt(e)})).filter((function(e){return 1<=e&&e<=16}))},n.prototype.getInputById=function(e){if(!this.enabled)throw new Error("WebMidi is not enabled.");e=String(e);for(var t=0;t<this.inputs.length;t++)if(this.inputs[t].id===e)return this.inputs[t];return!1},n.prototype.getOutputById=function(e){if(!this.enabled)throw new Error("WebMidi is not enabled.");e=String(e);for(var t=0;t<this.outputs.length;t++)if(this.outputs[t].id===e)return this.outputs[t];return!1},n.prototype.getInputByName=function(e){if(!this.enabled)throw new Error("WebMidi is not enabled.");for(var t=0;t<this.inputs.length;t++)if(~this.inputs[t].name.indexOf(e))return this.inputs[t];return!1},n.prototype.getOctave=function(e){if(null!=e&&0<=e&&e<=127)return Math.floor(Math.floor(e)/12-1)+Math.floor(r.octaveOffset)},n.prototype.getOutputByName=function(e){if(!this.enabled)throw new Error("WebMidi is not enabled.");for(var t=0;t<this.outputs.length;t++)if(~this.outputs[t].name.indexOf(e))return this.outputs[t];return!1},n.prototype.guessNoteNumber=function(e){var t=!1;if(e&&e.toFixed&&0<=e&&e<=127?t=Math.round(e):0<=parseInt(e)&&parseInt(e)<=127?t=parseInt(e):("string"==typeof e||e instanceof String)&&(t=this.noteNameToNumber(e)),!1===t)throw new Error("Invalid input value ("+e+").");return t},n.prototype.noteNameToNumber=function(e){"string"!=typeof e&&(e="");var t=e.match(/([CDEFGAB])(#{0,2}|b{0,2})(-?\d+)/i);if(!t)throw new RangeError("Invalid note name.");var n=r._semitones[t[1].toUpperCase()],o=12*(parseInt(t[3])+1-Math.floor(r.octaveOffset))+n;if(-1<t[2].toLowerCase().indexOf("b")?o-=t[2].length:-1<t[2].toLowerCase().indexOf("#")&&(o+=t[2].length),o<0||127<o)throw new RangeError("Invalid note name or note outside valid range.");return o},n.prototype._updateInputsAndOutputs=function(){this._updateInputs(),this._updateOutputs()},n.prototype._updateInputs=function(){for(var e=0;e<this._inputs.length;e++){for(var t=!0,n=this.interface.inputs.values(),r=n.next();r&&!r.done;r=n.next())if(this._inputs[e]._midiInput===r.value){t=!1;break}t&&this._inputs.splice(e,1)}this.interface&&this.interface.inputs.forEach(function(e){for(var t=!0,n=0;n<this._inputs.length;n++)this._inputs[n]._midiInput===e&&(t=!1);t&&this._inputs.push(new o(e))}.bind(this))},n.prototype._updateOutputs=function(){for(var e=0;e<this._outputs.length;e++){for(var t=!0,n=this.interface.outputs.values(),r=n.next();r&&!r.done;r=n.next())if(this._outputs[e]._midiOutput===r.value){t=!1;break}t&&this._outputs.splice(e,1)}this.interface&&this.interface.outputs.forEach(function(e){for(var t=!0,n=0;n<this._outputs.length;n++)this._outputs[n]._midiOutput===e&&(t=!1);t&&this._outputs.push(new s(e))}.bind(this))},n.prototype._onInterfaceStateChange=function(e){this._updateInputsAndOutputs();var t={timestamp:e.timeStamp,type:e.port.state};this.interface&&"connected"===e.port.state?"output"===e.port.type?t.port=this.getOutputById(e.port.id):"input"===e.port.type&&(t.port=this.getInputById(e.port.id)):t.port={connection:"closed",id:e.port.id,manufacturer:e.port.manufacturer,name:e.port.name,state:e.port.state,type:e.port.type},this._userHandlers[e.port.state].forEach((function(e){e(t)}))},n.prototype._resetInterfaceUserHandlers=function(){for(var e=0;e<this._midiInterfaceEvents.length;e++)this._userHandlers[this._midiInterfaceEvents[e]]=[]},o.prototype.on=o.prototype.addListener=function(e,t,n){var o=this;if(void 0===t&&(t="all"),Array.isArray(t)||(t=[t]),t.forEach((function(e){if("all"!==e&&!(1<=e&&e<=16))throw new RangeError("The 'channel' parameter is invalid.")})),"function"!=typeof n)throw new TypeError("The 'listener' parameter must be a function.");if(void 0!==r.MIDI_SYSTEM_MESSAGES[e])this._userHandlers.system[e]||(this._userHandlers.system[e]=[]),this._userHandlers.system[e].push(n);else{if(void 0===r.MIDI_CHANNEL_MESSAGES[e])throw new TypeError("The specified event type is not supported.");if(-1<t.indexOf("all")){t=[];for(var s=1;s<=16;s++)t.push(s)}this._userHandlers.channel[e]||(this._userHandlers.channel[e]=[]),t.forEach((function(t){o._userHandlers.channel[e][t]||(o._userHandlers.channel[e][t]=[]),o._userHandlers.channel[e][t].push(n)}))}return this},o.prototype.hasListener=function(e,t,n){var o=this;if("function"!=typeof n)throw new TypeError("The 'listener' parameter must be a function.");if(void 0===t&&(t="all"),t.constructor!==Array&&(t=[t]),void 0!==r.MIDI_SYSTEM_MESSAGES[e]){for(var s=0;s<this._userHandlers.system[e].length;s++)if(this._userHandlers.system[e][s]===n)return!0}else if(void 0!==r.MIDI_CHANNEL_MESSAGES[e]){if(-1<t.indexOf("all")){t=[];for(var i=1;i<=16;i++)t.push(i)}return!!this._userHandlers.channel[e]&&t.every((function(t){var r=o._userHandlers.channel[e][t];return r&&-1<r.indexOf(n)}))}return!1},o.prototype.removeListener=function(e,t,n){var o=this;if(void 0!==n&&"function"!=typeof n)throw new TypeError("The 'listener' parameter must be a function.");if(void 0===t&&(t="all"),t.constructor!==Array&&(t=[t]),void 0!==r.MIDI_SYSTEM_MESSAGES[e])if(void 0===n)this._userHandlers.system[e]=[];else for(var s=0;s<this._userHandlers.system[e].length;s++)this._userHandlers.system[e][s]===n&&this._userHandlers.system[e].splice(s,1);else if(void 0!==r.MIDI_CHANNEL_MESSAGES[e]){if(-1<t.indexOf("all")){t=[];for(var i=1;i<=16;i++)t.push(i)}if(!this._userHandlers.channel[e])return this;t.forEach((function(t){var r=o._userHandlers.channel[e][t];if(r)if(void 0===n)o._userHandlers.channel[e][t]=[];else for(var s=0;s<r.length;s++)r[s]===n&&r.splice(s,1)}))}else{if(void 0!==e)throw new TypeError("The specified event type is not supported.");this._initializeUserHandlers()}return this},o.prototype._initializeUserHandlers=function(){for(var e in r.MIDI_CHANNEL_MESSAGES)r.MIDI_CHANNEL_MESSAGES.hasOwnProperty(e)&&(this._userHandlers.channel[e]={});for(var t in r.MIDI_SYSTEM_MESSAGES)r.MIDI_SYSTEM_MESSAGES.hasOwnProperty(t)&&(this._userHandlers.system[t]=[])},o.prototype._onMidiMessage=function(e){if(0<this._userHandlers.system.midimessage.length){var t={target:this,data:e.data,timestamp:e.timeStamp,type:"midimessage"};this._userHandlers.system.midimessage.forEach((function(e){e(t)}))}e.data[0]<240?(this._parseChannelEvent(e),this._parseNrpnEvent(e)):e.data[0]<=255&&this._parseSystemEvent(e)},o.prototype._parseNrpnEvent=function(e){var t,n,o=e.data[0]>>4,s=15&e.data[0],i=1+s;if(1<e.data.length&&(t=e.data[1],n=2<e.data.length?e.data[2]:void 0),r.nrpnEventsEnabled&&o===r.MIDI_CHANNEL_MESSAGES.controlchange&&(t>=r.MIDI_NRPN_MESSAGES.increment&&t<=r.MIDI_NRPN_MESSAGES.parammsb||t===r.MIDI_NRPN_MESSAGES.entrymsb||t===r.MIDI_NRPN_MESSAGES.entrylsb)){var a={target:this,type:"controlchange",data:e.data,timestamp:e.timeStamp,channel:i,controller:{number:t,name:this.getCcNameByNumber(t)},value:n};if(a.controller.number===r.MIDI_NRPN_MESSAGES.parammsb&&a.value!=r.MIDI_NRPN_MESSAGES.nullactiveparameter)r._nrpnBuffer[s]=[],r._nrpnBuffer[s][0]=a;else if(1===r._nrpnBuffer[s].length&&a.controller.number===r.MIDI_NRPN_MESSAGES.paramlsb)r._nrpnBuffer[s].push(a);else if(2!==r._nrpnBuffer[s].length||a.controller.number!==r.MIDI_NRPN_MESSAGES.increment&&a.controller.number!==r.MIDI_NRPN_MESSAGES.decrement&&a.controller.number!==r.MIDI_NRPN_MESSAGES.entrymsb)if(3===r._nrpnBuffer[s].length&&r._nrpnBuffer[s][2].number===r.MIDI_NRPN_MESSAGES.entrymsb&&a.controller.number===r.MIDI_NRPN_MESSAGES.entrylsb)r._nrpnBuffer[s].push(a);else if(3<=r._nrpnBuffer[s].length&&r._nrpnBuffer[s].length<=4&&a.controller.number===r.MIDI_NRPN_MESSAGES.parammsb&&a.value===r.MIDI_NRPN_MESSAGES.nullactiveparameter)r._nrpnBuffer[s].push(a);else if(4<=r._nrpnBuffer[s].length&&r._nrpnBuffer[s].length<=5&&a.controller.number===r.MIDI_NRPN_MESSAGES.paramlsb&&a.value===r.MIDI_NRPN_MESSAGES.nullactiveparameter){r._nrpnBuffer[s].push(a);var l=[];r._nrpnBuffer[s].forEach((function(e){l.push(e.data)}));var c=r._nrpnBuffer[s][0].value<<7|r._nrpnBuffer[s][1].value,u=r._nrpnBuffer[s][2].value;6===r._nrpnBuffer[s].length&&(u=r._nrpnBuffer[s][2].value<<7|r._nrpnBuffer[s][3].value);var d="";switch(r._nrpnBuffer[s][2].controller.number){case r.MIDI_NRPN_MESSAGES.entrymsb:d=r._nrpnTypes[0];break;case r.MIDI_NRPN_MESSAGES.increment:d=r._nrpnTypes[1];break;case r.MIDI_NRPN_MESSAGES.decrement:d=r._nrpnTypes[2];break;default:throw new Error("The NPRN type was unidentifiable.")}var f={timestamp:a.timestamp,channel:a.channel,type:"nrpn",data:l,controller:{number:c,type:d,name:"Non-Registered Parameter "+c},value:u};r._nrpnBuffer[s]=[],this._userHandlers.channel[f.type]&&this._userHandlers.channel[f.type][f.channel]&&this._userHandlers.channel[f.type][f.channel].forEach((function(e){e(f)}))}else r._nrpnBuffer[s]=[];else r._nrpnBuffer[s].push(a)}},o.prototype._parseChannelEvent=function(e){var t,n,o=e.data[0]>>4,s=1+(15&e.data[0]);1<e.data.length&&(t=e.data[1],n=2<e.data.length?e.data[2]:void 0);var i={target:this,data:e.data,timestamp:e.timeStamp,channel:s};o===r.MIDI_CHANNEL_MESSAGES.noteoff||o===r.MIDI_CHANNEL_MESSAGES.noteon&&0===n?(i.type="noteoff",i.note={number:t,name:r._notes[t%12],octave:r.getOctave(t)},i.velocity=n/127,i.rawVelocity=n):o===r.MIDI_CHANNEL_MESSAGES.noteon?(i.type="noteon",i.note={number:t,name:r._notes[t%12],octave:r.getOctave(t)},i.velocity=n/127,i.rawVelocity=n):o===r.MIDI_CHANNEL_MESSAGES.keyaftertouch?(i.type="keyaftertouch",i.note={number:t,name:r._notes[t%12],octave:r.getOctave(t)},i.value=n/127):o===r.MIDI_CHANNEL_MESSAGES.controlchange&&0<=t&&t<=119?(i.type="controlchange",i.controller={number:t,name:this.getCcNameByNumber(t)},i.value=n):o===r.MIDI_CHANNEL_MESSAGES.channelmode&&120<=t&&t<=127?(i.type="channelmode",i.controller={number:t,name:this.getChannelModeByNumber(t)},i.value=n):o===r.MIDI_CHANNEL_MESSAGES.programchange?(i.type="programchange",i.value=t):o===r.MIDI_CHANNEL_MESSAGES.channelaftertouch?(i.type="channelaftertouch",i.value=t/127):o===r.MIDI_CHANNEL_MESSAGES.pitchbend?(i.type="pitchbend",i.value=((n<<7)+t-8192)/8192):i.type="unknownchannelmessage",this._userHandlers.channel[i.type]&&this._userHandlers.channel[i.type][s]&&this._userHandlers.channel[i.type][s].forEach((function(e){e(i)}))},o.prototype.getCcNameByNumber=function(e){if(!(0<=(e=Math.floor(e))&&e<=119))throw new RangeError("The control change number must be between 0 and 119.");for(var t in r.MIDI_CONTROL_CHANGE_MESSAGES)if(r.MIDI_CONTROL_CHANGE_MESSAGES.hasOwnProperty(t)&&e===r.MIDI_CONTROL_CHANGE_MESSAGES[t])return t},o.prototype.getChannelModeByNumber=function(e){if(!(120<=(e=Math.floor(e))&&status<=127))throw new RangeError("The control change number must be between 120 and 127.");for(var t in r.MIDI_CHANNEL_MODE_MESSAGES)if(r.MIDI_CHANNEL_MODE_MESSAGES.hasOwnProperty(t)&&e===r.MIDI_CHANNEL_MODE_MESSAGES[t])return t},o.prototype._parseSystemEvent=function(e){var t=e.data[0],n={target:this,data:e.data,timestamp:e.timeStamp};t===r.MIDI_SYSTEM_MESSAGES.sysex?n.type="sysex":t===r.MIDI_SYSTEM_MESSAGES.timecode?n.type="timecode":t===r.MIDI_SYSTEM_MESSAGES.songposition?n.type="songposition":t===r.MIDI_SYSTEM_MESSAGES.songselect?(n.type="songselect",n.song=e.data[1]):t===r.MIDI_SYSTEM_MESSAGES.tuningrequest?n.type="tuningrequest":t===r.MIDI_SYSTEM_MESSAGES.clock?n.type="clock":t===r.MIDI_SYSTEM_MESSAGES.start?n.type="start":t===r.MIDI_SYSTEM_MESSAGES.continue?n.type="continue":t===r.MIDI_SYSTEM_MESSAGES.stop?n.type="stop":t===r.MIDI_SYSTEM_MESSAGES.activesensing?n.type="activesensing":t===r.MIDI_SYSTEM_MESSAGES.reset?n.type="reset":n.type="unknownsystemmessage",this._userHandlers.system[n.type]&&this._userHandlers.system[n.type].forEach((function(e){e(n)}))},s.prototype.send=function(e,t,n){if(!(128<=e&&e<=255))throw new RangeError("The status byte must be an integer between 128 (0x80) and 255 (0xFF).");void 0===t&&(t=[]),Array.isArray(t)||(t=[t]);var r=[];return t.forEach((function(e){var t=Math.floor(e);if(!(0<=t&&t<=255))throw new RangeError("Data bytes must be integers between 0 (0x00) and 255 (0xFF).");r.push(t)})),this._midiOutput.send([e].concat(r),parseFloat(n)||0),this},s.prototype.sendSysex=function(e,t,n){if(!r.sysexEnabled)throw new Error("Sysex message support must first be activated.");return n=n||{},e=[].concat(e),t.forEach((function(e){if(e<0||127<e)throw new RangeError("The data bytes of a sysex message must be integers between 0 (0x00) and 127 (0x7F).")})),t=e.concat(t,r.MIDI_SYSTEM_MESSAGES.sysexend),this.send(r.MIDI_SYSTEM_MESSAGES.sysex,t,this._parseTimeParameter(n.time)),this},s.prototype.sendTimecodeQuarterFrame=function(e,t){return t=t||{},this.send(r.MIDI_SYSTEM_MESSAGES.timecode,e,this._parseTimeParameter(t.time)),this},s.prototype.sendSongPosition=function(e,t){t=t||{};var n=(e=Math.floor(e)||0)>>7&127,o=127&e;return this.send(r.MIDI_SYSTEM_MESSAGES.songposition,[n,o],this._parseTimeParameter(t.time)),this},s.prototype.sendSongSelect=function(e,t){if(t=t||{},!(0<=(e=Math.floor(e))&&e<=127))throw new RangeError("The song number must be between 0 and 127.");return this.send(r.MIDI_SYSTEM_MESSAGES.songselect,[e],this._parseTimeParameter(t.time)),this},s.prototype.sendTuningRequest=function(e){return e=e||{},this.send(r.MIDI_SYSTEM_MESSAGES.tuningrequest,void 0,this._parseTimeParameter(e.time)),this},s.prototype.sendClock=function(e){return e=e||{},this.send(r.MIDI_SYSTEM_MESSAGES.clock,void 0,this._parseTimeParameter(e.time)),this},s.prototype.sendStart=function(e){return e=e||{},this.send(r.MIDI_SYSTEM_MESSAGES.start,void 0,this._parseTimeParameter(e.time)),this},s.prototype.sendContinue=function(e){return e=e||{},this.send(r.MIDI_SYSTEM_MESSAGES.continue,void 0,this._parseTimeParameter(e.time)),this},s.prototype.sendStop=function(e){return e=e||{},this.send(r.MIDI_SYSTEM_MESSAGES.stop,void 0,this._parseTimeParameter(e.time)),this},s.prototype.sendActiveSensing=function(e){return e=e||{},this.send(r.MIDI_SYSTEM_MESSAGES.activesensing,[],this._parseTimeParameter(e.time)),this},s.prototype.sendReset=function(e){return e=e||{},this.send(r.MIDI_SYSTEM_MESSAGES.reset,void 0,this._parseTimeParameter(e.time)),this},s.prototype.stopNote=function(e,t,n){if("all"===e)return this.sendChannelMode("allnotesoff",0,t,n);var o=64;return(n=n||{}).rawVelocity?!isNaN(n.velocity)&&0<=n.velocity&&n.velocity<=127&&(o=n.velocity):!isNaN(n.velocity)&&0<=n.velocity&&n.velocity<=1&&(o=127*n.velocity),this._convertNoteToArray(e).forEach(function(e){r.toMIDIChannels(t).forEach(function(t){this.send((r.MIDI_CHANNEL_MESSAGES.noteoff<<4)+(t-1),[e,Math.round(o)],this._parseTimeParameter(n.time))}.bind(this))}.bind(this)),this},s.prototype.playNote=function(e,t,n){var o,s=64;if((n=n||{}).rawVelocity?!isNaN(n.velocity)&&0<=n.velocity&&n.velocity<=127&&(s=n.velocity):!isNaN(n.velocity)&&0<=n.velocity&&n.velocity<=1&&(s=127*n.velocity),o=this._parseTimeParameter(n.time),this._convertNoteToArray(e).forEach(function(e){r.toMIDIChannels(t).forEach(function(t){this.send((r.MIDI_CHANNEL_MESSAGES.noteon<<4)+(t-1),[e,Math.round(s)],o)}.bind(this))}.bind(this)),!isNaN(n.duration)){n.duration<=0&&(n.duration=0);var i=64;n.rawVelocity?!isNaN(n.release)&&0<=n.release&&n.release<=127&&(i=n.release):!isNaN(n.release)&&0<=n.release&&n.release<=1&&(i=127*n.release),this._convertNoteToArray(e).forEach(function(e){r.toMIDIChannels(t).forEach(function(t){this.send((r.MIDI_CHANNEL_MESSAGES.noteoff<<4)+(t-1),[e,Math.round(i)],(o||r.time)+n.duration)}.bind(this))}.bind(this))}return this},s.prototype.sendKeyAftertouch=function(e,t,n,o){var s=this;if(o=o||{},t<1||16<t)throw new RangeError("The channel must be between 1 and 16.");(isNaN(n)||n<0||1<n)&&(n=.5);var i=Math.round(127*n);return this._convertNoteToArray(e).forEach((function(e){r.toMIDIChannels(t).forEach((function(t){s.send((r.MIDI_CHANNEL_MESSAGES.keyaftertouch<<4)+(t-1),[e,i],s._parseTimeParameter(o.time))}))})),this},s.prototype.sendControlChange=function(e,t,n,o){if(o=o||{},"string"==typeof e){if(void 0===(e=r.MIDI_CONTROL_CHANGE_MESSAGES[e]))throw new TypeError("Invalid controller name.")}else if(!(0<=(e=Math.floor(e))&&e<=119))throw new RangeError("Controller numbers must be between 0 and 119.");if(!(0<=(t=Math.floor(t)||0)&&t<=127))throw new RangeError("Controller value must be between 0 and 127.");return r.toMIDIChannels(n).forEach(function(n){this.send((r.MIDI_CHANNEL_MESSAGES.controlchange<<4)+(n-1),[e,t],this._parseTimeParameter(o.time))}.bind(this)),this},s.prototype._selectRegisteredParameter=function(e,t,n){var o=this;if(e[0]=Math.floor(e[0]),!(0<=e[0]&&e[0]<=127))throw new RangeError("The control65 value must be between 0 and 127");if(e[1]=Math.floor(e[1]),!(0<=e[1]&&e[1]<=127))throw new RangeError("The control64 value must be between 0 and 127");return r.toMIDIChannels(t).forEach((function(){o.sendControlChange(101,e[0],t,{time:n}),o.sendControlChange(100,e[1],t,{time:n})})),this},s.prototype._selectNonRegisteredParameter=function(e,t,n){var o=this;if(e[0]=Math.floor(e[0]),!(0<=e[0]&&e[0]<=127))throw new RangeError("The control63 value must be between 0 and 127");if(e[1]=Math.floor(e[1]),!(0<=e[1]&&e[1]<=127))throw new RangeError("The control62 value must be between 0 and 127");return r.toMIDIChannels(t).forEach((function(){o.sendControlChange(99,e[0],t,{time:n}),o.sendControlChange(98,e[1],t,{time:n})})),this},s.prototype._setCurrentRegisteredParameter=function(e,t,n){var o=this;if((e=[].concat(e))[0]=Math.floor(e[0]),!(0<=e[0]&&e[0]<=127))throw new RangeError("The msb value must be between 0 and 127");return r.toMIDIChannels(t).forEach((function(){o.sendControlChange(6,e[0],t,{time:n})})),e[1]=Math.floor(e[1]),0<=e[1]&&e[1]<=127&&r.toMIDIChannels(t).forEach((function(){o.sendControlChange(38,e[1],t,{time:n})})),this},s.prototype._deselectRegisteredParameter=function(e,t){var n=this;return r.toMIDIChannels(e).forEach((function(){n.sendControlChange(101,127,e,{time:t}),n.sendControlChange(100,127,e,{time:t})})),this},s.prototype.setRegisteredParameter=function(e,t,n,o){var s=this;if(o=o||{},!Array.isArray(e)){if(!r.MIDI_REGISTERED_PARAMETER[e])throw new Error("The specified parameter is not available.");e=r.MIDI_REGISTERED_PARAMETER[e]}return r.toMIDIChannels(n).forEach((function(){s._selectRegisteredParameter(e,n,o.time),s._setCurrentRegisteredParameter(t,n,o.time),s._deselectRegisteredParameter(n,o.time)})),this},s.prototype.setNonRegisteredParameter=function(e,t,n,o){var s=this;if(o=o||{},!(0<=e[0]&&e[0]<=127&&0<=e[1]&&e[1]<=127))throw new Error("Position 0 and 1 of the 2-position parameter array must both be between 0 and 127.");return t=[].concat(t),r.toMIDIChannels(n).forEach((function(){s._selectNonRegisteredParameter(e,n,o.time),s._setCurrentRegisteredParameter(t,n,o.time),s._deselectRegisteredParameter(n,o.time)})),this},s.prototype.incrementRegisteredParameter=function(e,t,n){var o=this;if(n=n||{},!Array.isArray(e)){if(!r.MIDI_REGISTERED_PARAMETER[e])throw new Error("The specified parameter is not available.");e=r.MIDI_REGISTERED_PARAMETER[e]}return r.toMIDIChannels(t).forEach((function(){o._selectRegisteredParameter(e,t,n.time),o.sendControlChange(96,0,t,{time:n.time}),o._deselectRegisteredParameter(t,n.time)})),this},s.prototype.decrementRegisteredParameter=function(e,t,n){if(n=n||{},!Array.isArray(e)){if(!r.MIDI_REGISTERED_PARAMETER[e])throw new TypeError("The specified parameter is not available.");e=r.MIDI_REGISTERED_PARAMETER[e]}return r.toMIDIChannels(t).forEach(function(){this._selectRegisteredParameter(e,t,n.time),this.sendControlChange(97,0,t,{time:n.time}),this._deselectRegisteredParameter(t,n.time)}.bind(this)),this},s.prototype.setPitchBendRange=function(e,t,n,o){var s=this;if(o=o||{},!(0<=(e=Math.floor(e)||0)&&e<=127))throw new RangeError("The semitones value must be between 0 and 127");if(!(0<=(t=Math.floor(t)||0)&&t<=127))throw new RangeError("The cents value must be between 0 and 127");return r.toMIDIChannels(n).forEach((function(){s.setRegisteredParameter("pitchbendrange",[e,t],n,{time:o.time})})),this},s.prototype.setModulationRange=function(e,t,n,o){var s=this;if(o=o||{},!(0<=(e=Math.floor(e)||0)&&e<=127))throw new RangeError("The semitones value must be between 0 and 127");if(!(0<=(t=Math.floor(t)||0)&&t<=127))throw new RangeError("The cents value must be between 0 and 127");return r.toMIDIChannels(n).forEach((function(){s.setRegisteredParameter("modulationrange",[e,t],n,{time:o.time})})),this},s.prototype.setMasterTuning=function(e,t,n){var o=this;if(n=n||{},(e=parseFloat(e)||0)<=-65||64<=e)throw new RangeError("The value must be a decimal number larger than -65 and smaller than 64.");var s=Math.floor(e)+64,i=e-Math.floor(e),a=(i=Math.round((i+1)/2*16383))>>7&127,l=127&i;return r.toMIDIChannels(t).forEach((function(){o.setRegisteredParameter("channelcoarsetuning",s,t,{time:n.time}),o.setRegisteredParameter("channelfinetuning",[a,l],t,{time:n.time})})),this},s.prototype.setTuningProgram=function(e,t,n){var o=this;if(n=n||{},!(0<=(e=Math.floor(e))&&e<=127))throw new RangeError("The program value must be between 0 and 127");return r.toMIDIChannels(t).forEach((function(){o.setRegisteredParameter("tuningprogram",e,t,{time:n.time})})),this},s.prototype.setTuningBank=function(e,t,n){var o=this;if(n=n||{},!(0<=(e=Math.floor(e)||0)&&e<=127))throw new RangeError("The bank value must be between 0 and 127");return r.toMIDIChannels(t).forEach((function(){o.setRegisteredParameter("tuningbank",e,t,{time:n.time})})),this},s.prototype.sendChannelMode=function(e,t,n,o){if(o=o||{},"string"==typeof e){if(!(e=r.MIDI_CHANNEL_MODE_MESSAGES[e]))throw new TypeError("Invalid channel mode message name.")}else if(!(120<=(e=Math.floor(e))&&e<=127))throw new RangeError("Channel mode numerical identifiers must be between 120 and 127.");if((t=Math.floor(t)||0)<0||127<t)throw new RangeError("Value must be an integer between 0 and 127.");return r.toMIDIChannels(n).forEach(function(n){this.send((r.MIDI_CHANNEL_MESSAGES.channelmode<<4)+(n-1),[e,t],this._parseTimeParameter(o.time))}.bind(this)),this},s.prototype.sendProgramChange=function(e,t,n){var o=this;if(n=n||{},e=Math.floor(e),isNaN(e)||e<0||127<e)throw new RangeError("Program numbers must be between 0 and 127.");return r.toMIDIChannels(t).forEach((function(t){o.send((r.MIDI_CHANNEL_MESSAGES.programchange<<4)+(t-1),[e],o._parseTimeParameter(n.time))})),this},s.prototype.sendChannelAftertouch=function(e,t,n){var o=this;n=n||{},e=parseFloat(e),(isNaN(e)||e<0||1<e)&&(e=.5);var s=Math.round(127*e);return r.toMIDIChannels(t).forEach((function(e){o.send((r.MIDI_CHANNEL_MESSAGES.channelaftertouch<<4)+(e-1),[s],o._parseTimeParameter(n.time))})),this},s.prototype.sendPitchBend=function(e,t,n){var o=this;if(n=n||{},isNaN(e)||e<-1||1<e)throw new RangeError("Pitch bend value must be between -1 and 1.");var s=Math.round((e+1)/2*16383),i=s>>7&127,a=127&s;return r.toMIDIChannels(t).forEach((function(e){o.send((r.MIDI_CHANNEL_MESSAGES.pitchbend<<4)+(e-1),[a,i],o._parseTimeParameter(n.time))})),this},s.prototype._parseTimeParameter=function(e){var t,n=parseFloat(e);return"string"==typeof e&&"+"===e.substring(0,1)?n&&0<n&&(t=r.time+n):n>r.time&&(t=n),t},s.prototype._convertNoteToArray=function(e){var t=[];return Array.isArray(e)||(e=[e]),e.forEach((function(e){t.push(r.guessNoteNumber(e))})),t},e.exports?e.exports=r:t.WebMidi||(t.WebMidi=r)}(ce)}));class de{static isOxionSysex(e){return e[1]==this.sysexMfgId[0]&&e[2]==this.sysexMfgId[1]&&e[3]==this.sysexMfgId[2]}static sortMidiInterfaces(e,t){let n=`${e.manufacturer} ${e.name}`,r=`${t.manufacturer} ${t.name}`;return n<r?-1:n>r?1:0}static allInputs(){return ue.inputs.sort(de.sortMidiInterfaces)}static allOutputs(){return ue.outputs.sort(de.sortMidiInterfaces)}static sendConfiguration(e,t){e.device().sendShortMessages?this.sendShortConfiguration(e,t):this.sendFullConfiguration(e,t)}static sendFullConfiguration(e,t){t.sendSysex(de.sysexMfgId,[de.updateConfigMsg].concat(e.toSysexArray()))}static sendShortConfiguration(e,t){t.sendSysex(de.sysexMfgId,[de.updateDeviceOptionsMsg].concat(e.toDeviceOptionsSysexArray())),t.sendSysex(de.sysexMfgId,[de.updateUSBOptionsMessage].concat(e.toUSBOptionsSysexArray())),t.sendSysex(de.sysexMfgId,[de.updateTRSOptionsMessage].concat(e.toTRSOptionsSysexArray()))}static requestConfig(e){e.sendSysex(de.sysexMfgId,[de.requestInfoMsg])}}de.sysexMfgId=[125,0,0],de.requestInfoMsg=31,de.updateConfigMsg=14,de.updateDeviceOptionsMsg=13,de.updateUSBOptionsMessage=12,de.updateTRSOptionsMessage=11;const fe=[];function pe(t,n=e){let r;const o=[];function i(e){if(s(t,e)&&(t=e,r)){const e=!fe.length;for(let e=0;e<o.length;e+=1){const n=o[e];n[1](),fe.push(n,t)}if(e){for(let e=0;e<fe.length;e+=2)fe[e][0](fe[e+1]);fe.length=0}}}return{set:i,update:function(e){i(e(t))},subscribe:function(s,a=e){const l=[s,a];return o.push(l),1===o.length&&(r=n(i)||e),s(t),()=>{const e=o.indexOf(l);-1!==e&&o.splice(e,1),0===o.length&&(r(),r=null)}}}}const he=pe(null),me=pe(null),ge=pe([]),$e=pe([]),ve=pe(null),be=pe(null),Ee=pe(null);function ye(t){let n,r;return{c(){n=g("span"),y(n,"class",r="fas fa-"+t[0]+" "+t[1]+" svelte-pvbvkq")},m(e,t){p(e,n,t)},p(e,[t]){3&t&&r!==(r="fas fa-"+e[0]+" "+e[1]+" svelte-pvbvkq")&&y(n,"class",r)},i:e,o:e,d(e){e&&h(n)}}}function _e(e,t,n){let{i:r}=t,{classList:o=""}=t;return e.$set=e=>{"i"in e&&n(0,r=e.i),"classList"in e&&n(1,o=e.classList)},[r,o]}class Me extends se{constructor(e){super(),oe(this,e,_e,ye,s,{i:0,classList:1})}}function Se(e){let t;const n=new Me({props:{i:e[1]}});return{c(){ee(n.$$.fragment)},m(e,r){te(n,e,r),t=!0},p(e,t){const r={};2&t&&(r.i=e[1]),n.$set(r)},i(e){t||(Q(n.$$.fragment,e),t=!0)},o(e){X(n.$$.fragment,e),t=!1},d(e){ne(n,e)}}}function Ie(e){let t,n,r,o,s,i,a=e[1]&&Se(e);return{c(){t=g("div"),n=g("button"),a&&a.c(),r=v(),o=$(e[0]),n.disabled=e[2],y(n,"class","svelte-1gcivh1"),y(t,"class","svelte-1gcivh1")},m(l,c){p(l,t,c),f(t,n),a&&a.m(n,null),f(n,r),f(n,o),s=!0,i=E(n,"click",e[3])},p(e,[t]){e[1]?a?(a.p(e,t),Q(a,1)):(a=Se(e),a.c(),Q(a,1),a.m(n,r)):a&&(J(),X(a,1,1,()=>{a=null}),K()),(!s||1&t)&&M(o,e[0]),(!s||4&t)&&(n.disabled=e[2])},i(e){s||(Q(a),s=!0)},o(e){X(a),s=!1},d(e){e&&h(t),a&&a.d(),i()}}}function we(e,t,n){let{label:r}=t,{clickMessageName:o=null}=t,{icon:s=null}=t,{disabled:i=!1}=t;const a=B();return e.$set=e=>{"label"in e&&n(0,r=e.label),"clickMessageName"in e&&n(4,o=e.clickMessageName),"icon"in e&&n(1,s=e.icon),"disabled"in e&&n(2,i=e.disabled)},[r,s,i,function(){a("message",{name:o})},o]}class xe extends se{constructor(e){super(),oe(this,e,we,Ie,s,{label:0,clickMessageName:4,icon:1,disabled:2})}}function Ce(e){let t,n,r,o,s,i;const u=e[2].default,d=a(u,e,e[1],null);return{c(){t=g("p"),n=g("label"),r=g("input"),o=v(),d&&d.c(),y(r,"type","checkbox")},m(a,l){p(a,t,l),f(t,n),f(n,r),r.checked=e[0],f(n,o),d&&d.m(n,null),s=!0,i=E(r,"change",e[3])},p(e,[t]){1&t&&(r.checked=e[0]),d&&d.p&&2&t&&d.p(l(u,e,e[1],null),c(u,e[1],t,null))},i(e){s||(Q(d,e),s=!0)},o(e){X(d,e),s=!1},d(e){e&&h(t),d&&d.d(e),i()}}}function Ae(e,t,n){let{checked:r}=t,{$$slots:o={},$$scope:s}=t;return e.$set=e=>{"checked"in e&&n(0,r=e.checked),"$$scope"in e&&n(1,s=e.$$scope)},[r,s,o,function(){r=this.checked,n(0,r)}]}class Ne extends se{constructor(e){super(),oe(this,e,Ae,Ce,s,{checked:0})}}function Te(e){let t,n,r,o,s,i=void 0!==e[0].val&&De(e);return{c(){t=g("dt"),t.textContent="Value",n=g("dd"),r=g("div"),i&&i.c(),o=v(),s=g("div"),y(t,"class","svelte-5fijw0"),y(s,"class","bar svelte-5fijw0"),I(s,"height",e[0].val+"px"),I(s,"background-color","rgb("+e[5][e[1]]+",125,125)"),y(r,"class","inner svelte-5fijw0"),y(n,"class","display svelte-5fijw0")},m(e,a){p(e,t,a),p(e,n,a),f(n,r),i&&i.m(r,null),f(r,o),f(r,s)},p(e,t){void 0!==e[0].val?i?i.p(e,t):(i=De(e),i.c(),i.m(r,o)):i&&(i.d(1),i=null),1&t&&I(s,"height",e[0].val+"px"),2&t&&I(s,"background-color","rgb("+e[5][e[1]]+",125,125)")},d(e){e&&h(t),e&&h(n),i&&i.d()}}}function De(e){let t,n,r,o=e[0].val+"";return{c(){t=g("span"),n=$(o),y(t,"class",r=u(e[0].val<27?"lowvalue":"")+" svelte-5fijw0")},m(e,r){p(e,t,r),f(t,n)},p(e,s){1&s&&o!==(o=e[0].val+"")&&M(n,o),1&s&&r!==(r=u(e[0].val<27?"lowvalue":"")+" svelte-5fijw0")&&y(t,"class",r)},d(e){e&&h(t)}}}function Be(t){let n,r,o,s,i,a,l,c,u,d=t[4][t[1]]+"",m=t[3][t[0].channel]+"",v=t[0].cc+"",b=!t[2]&&Te(t);return{c(){n=g("dl"),r=g("dt"),o=$(d),s=g("dt"),s.textContent="Channel",i=g("dd"),a=$(m),l=g("dt"),l.textContent="CC",c=g("dd"),u=$(v),b&&b.c(),y(r,"class","index svelte-5fijw0"),I(r,"background-color","rgb("+t[5][t[1]]+",125,125)"),y(s,"class","svelte-5fijw0"),y(i,"class","svelte-5fijw0"),y(l,"class","svelte-5fijw0"),y(c,"class","svelte-5fijw0"),y(n,"class","config-column svelte-5fijw0")},m(e,t){p(e,n,t),f(n,r),f(r,o),f(n,s),f(n,i),f(i,a),f(n,l),f(n,c),f(c,u),b&&b.m(n,null)},p(e,[t]){2&t&&d!==(d=e[4][e[1]]+"")&&M(o,d),2&t&&I(r,"background-color","rgb("+e[5][e[1]]+",125,125)"),1&t&&m!==(m=e[3][e[0].channel]+"")&&M(a,m),1&t&&v!==(v=e[0].cc+"")&&M(u,v),e[2]?b&&(b.d(1),b=null):b?b.p(e,t):(b=Te(e),b.c(),b.m(n,null))},i:e,o:e,d(e){e&&h(n),b&&b.d()}}}function ke(e,t,n){let{control:r}=t,{index:o}=t,{disableValue:s=!1}=t;return e.$set=e=>{"control"in e&&n(0,r=e.control),"index"in e&&n(1,o=e.index),"disableValue"in e&&n(2,s=e.disableValue)},[r,o,s,["OFF","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16"],["Fader 1","Fader 2","Fader 3","Fader 4","Fader 5","Fader 6","Fader 7","Fader 8"," ↑ Front","↑ Back","↑ Right","↑ Left","⟳","⟲","ʎɐʍ sᴉɥʇ","this way"],[125,125,125,125,125,125,125,125,155,155,155,155,155,155,155,155]]}class Re extends se{constructor(e){super(),oe(this,e,ke,Be,s,{control:0,index:1,disableValue:2})}}function Ge(e,t,n){const r=e.slice();return r[11]=t[n],r}function Pe(e){let t,n,r,o=e[3][e[11]]+"";return{c(){t=g("option"),n=$(o),t.__value=r=e[11],t.value=t.__value},m(e,r){p(e,t,r),f(t,n)},p(e,s){4&s&&o!==(o=e[3][e[11]]+"")&&M(n,o),4&s&&r!==(r=e[11])&&(t.__value=r),t.value=t.__value},d(e){e&&h(t)}}}function Oe(t){let n,o,s,i,a,l,c,u,d,b,_,x=t[4][t[1]]+"",C=!1,A=t[2],N=[];for(let e=0;e<A.length;e+=1)N[e]=Pe(Ge(t,A,e));function T(){C=!0,t[10].call(b)}return{c(){n=g("dl"),o=g("dt"),s=$(x),i=g("dt"),i.textContent="Channel",a=g("dd"),l=g("select");for(let e=0;e<N.length;e+=1)N[e].c();c=v(),u=g("dt"),u.textContent="CC",d=g("dd"),b=g("input"),y(o,"class","index svelte-6nh3sy"),I(o,"background-color","rgb("+t[5][t[1]]+",125,125)"),y(i,"class","svelte-6nh3sy"),void 0===t[0].channel&&L(()=>t[9].call(l)),y(a,"class","svelte-6nh3sy"),y(u,"class","svelte-6nh3sy"),y(b,"type","number"),y(b,"min","1"),y(b,"max","127"),y(d,"class","svelte-6nh3sy"),y(n,"class","config-column svelte-6nh3sy")},m(e,r){p(e,n,r),f(n,o),f(o,s),f(n,i),f(n,a),f(a,l);for(let e=0;e<N.length;e+=1)N[e].m(l,null);w(l,t[0].channel),f(a,c),f(n,u),f(n,d),f(d,b),S(b,t[0].cc),_=[E(l,"change",t[9]),E(l,"change",t[6]),E(b,"input",T),E(b,"change",t[6])]},p(e,[t]){if(2&t&&x!==(x=e[4][e[1]]+"")&&M(s,x),2&t&&I(o,"background-color","rgb("+e[5][e[1]]+",125,125)"),12&t){let n;for(A=e[2],n=0;n<A.length;n+=1){const r=Ge(e,A,n);N[n]?N[n].p(r,t):(N[n]=Pe(r),N[n].c(),N[n].m(l,null))}for(;n<N.length;n+=1)N[n].d(1);N.length=A.length}1&t&&w(l,e[0].channel),!C&&1&t&&S(b,e[0].cc),C=!1},i:e,o:e,d(e){e&&h(n),m(N,e),r(_)}}}function He(e,t,n){let r;i(e,me,e=>n(7,r=e));let{index:o}=t,{editControl:s}=t,a=Array.from(Array(17).keys());a.forEach((e,t)=>n(2,a[t]=e,a));let l=Array.from(Array(128).keys());return e.$set=e=>{"index"in e&&n(1,o=e.index),"editControl"in e&&n(0,s=e.editControl)},[s,o,a,["OFF","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16"],["Fader 1","Fader 2","Fader 3","Fader 4","Fader 5","Fader 6","Fader 7","Fader 8"," ↑ Front","↑ Back","↑ Right","↑ Left","⟳","⟲","ʎɐʍ sᴉɥʇ","this way"],[125,125,125,125,125,125,125,125,155,155,155,155,155,155,155,155],function(){me.update(e=>r)},r,l,function(){s.channel=x(this),n(0,s),n(2,a)},function(){s.cc=_(this.value),n(0,s),n(2,a)}]}class Fe extends se{constructor(e){super(),oe(this,e,He,Oe,s,{index:1,editControl:0})}}function Le(e){let t,n,r,o,s,i,a=e[0].paramA+"",l=e[0].paramB+"";return{c(){t=g("dt"),t.textContent="CC",n=g("dd"),r=$(a),o=g("dt"),o.textContent="On Value",s=g("dd"),i=$(l),y(t,"class","svelte-5fijw0"),y(n,"class","svelte-5fijw0"),y(o,"class","svelte-5fijw0"),y(s,"class","svelte-5fijw0")},m(e,a){p(e,t,a),p(e,n,a),f(n,r),p(e,o,a),p(e,s,a),f(s,i)},p(e,t){1&t&&a!==(a=e[0].paramA+"")&&M(r,a),1&t&&l!==(l=e[0].paramB+"")&&M(i,l)},d(e){e&&h(t),e&&h(n),e&&h(o),e&&h(s)}}}function qe(e){let t,n,r,o,s,i,a,l,c,u=e[0].paramA+"",d=e[4](e[0].paramA)+"",m=e[0].paramB+"";return{c(){t=g("dt"),t.textContent="Note Number",n=g("dd"),r=$(u),o=$(" ("),s=$(d),i=$(")"),a=g("dt"),a.textContent="Velocity",l=g("dd"),c=$(m),y(t,"class","svelte-5fijw0"),y(n,"class","svelte-5fijw0"),y(a,"class","svelte-5fijw0"),y(l,"class","svelte-5fijw0")},m(e,u){p(e,t,u),p(e,n,u),f(n,r),f(n,o),f(n,s),f(n,i),p(e,a,u),p(e,l,u),f(l,c)},p(e,t){1&t&&u!==(u=e[0].paramA+"")&&M(r,u),1&t&&d!==(d=e[4](e[0].paramA)+"")&&M(s,d),1&t&&m!==(m=e[0].paramB+"")&&M(c,m)},d(e){e&&h(t),e&&h(n),e&&h(a),e&&h(l)}}}function je(t){let n,r,o,s,i,a,l,c,u,d=t[3][t[1]]+"",m=t[0].channel+"",v=t[2][t[0].mode]+"";function b(e,t){return"1"==e[0].mode?qe:Le}let E=b(t),_=E(t);return{c(){n=g("dl"),r=g("dt"),o=$(d),s=g("dt"),s.textContent="Channel",i=g("dd"),a=$(m),l=g("dt"),l.textContent="Mode",c=g("dd"),u=$(v),_.c(),y(r,"class","index svelte-5fijw0"),y(s,"class","svelte-5fijw0"),y(i,"class","svelte-5fijw0"),y(l,"class","svelte-5fijw0"),y(c,"class","svelte-5fijw0"),y(n,"class","config-column svelte-5fijw0")},m(e,t){p(e,n,t),f(n,r),f(r,o),f(n,s),f(n,i),f(i,a),f(n,l),f(n,c),f(c,u),_.m(n,null)},p(e,[t]){2&t&&d!==(d=e[3][e[1]]+"")&&M(o,d),1&t&&m!==(m=e[0].channel+"")&&M(a,m),1&t&&v!==(v=e[2][e[0].mode]+"")&&M(u,v),E===(E=b(e))&&_?_.p(e,t):(_.d(1),_=E(e),_&&(_.c(),_.m(n,null)))},i:e,o:e,d(e){e&&h(n),_.d()}}}function Ve(e,t,n){let{control:r}=t,{index:o}=t,{disableValue:s=!1}=t,i=["C","Db","D","Eb","E","F","F#","G","Ab","A","Bb","B"];return e.$set=e=>{"control"in e&&n(0,r=e.control),"index"in e&&n(1,o=e.index),"disableValue"in e&&n(5,s=e.disableValue)},[r,o,["CC","Keyboard"],["A","B","C","D"],function(e){return i[e%12]+(Math.floor(e/12)-1)},s]}class Ye extends se{constructor(e){super(),oe(this,e,Ve,je,s,{control:0,index:1,disableValue:5})}}function Ue(e,t,n){const r=e.slice();return r[17]=t[n],r}function We(e,t,n){const r=e.slice();return r[17]=t[n],r}function ze(e,t,n){const r=e.slice();return r[17]=t[n],r}function Je(e,t,n){const r=e.slice();return r[17]=t[n],r}function Ke(e,t,n){const r=e.slice();return r[26]=t[n],r}function Qe(e,t,n){const r=e.slice();return r[29]=t[n],r}function Xe(e){let t,n,r,o=e[29]+"";return{c(){t=g("option"),n=$(o),t.__value=r=e[29],t.value=t.__value},m(e,r){p(e,t,r),f(t,n)},p(e,s){4&s[0]&&o!==(o=e[29]+"")&&M(n,o),4&s[0]&&r!==(r=e[29])&&(t.__value=r),t.value=t.__value},d(e){e&&h(t)}}}function Ze(t){let n,r,o,s=t[5][t[26]]+"";return{c(){n=g("option"),r=$(s),n.__value=o=t[26],n.value=n.__value},m(e,t){p(e,n,t),f(n,r)},p:e,d(e){e&&h(n)}}}function et(e){let t,n,o,s,i,a,l,c,u=e[3],d=[];for(let t=0;t<u.length;t+=1)d[t]=nt(We(e,u,t));let $=e[3],b=[];for(let t=0;t<$.length;t+=1)b[t]=rt(Ue(e,$,t));return{c(){t=g("dt"),t.textContent="Controller",n=g("dd"),o=g("select");for(let e=0;e<d.length;e+=1)d[e].c();s=v(),i=g("dt"),i.textContent="On value",a=g("dd"),l=g("select");for(let e=0;e<b.length;e+=1)b[e].c();y(t,"class","svelte-6nh3sy"),void 0===e[0].paramA&&L(()=>e[15].call(o)),y(n,"class","svelte-6nh3sy"),y(i,"class","svelte-6nh3sy"),void 0===e[0].paramB&&L(()=>e[16].call(l)),y(a,"class","svelte-6nh3sy")},m(r,u){p(r,t,u),p(r,n,u),f(n,o);for(let e=0;e<d.length;e+=1)d[e].m(o,null);w(o,e[0].paramA),f(n,s),p(r,i,u),p(r,a,u),f(a,l);for(let e=0;e<b.length;e+=1)b[e].m(l,null);w(l,e[0].paramB),c=[E(o,"change",e[15]),E(o,"change",e[6]),E(l,"change",e[16]),E(l,"change",e[6])]},p(e,t){if(8&t[0]){let n;for(u=e[3],n=0;n<u.length;n+=1){const r=We(e,u,n);d[n]?d[n].p(r,t):(d[n]=nt(r),d[n].c(),d[n].m(o,null))}for(;n<d.length;n+=1)d[n].d(1);d.length=u.length}if(1&t[0]&&w(o,e[0].paramA),8&t[0]){let n;for($=e[3],n=0;n<$.length;n+=1){const r=Ue(e,$,n);b[n]?b[n].p(r,t):(b[n]=rt(r),b[n].c(),b[n].m(l,null))}for(;n<b.length;n+=1)b[n].d(1);b.length=$.length}1&t[0]&&w(l,e[0].paramB)},d(e){e&&h(t),e&&h(n),m(d,e),e&&h(i),e&&h(a),m(b,e),r(c)}}}function tt(e){let t,n,o,s,i,a,l,c,u,d,v=e[8](e[0].paramA)+"",b=e[3],_=[];for(let t=0;t<b.length;t+=1)_[t]=ot(Je(e,b,t));let S=e[3],I=[];for(let t=0;t<S.length;t+=1)I[t]=st(ze(e,S,t));return{c(){t=g("dt"),t.textContent="Note number",n=g("dd"),o=g("select");for(let e=0;e<_.length;e+=1)_[e].c();s=$("\n    ("),i=$(v),a=$(")\n  "),l=g("dt"),l.textContent="Velocity",c=g("dd"),u=g("select");for(let e=0;e<I.length;e+=1)I[e].c();y(t,"class","svelte-6nh3sy"),void 0===e[0].paramA&&L(()=>e[13].call(o)),y(n,"class","svelte-6nh3sy"),y(l,"class","svelte-6nh3sy"),void 0===e[0].paramB&&L(()=>e[14].call(u)),y(c,"class","svelte-6nh3sy")},m(r,h){p(r,t,h),p(r,n,h),f(n,o);for(let e=0;e<_.length;e+=1)_[e].m(o,null);w(o,e[0].paramA),f(n,s),f(n,i),f(n,a),p(r,l,h),p(r,c,h),f(c,u);for(let e=0;e<I.length;e+=1)I[e].m(u,null);w(u,e[0].paramB),d=[E(o,"change",e[13]),E(o,"change",e[6]),E(u,"change",e[14]),E(u,"change",e[6])]},p(e,t){if(8&t[0]){let n;for(b=e[3],n=0;n<b.length;n+=1){const r=Je(e,b,n);_[n]?_[n].p(r,t):(_[n]=ot(r),_[n].c(),_[n].m(o,null))}for(;n<_.length;n+=1)_[n].d(1);_.length=b.length}if(1&t[0]&&w(o,e[0].paramA),1&t[0]&&v!==(v=e[8](e[0].paramA)+"")&&M(i,v),8&t[0]){let n;for(S=e[3],n=0;n<S.length;n+=1){const r=ze(e,S,n);I[n]?I[n].p(r,t):(I[n]=st(r),I[n].c(),I[n].m(u,null))}for(;n<I.length;n+=1)I[n].d(1);I.length=S.length}1&t[0]&&w(u,e[0].paramB)},d(e){e&&h(t),e&&h(n),m(_,e),e&&h(l),e&&h(c),m(I,e),r(d)}}}function nt(t){let n,r,o,s=t[17]+"";return{c(){n=g("option"),r=$(s),n.__value=o=t[17],n.value=n.__value},m(e,t){p(e,n,t),f(n,r)},p:e,d(e){e&&h(n)}}}function rt(t){let n,r,o,s=t[17]+"";return{c(){n=g("option"),r=$(s),n.__value=o=t[17],n.value=n.__value},m(e,t){p(e,n,t),f(n,r)},p:e,d(e){e&&h(n)}}}function ot(t){let n,r,o,s=t[17]+"";return{c(){n=g("option"),r=$(s),n.__value=o=t[17],n.value=n.__value},m(e,t){p(e,n,t),f(n,r)},p:e,d(e){e&&h(n)}}}function st(t){let n,r,o,s=t[17]+"";return{c(){n=g("option"),r=$(s),n.__value=o=t[17],n.value=n.__value},m(e,t){p(e,n,t),f(n,r)},p:e,d(e){e&&h(n)}}}function it(t){let n,o,s,i,a,l,c,u,d,b,_,S,I,x=t[7][t[1]]+"",C=t[2],A=[];for(let e=0;e<C.length;e+=1)A[e]=Xe(Qe(t,C,e));let N=t[4],T=[];for(let e=0;e<N.length;e+=1)T[e]=Ze(Ke(t,N,e));function D(e,t){return"1"==e[0].mode?tt:et}let B=D(t),k=B(t);return{c(){n=g("dl"),o=g("dt"),s=$("Button "),i=$(x),a=g("dt"),a.textContent="Channel",l=g("dd"),c=g("select");for(let e=0;e<A.length;e+=1)A[e].c();u=v(),d=g("dt"),d.textContent="Mode",b=g("dd"),_=g("select");for(let e=0;e<T.length;e+=1)T[e].c();S=v(),k.c(),y(o,"class","index svelte-6nh3sy"),y(a,"class","svelte-6nh3sy"),void 0===t[0].channel&&L(()=>t[11].call(c)),y(l,"class","svelte-6nh3sy"),y(d,"class","svelte-6nh3sy"),void 0===t[0].mode&&L(()=>t[12].call(_)),y(b,"class","svelte-6nh3sy"),y(n,"class","config-column svelte-6nh3sy")},m(e,r){p(e,n,r),f(n,o),f(o,s),f(o,i),f(n,a),f(n,l),f(l,c);for(let e=0;e<A.length;e+=1)A[e].m(c,null);w(c,t[0].channel),f(l,u),f(n,d),f(n,b),f(b,_);for(let e=0;e<T.length;e+=1)T[e].m(_,null);w(_,t[0].mode),f(b,S),k.m(n,null),I=[E(c,"change",t[11]),E(c,"change",t[6]),E(_,"change",t[12]),E(_,"change",t[6])]},p(e,t){if(2&t[0]&&x!==(x=e[7][e[1]]+"")&&M(i,x),4&t[0]){let n;for(C=e[2],n=0;n<C.length;n+=1){const r=Qe(e,C,n);A[n]?A[n].p(r,t):(A[n]=Xe(r),A[n].c(),A[n].m(c,null))}for(;n<A.length;n+=1)A[n].d(1);A.length=C.length}if(1&t[0]&&w(c,e[0].channel),48&t[0]){let n;for(N=e[4],n=0;n<N.length;n+=1){const r=Ke(e,N,n);T[n]?T[n].p(r,t):(T[n]=Ze(r),T[n].c(),T[n].m(_,null))}for(;n<T.length;n+=1)T[n].d(1);T.length=N.length}1&t[0]&&w(_,e[0].mode),B===(B=D(e))&&k?k.p(e,t):(k.d(1),k=B(e),k&&(k.c(),k.m(n,null)))},i:e,o:e,d(e){e&&h(n),m(A,e),m(T,e),k.d(),r(I)}}}function at(e,t,n){let r;i(e,me,e=>n(9,r=e));let{index:o}=t,{editControl:s}=t,a=Array.from(Array(16).keys());a.forEach((e,t)=>n(2,a[t]=e+1,a));let l=Array.from(Array(128).keys()),c=Array.from(Array(2).keys());let u=["C","Db","D","Eb","E","F","F#","G","Ab","A","Bb","B"];return e.$set=e=>{"index"in e&&n(1,o=e.index),"editControl"in e&&n(0,s=e.editControl)},[s,o,a,l,c,["CC","Keyboard"],function(){me.update(e=>r)},["A","B","C","D"],function(e){return u[e%12]+(Math.floor(e/12)-1)},r,u,function(){s.channel=x(this),n(0,s),n(2,a)},function(){s.mode=x(this),n(0,s),n(2,a)},function(){s.paramA=x(this),n(0,s),n(2,a)},function(){s.paramB=x(this),n(0,s),n(2,a)},function(){s.paramA=x(this),n(0,s),n(2,a)},function(){s.paramB=x(this),n(0,s),n(2,a)}]}class lt extends se{constructor(e){super(),oe(this,e,at,it,s,{index:1,editControl:0},[-1,-1])}}function ct(e){let t,n,r,o;function s(t){e[3].call(null,t)}let i={$$slots:{default:[ut]},$$scope:{ctx:e}};void 0!==e[0].faderBlink&&(i.checked=e[0].faderBlink);const a=new Ne({props:i});function l(t){e[4].call(null,t)}G.push(()=>Z(a,"checked",s));let c={$$slots:{default:[dt]},$$scope:{ctx:e}};void 0!==e[0].accelBlink&&(c.checked=e[0].accelBlink);const u=new Ne({props:c});return G.push(()=>Z(u,"checked",l)),{c(){ee(a.$$.fragment),n=v(),ee(u.$$.fragment)},m(e,t){te(a,e,t),p(e,n,t),te(u,e,t),o=!0},p(e,n){const o={};2048&n&&(o.$$scope={dirty:n,ctx:e}),!t&&1&n&&(t=!0,o.checked=e[0].faderBlink,q(()=>t=!1)),a.$set(o);const s={};2048&n&&(s.$$scope={dirty:n,ctx:e}),!r&&1&n&&(r=!0,s.checked=e[0].accelBlink,q(()=>r=!1)),u.$set(s)},i(e){o||(Q(a.$$.fragment,e),Q(u.$$.fragment,e),o=!0)},o(e){X(a.$$.fragment,e),X(u.$$.fragment,e),o=!1},d(e){ne(a,e),e&&h(n),ne(u,e)}}}function ut(e){let t;return{c(){t=$("Blink LEDs on fader movements")},m(e,n){p(e,t,n)},d(e){e&&h(t)}}}function dt(e){let t;return{c(){t=$("Blink LEDs on accelerometer movements")},m(e,n){p(e,t,n)},d(e){e&&h(t)}}}function ft(e){let t;return{c(){t=$("Rotate controller 180º")},m(e,n){p(e,t,n)},d(e){e&&h(t)}}}function pt(e){let t;return{c(){t=$("Soft MIDI thru (echo MIDI clock/note data sent to USB out of the minijack)")},m(e,n){p(e,t,n)},d(e){e&&h(t)}}}function ht(e){let t;return{c(){t=$("Midi Type A (Make Noise, Intellijel) [Coming Soon]")},m(e,n){p(e,t,n)},d(e){e&&h(t)}}}function mt(e){let t;return{c(){t=$("Midi Type B (Arturia) [Coming Soon]")},m(e,n){p(e,t,n)},d(e){e&&h(t)}}}function gt(e){let t;function n(e,t){return e[0].midiMode?mt:e[0].midiMode?void 0:ht}let r=n(e),o=r&&r(e);return{c(){o&&o.c(),t=b()},m(e,n){o&&o.m(e,n),p(e,t,n)},p(e,s){r!==(r=n(e))&&(o&&o.d(1),o=r&&r(e),o&&(o.c(),o.m(t.parentNode,t)))},d(e){o&&o.d(e),e&&h(t)}}}function $t(e){let t,n,o,s,i,a,l,c,u,d,m,$,b,_,M,S,I,x;return{c(){t=g("hr"),n=v(),o=g("h3"),o.textContent="I2C Leader/Follower",s=v(),i=g("select"),a=g("option"),a.textContent="Follower",c=g("option"),c.textContent="Leader",d=v(),m=g("p"),m.innerHTML="<strong>Follower</strong> mode is for use with Teletype.",$=v(),b=g("p"),b.innerHTML="<strong>Leader</strong> mode is for use with Ansible, TXo, ER-301. 16n will not respond to Teletype when in leader mode.",_=v(),M=g("p"),M.textContent="This will not take effect until you restart (disconnect/reconnect) your 16n.",S=v(),I=g("p"),I.textContent="(\"Leader\" is sometimes also referred to as 'master' mode)",a.__value=l=!1,a.value=a.__value,c.__value=u=!0,c.value=c.__value,void 0===e[0].i2cMaster&&L(()=>e[10].call(i)),y(m,"class","note svelte-idpdcv"),y(b,"class","note svelte-idpdcv"),y(M,"class","note svelte-idpdcv"),y(I,"class","note small svelte-idpdcv")},m(r,l){p(r,t,l),p(r,n,l),p(r,o,l),p(r,s,l),p(r,i,l),f(i,a),f(i,c),w(i,e[0].i2cMaster),p(r,d,l),p(r,m,l),p(r,$,l),p(r,b,l),p(r,_,l),p(r,M,l),p(r,S,l),p(r,I,l),x=[E(i,"change",e[10]),E(i,"change",e[2])]},p(e,t){1&t&&w(i,e[0].i2cMaster)},d(e){e&&h(t),e&&h(n),e&&h(o),e&&h(s),e&&h(i),e&&h(d),e&&h(m),e&&h($),e&&h(b),e&&h(_),e&&h(M),e&&h(S),e&&h(I),r(x)}}}function vt(e){let t,n,o,s,i,a,l,c,u,d,m,$,_,M,I,w,x,C,A,N,T,D,B,k,R,P,O,H,F=e[1].device().capabilities.led,L=!1,j=!1,V=e[1].device().capabilities.i2c,Y=F&&ct(e);function U(t){e[5].call(null,t)}let W={$$slots:{default:[ft]},$$scope:{ctx:e}};void 0!==e[0].controllerFlip&&(W.checked=e[0].controllerFlip);const z=new Ne({props:W});function re(t){e[6].call(null,t)}G.push(()=>Z(z,"checked",U));let oe={$$slots:{default:[pt]},$$scope:{ctx:e}};void 0!==e[0].midiThru&&(oe.checked=e[0].midiThru);const se=new Ne({props:oe});function ie(t){e[7].call(null,t)}G.push(()=>Z(se,"checked",re));let ae={$$slots:{default:[gt]},$$scope:{ctx:e}};void 0!==e[0].midiMode&&(ae.checked=e[0].midiMode);const le=new Ne({props:ae});function ce(){L=!0,e[8].call(I)}function ue(){j=!0,e[9].call(T)}G.push(()=>Z(le,"checked",ie));let de=V&&$t(e);return{c(){Y&&Y.c(),t=v(),ee(z.$$.fragment),o=v(),ee(se.$$.fragment),i=v(),ee(le.$$.fragment),l=v(),c=g("hr"),u=v(),d=g("h3"),d.textContent="Fader Minimum/Maximum calibration",m=v(),$=g("div"),_=g("label"),_.textContent="Fader Minimum raw value",M=v(),I=g("input"),x=v(),C=g("div"),A=g("label"),A.textContent="Fader Maximum raw value",N=v(),T=g("input"),B=v(),k=g("p"),k.innerHTML="\n  You shouldn&#39;t touch this unless you are having issues with your faders either reaching <code>127</code> before the end of their travel, or not at all.<br><br>\n  &quot;Raw&quot; analog values are read from the faders between 0 and 4096. Bring the fader maximum down until all faders smoothly travel from 0 to 127 on the debug view (bearing in mind there is a small dead zone at either end of a fader).\n",R=v(),de&&de.c(),P=b(),y(_,"class","svelte-idpdcv"),y(I,"type","number"),y(I,"min","0"),y(I,"max",w=8191),y(A,"class","svelte-idpdcv"),y(T,"type","number"),y(T,"min","0"),y(T,"max",D=8191),y(k,"class","note svelte-idpdcv")},m(n,r){Y&&Y.m(n,r),p(n,t,r),te(z,n,r),p(n,o,r),te(se,n,r),p(n,i,r),te(le,n,r),p(n,l,r),p(n,c,r),p(n,u,r),p(n,d,r),p(n,m,r),p(n,$,r),f($,_),f($,M),f($,I),S(I,e[0].fadermin),p(n,x,r),p(n,C,r),f(C,A),f(C,N),f(C,T),S(T,e[0].fadermax),p(n,B,r),p(n,k,r),p(n,R,r),de&&de.m(n,r),p(n,P,r),O=!0,H=[E(I,"input",ce),E(I,"change",e[2]),E(T,"input",ue),E(T,"change",e[2])]},p(e,[r]){2&r&&(F=e[1].device().capabilities.led),F?Y?(Y.p(e,r),Q(Y,1)):(Y=ct(e),Y.c(),Q(Y,1),Y.m(t.parentNode,t)):Y&&(J(),X(Y,1,1,()=>{Y=null}),K());const o={};2048&r&&(o.$$scope={dirty:r,ctx:e}),!n&&1&r&&(n=!0,o.checked=e[0].controllerFlip,q(()=>n=!1)),z.$set(o);const i={};2048&r&&(i.$$scope={dirty:r,ctx:e}),!s&&1&r&&(s=!0,i.checked=e[0].midiThru,q(()=>s=!1)),se.$set(i);const l={};2049&r&&(l.$$scope={dirty:r,ctx:e}),!a&&1&r&&(a=!0,l.checked=e[0].midiMode,q(()=>a=!1)),le.$set(l),!L&&1&r&&S(I,e[0].fadermin),L=!1,!j&&1&r&&S(T,e[0].fadermax),j=!1,2&r&&(V=e[1].device().capabilities.i2c),V?de?de.p(e,r):(de=$t(e),de.c(),de.m(P.parentNode,P)):de&&(de.d(1),de=null)},i(e){O||(Q(Y),Q(z.$$.fragment,e),Q(se.$$.fragment,e),Q(le.$$.fragment,e),O=!0)},o(e){X(Y),X(z.$$.fragment,e),X(se.$$.fragment,e),X(le.$$.fragment,e),O=!1},d(e){Y&&Y.d(e),e&&h(t),ne(z,e),e&&h(o),ne(se,e),e&&h(i),ne(le,e),e&&h(l),e&&h(c),e&&h(u),e&&h(d),e&&h(m),e&&h($),e&&h(x),e&&h(C),e&&h(B),e&&h(k),e&&h(R),de&&de.d(e),e&&h(P),r(H)}}}function bt(e,t,n){let r,o;return i(e,me,e=>n(0,r=e)),i(e,he,e=>n(1,o=e)),[r,o,function(){me.update(e=>r)},function(e){r.faderBlink=e,me.set(r)},function(e){r.accelBlink=e,me.set(r)},function(e){r.controllerFlip=e,me.set(r)},function(e){r.midiThru=e,me.set(r)},function(e){r.midiMode=e,me.set(r)},function(){r.fadermin=_(this.value),me.set(r)},function(){r.fadermax=_(this.value),me.set(r)},function(){r.i2cMaster=x(this),me.set(r)}]}class Et extends se{constructor(e){super(),oe(this,e,bt,vt,s,{})}}function yt(e){let t,n;const r=e[12].default,o=a(r,e,e[11],null);return{c(){t=g("div"),o&&o.c()},m(e,r){p(e,t,r),o&&o.m(t,null),n=!0},p(e,[t]){o&&o.p&&2048&t&&o.p(l(r,e,e[11],null),c(r,e[11],t,null))},i(e){n||(Q(o,e),n=!0)},o(e){X(o,e),n=!1},d(e){e&&h(t),o&&o.d(e)}}}function _t(e,t,n){let r,o,s,a,l;function c(){ie("Setting up heartbeat"),u(),ue.addListener("connected",e=>{ge.set(de.allInputs(ue)),$e.set(de.allOutputs(ue)),ve.update(e=>r),be.update(e=>o),u()}),ue.addListener("disconnected",e=>{ge.set(de.allInputs(ue)),$e.set(de.allOutputs(ue)),ve.update(e=>null),be.update(e=>null),d(he,s=null),u()}),setInterval(()=>{u()},1e3)}function u(){if(!r&&a.length>0){let e=a.find(e=>e.name.match(/.*16n.*/)),t=a.find(e=>e.name.match(/.*Music.*/));e&&ve.update(t=>e),t&&ve.update(e=>t)}if(!o&&l.length>0){let e=l.find(e=>e.name.match(/.*16n.*/)),t=l.find(e=>e.name.match(/.*Music.*/));e&&be.update(t=>e),t&&be.update(e=>t)}r&&o&&(p(r),h(r),ie("Hearbeat requesting config."),m())}function f(e){s&&(s.usbControls.forEach(t=>{t.channel==e.channel&&t.cc==e.controller.number&&(t.val=e.value)}),he.update(e=>s))}function p(e){e.addListener("controlchange","all",e=>{f(e)})}function h(e){e.addListener("sysex","all",e=>{let t=e.data;if(de.isOxionSysex(t)){if(15==t[4]){ie("it's a c0nFig message");let e=[];t.slice(5,t.length-1).forEach(t=>{e.push(t.toString(16).padStart(2,"0"))}),he.update(e=>ae.returnConfigHashFromSysex(t)),ie("Received config",s),document.getElementById("current_config")&&(document.getElementById("current_config").value=e.join(" "))}}else ie("Sysex not for us:",t)}),ie("Attached sysex listener to ",e.name)}function m(){r&&o&&(ie("Requesting config over "+o.name),ie("Hoping to receive on "+r.name),de.requestConfig(o))}i(e,ve,e=>n(0,r=e)),i(e,be,e=>n(1,o=e)),i(e,he,e=>n(2,s=e)),i(e,ge,e=>n(3,a=e)),i(e,$e,e=>n(4,l=e)),ue.enable((function(e){e?ie("WebMidi could not be enabled.",e):(ie("WebMidi enabled!"),Ee.update(e=>!0),c())}),!0),ve.subscribe(e=>{e&&(a.forEach(e=>{e.removeListener()}),p(e),h(e),he.update(e=>null),m())}),be.subscribe(e=>{e&&(he.update(e=>null),m())});let{$$slots:g={},$$scope:$}=t;return e.$set=e=>{"$$scope"in e&&n(11,$=e.$$scope)},[r,o,s,a,l,c,u,f,p,h,m,$,g]}class Mt extends se{constructor(e){super(),oe(this,e,_t,yt,s,{})}}function St(t){let n,r;return{c(){n=g("p"),r=$(t[0])},m(e,t){p(e,n,t),f(n,r)},p(e,t){1&t&&M(r,e[0])},i:e,o:e,d(e){e&&h(n)}}}function It(e){let t;const n=e[3].default,r=a(n,e,e[2],null);return{c(){r&&r.c()},m(e,n){r&&r.m(e,n),t=!0},p(e,t){r&&r.p&&4&t&&r.p(l(n,e,e[2],null),c(n,e[2],t,null))},i(e){t||(Q(r,e),t=!0)},o(e){X(r,e),t=!1},d(e){r&&r.d(e)}}}function wt(e){let t,n,r,o;const s=[It,St],i=[];function a(e,t){return e[1]?0:e[0]?1:-1}return~(t=a(e))&&(n=i[t]=s[t](e)),{c(){n&&n.c(),r=b()},m(e,n){~t&&i[t].m(e,n),p(e,r,n),o=!0},p(e,[o]){let l=t;t=a(e),t===l?~t&&i[t].p(e,o):(n&&(J(),X(i[l],1,1,()=>{i[l]=null}),K()),~t?(n=i[t],n||(n=i[t]=s[t](e),n.c()),Q(n,1),n.m(r.parentNode,r)):n=null)},i(e){o||(Q(n),o=!0)},o(e){X(n),o=!1},d(e){~t&&i[t].d(e),e&&h(r)}}}function xt(e,t,n){let r;i(e,Ee,e=>n(1,r=e));let{fallback:o=null}=t,{$$slots:s={},$$scope:a}=t;return e.$set=e=>{"fallback"in e&&n(0,o=e.fallback),"$$scope"in e&&n(2,a=e.$$scope)},[o,r,a,s]}class Ct extends se{constructor(e){super(),oe(this,e,xt,wt,s,{fallback:0})}}function At(e){let t,n,r,o,s,i;const u=e[2].default,d=a(u,e,e[1],null);return{c(){t=g("div"),n=g("h2"),r=$(e[0]),o=v(),s=g("div"),d&&d.c(),y(n,"class","svelte-1o2kpty"),y(s,"class","details svelte-1o2kpty"),y(t,"class","subhead svelte-1o2kpty")},m(e,a){p(e,t,a),f(t,n),f(n,r),f(t,o),f(t,s),d&&d.m(s,null),i=!0},p(e,[t]){(!i||1&t)&&M(r,e[0]),d&&d.p&&2&t&&d.p(l(u,e,e[1],null),c(u,e[1],t,null))},i(e){i||(Q(d,e),i=!0)},o(e){X(d,e),i=!1},d(e){e&&h(t),d&&d.d(e)}}}function Nt(e,t,n){let{title:r}=t,{$$slots:o={},$$scope:s}=t;return e.$set=e=>{"title"in e&&n(0,r=e.title),"$$scope"in e&&n(1,s=e.$$scope)},[r,s,o]}class Tt extends se{constructor(e){super(),oe(this,e,Nt,At,s,{title:0})}}function Dt(e){let t,n;const r=e[5].default,o=a(r,e,e[4],null);return{c(){t=g("div"),o&&o.c(),y(t,"class","tabs")},m(e,r){p(e,t,r),o&&o.m(t,null),n=!0},p(e,[t]){o&&o.p&&16&t&&o.p(l(r,e,e[4],null),c(r,e[4],t,null))},i(e){n||(Q(o,e),n=!0)},o(e){X(o,e),n=!1},d(e){e&&h(t),o&&o.d(e)}}}const Bt={};function kt(e,t,n){const r=[],o=[],s=pe(null),i=pe(null);var a,l;a=Bt,l={registerTab:e=>{r.push(e),s.update(t=>t||e),D(()=>{const t=r.indexOf(e);r.splice(t,1),s.update(n=>n===e?r[t]||r[r.length-1]:n)})},registerPanel:e=>{o.push(e),i.update(t=>t||e),D(()=>{const t=o.indexOf(e);o.splice(t,1),i.update(n=>n===e?o[t]||o[o.length-1]:n)})},selectTab:e=>{const t=r.indexOf(e);s.set(e),i.set(o[t])},selectedTab:s,selectedPanel:i},T().$$.context.set(a,l);let{$$slots:c={},$$scope:u}=t;return e.$set=e=>{"$$scope"in e&&n(4,u=e.$$scope)},[r,o,s,i,u,c]}class Rt extends se{constructor(e){super(),oe(this,e,kt,Dt,s,{})}}function Gt(e){let t,n;const r=e[1].default,o=a(r,e,e[0],null);return{c(){t=g("div"),o&&o.c(),y(t,"class","tab-list svelte-w6hq5a")},m(e,r){p(e,t,r),o&&o.m(t,null),n=!0},p(e,[t]){o&&o.p&&1&t&&o.p(l(r,e,e[0],null),c(r,e[0],t,null))},i(e){n||(Q(o,e),n=!0)},o(e){X(o,e),n=!1},d(e){e&&h(t),o&&o.d(e)}}}function Pt(e,t,n){let{$$slots:r={},$$scope:o}=t;return e.$set=e=>{"$$scope"in e&&n(0,o=e.$$scope)},[o,r]}class Ot extends se{constructor(e){super(),oe(this,e,Pt,Gt,s,{})}}function Ht(e){let t;const n=e[5].default,r=a(n,e,e[4],null);return{c(){r&&r.c()},m(e,n){r&&r.m(e,n),t=!0},p(e,t){r&&r.p&&16&t&&r.p(l(n,e,e[4],null),c(n,e[4],t,null))},i(e){t||(Q(r,e),t=!0)},o(e){X(r,e),t=!1},d(e){r&&r.d(e)}}}function Ft(e){let t,n,r=e[0]===e[1]&&Ht(e);return{c(){r&&r.c(),t=b()},m(e,o){r&&r.m(e,o),p(e,t,o),n=!0},p(e,[n]){e[0]===e[1]?r?(r.p(e,n),Q(r,1)):(r=Ht(e),r.c(),Q(r,1),r.m(t.parentNode,t)):r&&(J(),X(r,1,1,()=>{r=null}),K())},i(e){n||(Q(r),n=!0)},o(e){X(r),n=!1},d(e){r&&r.d(e),e&&h(t)}}}function Lt(e,t,n){let r;const o={},{registerPanel:s,selectedPanel:a}=k(Bt);i(e,a,e=>n(0,r=e)),s(o);let{$$slots:l={},$$scope:c}=t;return e.$set=e=>{"$$scope"in e&&n(4,c=e.$$scope)},[r,o,a,s,c,l]}class qt extends se{constructor(e){super(),oe(this,e,Lt,Ft,s,{})}}function jt(e){let t,n,r;const o=e[6].default,s=a(o,e,e[5],null);return{c(){t=g("button"),s&&s.c(),y(t,"class","svelte-1y3smnx"),C(t,"selected",e[0]===e[1])},m(o,i){p(o,t,i),s&&s.m(t,null),n=!0,r=E(t,"click",e[7])},p(e,[n]){s&&s.p&&32&n&&s.p(l(o,e,e[5],null),c(o,e[5],n,null)),3&n&&C(t,"selected",e[0]===e[1])},i(e){n||(Q(s,e),n=!0)},o(e){X(s,e),n=!1},d(e){e&&h(t),s&&s.d(e),r()}}}function Vt(e,t,n){let r;const o={},{registerTab:s,selectTab:a,selectedTab:l}=k(Bt);i(e,l,e=>n(0,r=e)),s(o);let{$$slots:c={},$$scope:u}=t;return e.$set=e=>{"$$scope"in e&&n(5,u=e.$$scope)},[r,o,a,l,s,u,c,()=>a(o)]}class Yt extends se{constructor(e){super(),oe(this,e,Vt,jt,s,{})}}function Ut(e,t,n){const r=e.slice();return r[15]=t[n],r[11]=n,r}function Wt(e,t,n){const r=e.slice();return r[15]=t[n],r[11]=n,r}function zt(e,t,n){const r=e.slice();return r[15]=t[n],r[11]=n,r}function Jt(e,t,n){const r=e.slice();return r[15]=t[n],r[11]=n,r}function Kt(e,t,n){const r=e.slice();return r[9]=t[n],r[11]=n,r}function Qt(e,t,n){const r=e.slice();return r[9]=t[n],r[11]=n,r}function Xt(e,t,n){const r=e.slice();return r[9]=t[n],r[11]=n,r}function Zt(e,t,n){const r=e.slice();return r[9]=t[n],r[11]=n,r}function en(t){let n;return{c(){n=g("p"),n.textContent="No device connected.",y(n,"class","device svelte-yq4v00")},m(e,t){p(e,n,t)},p:e,d(e){e&&h(n)}}}function tn(e){let t,n,r,o,s,i,a,l,c=e[3].device().name+"",u=e[3].firmwareVersion+"",d=""!=e[2].trim(),m=d&&nn(e);return{c(){t=g("p"),n=$("Connected: "),r=g("strong"),o=$(c),s=$(" running firmware "),i=g("strong"),a=$(u),l=v(),m&&m.c(),y(t,"class","device svelte-yq4v00")},m(e,c){p(e,t,c),f(t,n),f(t,r),f(r,o),f(t,s),f(t,i),f(i,a),f(t,l),m&&m.m(t,null)},p(e,n){8&n&&c!==(c=e[3].device().name+"")&&M(o,c),8&n&&u!==(u=e[3].firmwareVersion+"")&&M(a,u),4&n&&(d=""!=e[2].trim()),d?m?m.p(e,n):(m=nn(e),m.c(),m.m(t,null)):m&&(m.d(1),m=null)},d(e){e&&h(t),m&&m.d()}}}function nn(e){let t,n,r,o;return{c(){t=g("span"),n=$(e[2]),r=v(),o=g("a"),o.textContent="Download",y(o,"href","https://github.com/TomWhitwell/Smith-Kakehashi/releases"),y(t,"class","upgrade svelte-yq4v00")},m(e,s){p(e,t,s),f(t,n),f(t,r),f(t,o)},p(e,t){4&t&&M(n,e[2])},d(e){e&&h(t)}}}function rn(e){let t;function n(e,t){return e[3]?tn:en}let r=n(e),o=r(e);return{c(){t=g("div"),o.c(),y(t,"class","details svelte-yq4v00")},m(e,n){p(e,t,n),o.m(t,null)},p(e,s){r===(r=n(e))&&o?o.p(e,s):(o.d(1),o=r(e),o&&(o.c(),o.m(t,null)))},d(e){e&&h(t),o.d()}}}function on(t){let n;return{c(){n=g("p"),n.textContent="Connect a controller via USB."},m(e,t){p(e,n,t)},p:e,i:e,o:e,d(e){e&&h(n)}}}function sn(e){let t,n,r,o,s;const i=[ln,an],a=[];function l(e,t){return e[0]?0:1}return t=l(e),n=a[t]=i[t](e),{c(){n.c(),r=v(),o=g("p")},m(e,n){a[t].m(e,n),p(e,r,n),p(e,o,n),s=!0},p(e,o){let s=t;t=l(e),t===s?a[t].p(e,o):(J(),X(a[s],1,1,()=>{a[s]=null}),K(),n=a[t],n||(n=a[t]=i[t](e),n.c()),Q(n,1),n.m(r.parentNode,r))},i(e){s||(Q(n),s=!0)},o(e){X(n),s=!1},d(e){a[t].d(e),e&&h(r),e&&h(o)}}}function an(e){let t,n,r,o,s,i,a,l,c,u,d;const m=new Tt({props:{title:"Page "+(e[3].pageNumber+1)+": Current Configuration",$$slots:{default:[cn]},$$scope:{ctx:e}}}),b=new Rt({props:{$$slots:{default:[xn]},$$scope:{ctx:e}}});function E(e,t){return e[3].faderBlink?An:e[3].faderBlink?void 0:Cn}let y=E(e),_=y&&y(e);function M(e,t){return e[3].accelBlink?Tn:e[3].accelBlink?void 0:Nn}let S=M(e),I=S&&S(e);function w(e,t){return e[3].controllerFlip?Bn:e[3].controllerFlip?void 0:Dn}let x=w(e),C=x&&x(e);function A(e,t){return e[3].midiThru?Rn:e[3].midiThru?void 0:kn}let N=A(e),T=N&&N(e);function D(e,t){return e[3].midiMode?Pn:e[3].midiMode?void 0:Gn}let B=D(e),k=B&&B(e);function R(e,t){return e[3].dxMode?Hn:e[3].dxMode?void 0:On}let G=R(e),P=G&&G(e);return{c(){ee(m.$$.fragment),t=v(),ee(b.$$.fragment),n=v(),r=g("p"),o=$("Fader blink "),_&&_.c(),s=$("\n | \n \n\n \nGesture blink "),I&&I.c(),i=$("\n | \n \n\n \nUsb on "),C&&C.c(),a=$("\n | \n \n \nMidi thru "),T&&T.c(),l=$("\n | \n \n\n \n"),k&&k.c(),c=$(" | \n \n \nDX mode "),P&&P.c(),u=$("\n |")},m(e,h){te(m,e,h),p(e,t,h),te(b,e,h),p(e,n,h),p(e,r,h),f(r,o),_&&_.m(r,null),f(r,s),I&&I.m(r,null),f(r,i),C&&C.m(r,null),f(r,a),T&&T.m(r,null),f(r,l),k&&k.m(r,null),f(r,c),P&&P.m(r,null),f(r,u),d=!0},p(e,t){const n={};8&t&&(n.title="Page "+(e[3].pageNumber+1)+": Current Configuration"),1048576&t&&(n.$$scope={dirty:t,ctx:e}),m.$set(n);const o={};1048584&t&&(o.$$scope={dirty:t,ctx:e}),b.$set(o),y!==(y=E(e))&&(_&&_.d(1),_=y&&y(e),_&&(_.c(),_.m(r,s))),S!==(S=M(e))&&(I&&I.d(1),I=S&&S(e),I&&(I.c(),I.m(r,i))),x!==(x=w(e))&&(C&&C.d(1),C=x&&x(e),C&&(C.c(),C.m(r,a))),N!==(N=A(e))&&(T&&T.d(1),T=N&&N(e),T&&(T.c(),T.m(r,l))),B!==(B=D(e))&&(k&&k.d(1),k=B&&B(e),k&&(k.c(),k.m(r,c))),G!==(G=R(e))&&(P&&P.d(1),P=G&&G(e),P&&(P.c(),P.m(r,u)))},i(e){d||(Q(m.$$.fragment,e),Q(b.$$.fragment,e),d=!0)},o(e){X(m.$$.fragment,e),X(b.$$.fragment,e),d=!1},d(e){ne(m,e),e&&h(t),ne(b,e),e&&h(n),e&&h(r),_&&_.d(),I&&I.d(),C&&C.d(),T&&T.d(),k&&k.d(),P&&P.d()}}}function ln(e){let t,n;const r=new Tt({props:{title:"Page "+(e[3].pageNumber+1)+": Edit configuration",$$slots:{default:[Fn]},$$scope:{ctx:e}}}),o=new Rt({props:{$$slots:{default:[ir]},$$scope:{ctx:e}}});return{c(){ee(r.$$.fragment),t=v(),ee(o.$$.fragment)},m(e,s){te(r,e,s),p(e,t,s),te(o,e,s),n=!0},p(e,t){const n={};8&t&&(n.title="Page "+(e[3].pageNumber+1)+": Edit configuration"),1048578&t&&(n.$$scope={dirty:t,ctx:e}),r.$set(n);const s={};1048600&t&&(s.$$scope={dirty:t,ctx:e}),o.$set(s)},i(e){n||(Q(r.$$.fragment,e),Q(o.$$.fragment,e),n=!0)},o(e){X(r.$$.fragment,e),X(o.$$.fragment,e),n=!1},d(e){ne(r,e),e&&h(t),ne(o,e)}}}function cn(t){let n;const r=new xe({props:{label:"Edit Config",icon:"pencil-alt",clickMessageName:"toggleEditMode"}});return r.$on("message",t[5]),{c(){ee(r.$$.fragment)},m(e,t){te(r,e,t),n=!0},p:e,i(e){n||(Q(r.$$.fragment,e),n=!0)},o(e){X(r.$$.fragment,e),n=!1},d(e){ne(r,e)}}}function un(e){let t;return{c(){t=$("USB")},m(e,n){p(e,t,n)},d(e){e&&h(t)}}}function dn(e){let t;return{c(){t=$("TRS Midi")},m(e,n){p(e,t,n)},d(e){e&&h(t)}}}function fn(e){let t;return{c(){t=$("USB Buttons")},m(e,n){p(e,t,n)},d(e){e&&h(t)}}}function pn(e){let t;return{c(){t=$("TRS Buttons")},m(e,n){p(e,t,n)},d(e){e&&h(t)}}}function hn(e){let t,n,r,o;const s=new Yt({props:{$$slots:{default:[un]},$$scope:{ctx:e}}}),i=new Yt({props:{$$slots:{default:[dn]},$$scope:{ctx:e}}}),a=new Yt({props:{$$slots:{default:[fn]},$$scope:{ctx:e}}}),l=new Yt({props:{$$slots:{default:[pn]},$$scope:{ctx:e}}});return{c(){ee(s.$$.fragment),t=v(),ee(i.$$.fragment),n=v(),ee(a.$$.fragment),r=v(),ee(l.$$.fragment)},m(e,c){te(s,e,c),p(e,t,c),te(i,e,c),p(e,n,c),te(a,e,c),p(e,r,c),te(l,e,c),o=!0},p(e,t){const n={};1048576&t&&(n.$$scope={dirty:t,ctx:e}),s.$set(n);const r={};1048576&t&&(r.$$scope={dirty:t,ctx:e}),i.$set(r);const o={};1048576&t&&(o.$$scope={dirty:t,ctx:e}),a.$set(o);const c={};1048576&t&&(c.$$scope={dirty:t,ctx:e}),l.$set(c)},i(e){o||(Q(s.$$.fragment,e),Q(i.$$.fragment,e),Q(a.$$.fragment,e),Q(l.$$.fragment,e),o=!0)},o(e){X(s.$$.fragment,e),X(i.$$.fragment,e),X(a.$$.fragment,e),X(l.$$.fragment,e),o=!1},d(e){ne(s,e),e&&h(t),ne(i,e),e&&h(n),ne(a,e),e&&h(r),ne(l,e)}}}function mn(e){let t;const n=new Re({props:{control:e[15],index:e[11]}});return{c(){ee(n.$$.fragment)},m(e,r){te(n,e,r),t=!0},p(e,t){const r={};8&t&&(r.control=e[15]),n.$set(r)},i(e){t||(Q(n.$$.fragment,e),t=!0)},o(e){X(n.$$.fragment,e),t=!1},d(e){ne(n,e)}}}function gn(e){let t,n,r=e[11]<e[3].device().controlCount,o=r&&mn(e);return{c(){o&&o.c(),t=b()},m(e,r){o&&o.m(e,r),p(e,t,r),n=!0},p(e,n){8&n&&(r=e[11]<e[3].device().controlCount),r?o?(o.p(e,n),Q(o,1)):(o=mn(e),o.c(),Q(o,1),o.m(t.parentNode,t)):o&&(J(),X(o,1,1,()=>{o=null}),K())},i(e){n||(Q(o),n=!0)},o(e){X(o),n=!1},d(e){o&&o.d(e),e&&h(t)}}}function $n(e){let t,n,r=e[3].usbControls,o=[];for(let t=0;t<r.length;t+=1)o[t]=gn(Jt(e,r,t));const s=e=>X(o[e],1,1,()=>{o[e]=null});return{c(){t=g("div");for(let e=0;e<o.length;e+=1)o[e].c();y(t,"id","controls"),y(t,"class","svelte-yq4v00")},m(e,r){p(e,t,r);for(let e=0;e<o.length;e+=1)o[e].m(t,null);n=!0},p(e,n){if(8&n){let i;for(r=e[3].usbControls,i=0;i<r.length;i+=1){const s=Jt(e,r,i);o[i]?(o[i].p(s,n),Q(o[i],1)):(o[i]=gn(s),o[i].c(),Q(o[i],1),o[i].m(t,null))}for(J(),i=r.length;i<o.length;i+=1)s(i);K()}},i(e){if(!n){for(let e=0;e<r.length;e+=1)Q(o[e]);n=!0}},o(e){o=o.filter(Boolean);for(let e=0;e<o.length;e+=1)X(o[e]);n=!1},d(e){e&&h(t),m(o,e)}}}function vn(e){let t;const n=new Re({props:{control:e[15],index:e[11],disableValue:!0}});return{c(){ee(n.$$.fragment)},m(e,r){te(n,e,r),t=!0},p(e,t){const r={};8&t&&(r.control=e[15]),n.$set(r)},i(e){t||(Q(n.$$.fragment,e),t=!0)},o(e){X(n.$$.fragment,e),t=!1},d(e){ne(n,e)}}}function bn(e){let t,n,r=e[11]<e[3].device().controlCount,o=r&&vn(e);return{c(){o&&o.c(),t=b()},m(e,r){o&&o.m(e,r),p(e,t,r),n=!0},p(e,n){8&n&&(r=e[11]<e[3].device().controlCount),r?o?(o.p(e,n),Q(o,1)):(o=vn(e),o.c(),Q(o,1),o.m(t.parentNode,t)):o&&(J(),X(o,1,1,()=>{o=null}),K())},i(e){n||(Q(o),n=!0)},o(e){X(o),n=!1},d(e){o&&o.d(e),e&&h(t)}}}function En(e){let t,n,r,o,s=e[3].trsControls,i=[];for(let t=0;t<s.length;t+=1)i[t]=bn(zt(e,s,t));const a=e=>X(i[e],1,1,()=>{i[e]=null});return{c(){t=g("div");for(let e=0;e<i.length;e+=1)i[e].c();n=v(),r=g("p"),r.textContent="There is no realtime preview of the TRS outputs.",y(t,"id","controls"),y(t,"class","svelte-yq4v00")},m(e,s){p(e,t,s);for(let e=0;e<i.length;e+=1)i[e].m(t,null);p(e,n,s),p(e,r,s),o=!0},p(e,n){if(8&n){let r;for(s=e[3].trsControls,r=0;r<s.length;r+=1){const o=zt(e,s,r);i[r]?(i[r].p(o,n),Q(i[r],1)):(i[r]=bn(o),i[r].c(),Q(i[r],1),i[r].m(t,null))}for(J(),r=s.length;r<i.length;r+=1)a(r);K()}},i(e){if(!o){for(let e=0;e<s.length;e+=1)Q(i[e]);o=!0}},o(e){i=i.filter(Boolean);for(let e=0;e<i.length;e+=1)X(i[e]);o=!1},d(e){e&&h(t),m(i,e),e&&h(n),e&&h(r)}}}function yn(e){let t;const n=new Ye({props:{control:e[15],index:e[11]}});return{c(){ee(n.$$.fragment)},m(e,r){te(n,e,r),t=!0},p(e,t){const r={};8&t&&(r.control=e[15]),n.$set(r)},i(e){t||(Q(n.$$.fragment,e),t=!0)},o(e){X(n.$$.fragment,e),t=!1},d(e){ne(n,e)}}}function _n(e){let t,n,r=e[11]<e[3].device().buttonCount,o=r&&yn(e);return{c(){o&&o.c(),t=b()},m(e,r){o&&o.m(e,r),p(e,t,r),n=!0},p(e,n){8&n&&(r=e[11]<e[3].device().buttonCount),r?o?(o.p(e,n),Q(o,1)):(o=yn(e),o.c(),Q(o,1),o.m(t.parentNode,t)):o&&(J(),X(o,1,1,()=>{o=null}),K())},i(e){n||(Q(o),n=!0)},o(e){X(o),n=!1},d(e){o&&o.d(e),e&&h(t)}}}function Mn(e){let t,n,r=e[3].usbButtons,o=[];for(let t=0;t<r.length;t+=1)o[t]=_n(Wt(e,r,t));const s=e=>X(o[e],1,1,()=>{o[e]=null});return{c(){t=g("div");for(let e=0;e<o.length;e+=1)o[e].c();y(t,"id","controls"),y(t,"class","svelte-yq4v00")},m(e,r){p(e,t,r);for(let e=0;e<o.length;e+=1)o[e].m(t,null);n=!0},p(e,n){if(8&n){let i;for(r=e[3].usbButtons,i=0;i<r.length;i+=1){const s=Wt(e,r,i);o[i]?(o[i].p(s,n),Q(o[i],1)):(o[i]=_n(s),o[i].c(),Q(o[i],1),o[i].m(t,null))}for(J(),i=r.length;i<o.length;i+=1)s(i);K()}},i(e){if(!n){for(let e=0;e<r.length;e+=1)Q(o[e]);n=!0}},o(e){o=o.filter(Boolean);for(let e=0;e<o.length;e+=1)X(o[e]);n=!1},d(e){e&&h(t),m(o,e)}}}function Sn(e){let t;const n=new Ye({props:{control:e[15],index:e[11]}});return{c(){ee(n.$$.fragment)},m(e,r){te(n,e,r),t=!0},p(e,t){const r={};8&t&&(r.control=e[15]),n.$set(r)},i(e){t||(Q(n.$$.fragment,e),t=!0)},o(e){X(n.$$.fragment,e),t=!1},d(e){ne(n,e)}}}function In(e){let t,n,r=e[11]<e[3].device().buttonCount,o=r&&Sn(e);return{c(){o&&o.c(),t=b()},m(e,r){o&&o.m(e,r),p(e,t,r),n=!0},p(e,n){8&n&&(r=e[11]<e[3].device().buttonCount),r?o?(o.p(e,n),Q(o,1)):(o=Sn(e),o.c(),Q(o,1),o.m(t.parentNode,t)):o&&(J(),X(o,1,1,()=>{o=null}),K())},i(e){n||(Q(o),n=!0)},o(e){X(o),n=!1},d(e){o&&o.d(e),e&&h(t)}}}function wn(e){let t,n,r=e[3].trsButtons,o=[];for(let t=0;t<r.length;t+=1)o[t]=In(Ut(e,r,t));const s=e=>X(o[e],1,1,()=>{o[e]=null});return{c(){t=g("div");for(let e=0;e<o.length;e+=1)o[e].c();y(t,"id","controls"),y(t,"class","svelte-yq4v00")},m(e,r){p(e,t,r);for(let e=0;e<o.length;e+=1)o[e].m(t,null);n=!0},p(e,n){if(8&n){let i;for(r=e[3].trsButtons,i=0;i<r.length;i+=1){const s=Ut(e,r,i);o[i]?(o[i].p(s,n),Q(o[i],1)):(o[i]=In(s),o[i].c(),Q(o[i],1),o[i].m(t,null))}for(J(),i=r.length;i<o.length;i+=1)s(i);K()}},i(e){if(!n){for(let e=0;e<r.length;e+=1)Q(o[e]);n=!0}},o(e){o=o.filter(Boolean);for(let e=0;e<o.length;e+=1)X(o[e]);n=!1},d(e){e&&h(t),m(o,e)}}}function xn(e){let t,n,r,o,s;const i=new Ot({props:{$$slots:{default:[hn]},$$scope:{ctx:e}}}),a=new qt({props:{$$slots:{default:[$n]},$$scope:{ctx:e}}}),l=new qt({props:{$$slots:{default:[En]},$$scope:{ctx:e}}}),c=new qt({props:{$$slots:{default:[Mn]},$$scope:{ctx:e}}}),u=new qt({props:{$$slots:{default:[wn]},$$scope:{ctx:e}}});return{c(){ee(i.$$.fragment),t=v(),ee(a.$$.fragment),n=v(),ee(l.$$.fragment),r=v(),ee(c.$$.fragment),o=v(),ee(u.$$.fragment)},m(e,d){te(i,e,d),p(e,t,d),te(a,e,d),p(e,n,d),te(l,e,d),p(e,r,d),te(c,e,d),p(e,o,d),te(u,e,d),s=!0},p(e,t){const n={};1048576&t&&(n.$$scope={dirty:t,ctx:e}),i.$set(n);const r={};1048584&t&&(r.$$scope={dirty:t,ctx:e}),a.$set(r);const o={};1048584&t&&(o.$$scope={dirty:t,ctx:e}),l.$set(o);const s={};1048584&t&&(s.$$scope={dirty:t,ctx:e}),c.$set(s);const d={};1048584&t&&(d.$$scope={dirty:t,ctx:e}),u.$set(d)},i(e){s||(Q(i.$$.fragment,e),Q(a.$$.fragment,e),Q(l.$$.fragment,e),Q(c.$$.fragment,e),Q(u.$$.fragment,e),s=!0)},o(e){X(i.$$.fragment,e),X(a.$$.fragment,e),X(l.$$.fragment,e),X(c.$$.fragment,e),X(u.$$.fragment,e),s=!1},d(e){ne(i,e),e&&h(t),ne(a,e),e&&h(n),ne(l,e),e&&h(r),ne(c,e),e&&h(o),ne(u,e)}}}function Cn(e){let t;return{c(){t=$("off")},m(e,n){p(e,t,n)},d(e){e&&h(t)}}}function An(e){let t;return{c(){t=$("on")},m(e,n){p(e,t,n)},d(e){e&&h(t)}}}function Nn(e){let t;return{c(){t=$("off")},m(e,n){p(e,t,n)},d(e){e&&h(t)}}}function Tn(e){let t;return{c(){t=$("on")},m(e,n){p(e,t,n)},d(e){e&&h(t)}}}function Dn(e){let t;return{c(){t=$("right")},m(e,n){p(e,t,n)},d(e){e&&h(t)}}}function Bn(e){let t;return{c(){t=$("left")},m(e,n){p(e,t,n)},d(e){e&&h(t)}}}function kn(e){let t;return{c(){t=$("off")},m(e,n){p(e,t,n)},d(e){e&&h(t)}}}function Rn(e){let t;return{c(){t=$("on")},m(e,n){p(e,t,n)},d(e){e&&h(t)}}}function Gn(e){let t;return{c(){t=$("Midi Type A")},m(e,n){p(e,t,n)},d(e){e&&h(t)}}}function Pn(e){let t;return{c(){t=$("Midi Type B")},m(e,n){p(e,t,n)},d(e){e&&h(t)}}}function On(e){let t;return{c(){t=$("off")},m(e,n){p(e,t,n)},d(e){e&&h(t)}}}function Hn(e){let t;return{c(){t=$("on")},m(e,n){p(e,t,n)},d(e){e&&h(t)}}}function Fn(e){let t,n;const r=new xe({props:{label:"Cancel",icon:"times",clickMessageName:"toggleEditMode"}});r.$on("message",e[5]);const o=new xe({props:{label:"Update controller",icon:"download",clickMessageName:"transmitConfig",disabled:!e[1]}});return o.$on("message",e[5]),{c(){ee(r.$$.fragment),t=v(),ee(o.$$.fragment)},m(e,s){te(r,e,s),p(e,t,s),te(o,e,s),n=!0},p(e,t){const n={};2&t&&(n.disabled=!e[1]),o.$set(n)},i(e){n||(Q(r.$$.fragment,e),Q(o.$$.fragment,e),n=!0)},o(e){X(r.$$.fragment,e),X(o.$$.fragment,e),n=!1},d(e){ne(r,e),e&&h(t),ne(o,e)}}}function Ln(e){let t;return{c(){t=$("USB")},m(e,n){p(e,t,n)},d(e){e&&h(t)}}}function qn(e){let t;return{c(){t=$("TRS Midi")},m(e,n){p(e,t,n)},d(e){e&&h(t)}}}function jn(e){let t;return{c(){t=$("USB Buttons")},m(e,n){p(e,t,n)},d(e){e&&h(t)}}}function Vn(e){let t;return{c(){t=$("TRS Buttons")},m(e,n){p(e,t,n)},d(e){e&&h(t)}}}function Yn(e){let t;return{c(){t=$("Device Options")},m(e,n){p(e,t,n)},d(e){e&&h(t)}}}function Un(e){let t,n,r,o,s;const i=new Yt({props:{$$slots:{default:[Ln]},$$scope:{ctx:e}}}),a=new Yt({props:{$$slots:{default:[qn]},$$scope:{ctx:e}}}),l=new Yt({props:{$$slots:{default:[jn]},$$scope:{ctx:e}}}),c=new Yt({props:{$$slots:{default:[Vn]},$$scope:{ctx:e}}}),u=new Yt({props:{$$slots:{default:[Yn]},$$scope:{ctx:e}}});return{c(){ee(i.$$.fragment),t=v(),ee(a.$$.fragment),n=v(),ee(l.$$.fragment),r=v(),ee(c.$$.fragment),o=v(),ee(u.$$.fragment)},m(e,d){te(i,e,d),p(e,t,d),te(a,e,d),p(e,n,d),te(l,e,d),p(e,r,d),te(c,e,d),p(e,o,d),te(u,e,d),s=!0},p(e,t){const n={};1048576&t&&(n.$$scope={dirty:t,ctx:e}),i.$set(n);const r={};1048576&t&&(r.$$scope={dirty:t,ctx:e}),a.$set(r);const o={};1048576&t&&(o.$$scope={dirty:t,ctx:e}),l.$set(o);const s={};1048576&t&&(s.$$scope={dirty:t,ctx:e}),c.$set(s);const d={};1048576&t&&(d.$$scope={dirty:t,ctx:e}),u.$set(d)},i(e){s||(Q(i.$$.fragment,e),Q(a.$$.fragment,e),Q(l.$$.fragment,e),Q(c.$$.fragment,e),Q(u.$$.fragment,e),s=!0)},o(e){X(i.$$.fragment,e),X(a.$$.fragment,e),X(l.$$.fragment,e),X(c.$$.fragment,e),X(u.$$.fragment,e),s=!1},d(e){ne(i,e),e&&h(t),ne(a,e),e&&h(n),ne(l,e),e&&h(r),ne(c,e),e&&h(o),ne(u,e)}}}function Wn(e){let t;const n=new Fe({props:{editControl:e[9],index:e[11]}});return{c(){ee(n.$$.fragment)},m(e,r){te(n,e,r),t=!0},p(e,t){const r={};16&t&&(r.editControl=e[9]),n.$set(r)},i(e){t||(Q(n.$$.fragment,e),t=!0)},o(e){X(n.$$.fragment,e),t=!1},d(e){ne(n,e)}}}function zn(e){let t,n,r=e[11]<e[3].device().controlCount,o=r&&Wn(e);return{c(){o&&o.c(),t=b()},m(e,r){o&&o.m(e,r),p(e,t,r),n=!0},p(e,n){8&n&&(r=e[11]<e[3].device().controlCount),r?o?(o.p(e,n),Q(o,1)):(o=Wn(e),o.c(),Q(o,1),o.m(t.parentNode,t)):o&&(J(),X(o,1,1,()=>{o=null}),K())},i(e){n||(Q(o),n=!0)},o(e){X(o),n=!1},d(e){o&&o.d(e),e&&h(t)}}}function Jn(e){let t,n,r=e[4].usbControls,o=[];for(let t=0;t<r.length;t+=1)o[t]=zn(Zt(e,r,t));const s=e=>X(o[e],1,1,()=>{o[e]=null});return{c(){t=g("div");for(let e=0;e<o.length;e+=1)o[e].c();y(t,"id","controls"),y(t,"class","svelte-yq4v00")},m(e,r){p(e,t,r);for(let e=0;e<o.length;e+=1)o[e].m(t,null);n=!0},p(e,n){if(24&n){let i;for(r=e[4].usbControls,i=0;i<r.length;i+=1){const s=Zt(e,r,i);o[i]?(o[i].p(s,n),Q(o[i],1)):(o[i]=zn(s),o[i].c(),Q(o[i],1),o[i].m(t,null))}for(J(),i=r.length;i<o.length;i+=1)s(i);K()}},i(e){if(!n){for(let e=0;e<r.length;e+=1)Q(o[e]);n=!0}},o(e){o=o.filter(Boolean);for(let e=0;e<o.length;e+=1)X(o[e]);n=!1},d(e){e&&h(t),m(o,e)}}}function Kn(e){let t;const n=new Fe({props:{editControl:e[9],index:e[11]}});return{c(){ee(n.$$.fragment)},m(e,r){te(n,e,r),t=!0},p(e,t){const r={};16&t&&(r.editControl=e[9]),n.$set(r)},i(e){t||(Q(n.$$.fragment,e),t=!0)},o(e){X(n.$$.fragment,e),t=!1},d(e){ne(n,e)}}}function Qn(e){let t,n,r=e[11]<e[3].device().controlCount,o=r&&Kn(e);return{c(){o&&o.c(),t=b()},m(e,r){o&&o.m(e,r),p(e,t,r),n=!0},p(e,n){8&n&&(r=e[11]<e[3].device().controlCount),r?o?(o.p(e,n),Q(o,1)):(o=Kn(e),o.c(),Q(o,1),o.m(t.parentNode,t)):o&&(J(),X(o,1,1,()=>{o=null}),K())},i(e){n||(Q(o),n=!0)},o(e){X(o),n=!1},d(e){o&&o.d(e),e&&h(t)}}}function Xn(e){let t,n,r=e[4].trsControls,o=[];for(let t=0;t<r.length;t+=1)o[t]=Qn(Xt(e,r,t));const s=e=>X(o[e],1,1,()=>{o[e]=null});return{c(){t=g("div");for(let e=0;e<o.length;e+=1)o[e].c();y(t,"id","controls"),y(t,"class","svelte-yq4v00")},m(e,r){p(e,t,r);for(let e=0;e<o.length;e+=1)o[e].m(t,null);n=!0},p(e,n){if(24&n){let i;for(r=e[4].trsControls,i=0;i<r.length;i+=1){const s=Xt(e,r,i);o[i]?(o[i].p(s,n),Q(o[i],1)):(o[i]=Qn(s),o[i].c(),Q(o[i],1),o[i].m(t,null))}for(J(),i=r.length;i<o.length;i+=1)s(i);K()}},i(e){if(!n){for(let e=0;e<r.length;e+=1)Q(o[e]);n=!0}},o(e){o=o.filter(Boolean);for(let e=0;e<o.length;e+=1)X(o[e]);n=!1},d(e){e&&h(t),m(o,e)}}}function Zn(e){let t;const n=new lt({props:{editControl:e[9],index:e[11]}});return{c(){ee(n.$$.fragment)},m(e,r){te(n,e,r),t=!0},p(e,t){const r={};16&t&&(r.editControl=e[9]),n.$set(r)},i(e){t||(Q(n.$$.fragment,e),t=!0)},o(e){X(n.$$.fragment,e),t=!1},d(e){ne(n,e)}}}function er(e){let t,n,r=e[11]<e[3].device().buttonCount,o=r&&Zn(e);return{c(){o&&o.c(),t=b()},m(e,r){o&&o.m(e,r),p(e,t,r),n=!0},p(e,n){8&n&&(r=e[11]<e[3].device().buttonCount),r?o?(o.p(e,n),Q(o,1)):(o=Zn(e),o.c(),Q(o,1),o.m(t.parentNode,t)):o&&(J(),X(o,1,1,()=>{o=null}),K())},i(e){n||(Q(o),n=!0)},o(e){X(o),n=!1},d(e){o&&o.d(e),e&&h(t)}}}function tr(e){let t,n,r=e[4].usbButtons,o=[];for(let t=0;t<r.length;t+=1)o[t]=er(Qt(e,r,t));const s=e=>X(o[e],1,1,()=>{o[e]=null});return{c(){t=g("div");for(let e=0;e<o.length;e+=1)o[e].c();y(t,"id","controls"),y(t,"class","svelte-yq4v00")},m(e,r){p(e,t,r);for(let e=0;e<o.length;e+=1)o[e].m(t,null);n=!0},p(e,n){if(24&n){let i;for(r=e[4].usbButtons,i=0;i<r.length;i+=1){const s=Qt(e,r,i);o[i]?(o[i].p(s,n),Q(o[i],1)):(o[i]=er(s),o[i].c(),Q(o[i],1),o[i].m(t,null))}for(J(),i=r.length;i<o.length;i+=1)s(i);K()}},i(e){if(!n){for(let e=0;e<r.length;e+=1)Q(o[e]);n=!0}},o(e){o=o.filter(Boolean);for(let e=0;e<o.length;e+=1)X(o[e]);n=!1},d(e){e&&h(t),m(o,e)}}}function nr(e){let t;const n=new lt({props:{editControl:e[9],index:e[11]}});return{c(){ee(n.$$.fragment)},m(e,r){te(n,e,r),t=!0},p(e,t){const r={};16&t&&(r.editControl=e[9]),n.$set(r)},i(e){t||(Q(n.$$.fragment,e),t=!0)},o(e){X(n.$$.fragment,e),t=!1},d(e){ne(n,e)}}}function rr(e){let t,n,r=e[11]<e[3].device().buttonCount,o=r&&nr(e);return{c(){o&&o.c(),t=b()},m(e,r){o&&o.m(e,r),p(e,t,r),n=!0},p(e,n){8&n&&(r=e[11]<e[3].device().buttonCount),r?o?(o.p(e,n),Q(o,1)):(o=nr(e),o.c(),Q(o,1),o.m(t.parentNode,t)):o&&(J(),X(o,1,1,()=>{o=null}),K())},i(e){n||(Q(o),n=!0)},o(e){X(o),n=!1},d(e){o&&o.d(e),e&&h(t)}}}function or(e){let t,n,r=e[4].trsButtons,o=[];for(let t=0;t<r.length;t+=1)o[t]=rr(Kt(e,r,t));const s=e=>X(o[e],1,1,()=>{o[e]=null});return{c(){t=g("div");for(let e=0;e<o.length;e+=1)o[e].c();y(t,"id","controls"),y(t,"class","svelte-yq4v00")},m(e,r){p(e,t,r);for(let e=0;e<o.length;e+=1)o[e].m(t,null);n=!0},p(e,n){if(24&n){let i;for(r=e[4].trsButtons,i=0;i<r.length;i+=1){const s=Kt(e,r,i);o[i]?(o[i].p(s,n),Q(o[i],1)):(o[i]=rr(s),o[i].c(),Q(o[i],1),o[i].m(t,null))}for(J(),i=r.length;i<o.length;i+=1)s(i);K()}},i(e){if(!n){for(let e=0;e<r.length;e+=1)Q(o[e]);n=!0}},o(e){o=o.filter(Boolean);for(let e=0;e<o.length;e+=1)X(o[e]);n=!1},d(e){e&&h(t),m(o,e)}}}function sr(e){let t;const n=new Et({});return{c(){ee(n.$$.fragment)},m(e,r){te(n,e,r),t=!0},i(e){t||(Q(n.$$.fragment,e),t=!0)},o(e){X(n.$$.fragment,e),t=!1},d(e){ne(n,e)}}}function ir(e){let t,n,r,o,s,i;const a=new Ot({props:{$$slots:{default:[Un]},$$scope:{ctx:e}}}),l=new qt({props:{$$slots:{default:[Jn]},$$scope:{ctx:e}}}),c=new qt({props:{$$slots:{default:[Xn]},$$scope:{ctx:e}}}),u=new qt({props:{$$slots:{default:[tr]},$$scope:{ctx:e}}}),d=new qt({props:{$$slots:{default:[or]},$$scope:{ctx:e}}}),f=new qt({props:{$$slots:{default:[sr]},$$scope:{ctx:e}}});return{c(){ee(a.$$.fragment),t=v(),ee(l.$$.fragment),n=v(),ee(c.$$.fragment),r=v(),ee(u.$$.fragment),o=v(),ee(d.$$.fragment),s=v(),ee(f.$$.fragment)},m(e,h){te(a,e,h),p(e,t,h),te(l,e,h),p(e,n,h),te(c,e,h),p(e,r,h),te(u,e,h),p(e,o,h),te(d,e,h),p(e,s,h),te(f,e,h),i=!0},p(e,t){const n={};1048576&t&&(n.$$scope={dirty:t,ctx:e}),a.$set(n);const r={};1048600&t&&(r.$$scope={dirty:t,ctx:e}),l.$set(r);const o={};1048600&t&&(o.$$scope={dirty:t,ctx:e}),c.$set(o);const s={};1048600&t&&(s.$$scope={dirty:t,ctx:e}),u.$set(s);const i={};1048600&t&&(i.$$scope={dirty:t,ctx:e}),d.$set(i);const p={};1048576&t&&(p.$$scope={dirty:t,ctx:e}),f.$set(p)},i(e){i||(Q(a.$$.fragment,e),Q(l.$$.fragment,e),Q(c.$$.fragment,e),Q(u.$$.fragment,e),Q(d.$$.fragment,e),Q(f.$$.fragment,e),i=!0)},o(e){X(a.$$.fragment,e),X(l.$$.fragment,e),X(c.$$.fragment,e),X(u.$$.fragment,e),X(d.$$.fragment,e),X(f.$$.fragment,e),i=!1},d(e){ne(a,e),e&&h(t),ne(l,e),e&&h(n),ne(c,e),e&&h(r),ne(u,e),e&&h(o),ne(d,e),e&&h(s),ne(f,e)}}}function ar(e){let t,n,r,o;const s=[sn,on],i=[];function a(e,t){return e[3]?0:1}return t=a(e),n=i[t]=s[t](e),{c(){n.c(),r=b()},m(e,n){i[t].m(e,n),p(e,r,n),o=!0},p(e,o){let l=t;t=a(e),t===l?i[t].p(e,o):(J(),X(i[l],1,1,()=>{i[l]=null}),K(),n=i[t],n||(n=i[t]=s[t](e),n.c()),Q(n,1),n.m(r.parentNode,r))},i(e){o||(Q(n),o=!0)},o(e){X(n),o=!1},d(e){i[t].d(e),e&&h(r)}}}function lr(e){let t,n,r,o,s,i,a,l;const c=new Ct({props:{$$slots:{default:[rn]},$$scope:{ctx:e}}}),u=new Ct({props:{fallback:"WebMIDI could not be enabled. Please use a web browser that supports WebMIDI, such as Google Chrome.",$$slots:{default:[ar]},$$scope:{ctx:e}}});return{c(){t=g("main"),n=g("div"),r=g("h1"),r.textContent="8mu Controller Editor",o=v(),ee(c.$$.fragment),s=v(),ee(u.$$.fragment),i=v(),a=g("div"),a.textContent="8mu Editor v0.1.3",y(r,"class","svelte-yq4v00"),y(n,"id","head"),y(n,"class","svelte-yq4v00"),y(a,"id","foot"),y(a,"class","svelte-yq4v00"),y(t,"class","svelte-yq4v00")},m(e,d){p(e,t,d),f(t,n),f(n,r),f(n,o),te(c,n,null),f(t,s),te(u,t,null),f(t,i),f(t,a),l=!0},p(e,t){const n={};1048588&t&&(n.$$scope={dirty:t,ctx:e}),c.$set(n);const r={};1048603&t&&(r.$$scope={dirty:t,ctx:e}),u.$set(r)},i(e){l||(Q(c.$$.fragment,e),Q(u.$$.fragment,e),l=!0)},o(e){X(c.$$.fragment,e),X(u.$$.fragment,e),l=!1},d(e){e&&h(t),ne(c),ne(u)}}}function cr(e){let t;const n=new Mt({props:{$$slots:{default:[lr]},$$scope:{ctx:e}}});return{c(){ee(n.$$.fragment)},m(e,r){te(n,e,r),t=!0},p(e,[t]){const r={};1048607&t&&(r.$$scope={dirty:t,ctx:e}),n.$set(r)},i(e){t||(Q(n.$$.fragment,e),t=!0)},o(e){X(n.$$.fragment,e),t=!1},d(e){ne(n,e)}}}function ur(e,t,n){let r,o,s;i(e,he,e=>n(3,r=e)),i(e,be,e=>n(6,o=e)),i(e,me,e=>n(4,s=e)),window.debugMode=!0;let a=!1,l=!1,c="";return me.subscribe(e=>{e&&r&&n(1,l=!e.isEquivalent(r))}),he.subscribe(e=>{if(e&&e.firmwareVersion&&window.latestVersion&&!window.versionCompared){let t=function(e,t){for(var n=e.split("."),r=t.split("."),o=0;o<3;o++){var s=Number(n[o]),i=Number(r[o]);if(s>i)return 1;if(i>s)return-1;if(!isNaN(s)&&isNaN(i))return 1;if(isNaN(s)&&!isNaN(i))return-1}return 0}(window.latestVersion,e.firmwareVersion);window.versionCompared=!0,n(2,c=t>0?`A new version of 8mu firmware (${window.latestVersion}) is available.`:"")}}),fetch("https://api.github.com/repos/TomWhitwell/Smith-Kakehashi/releases").then(e=>e.json()).then(e=>{window.latestVersion=e[0].tag_name.replace(/[a-zA-z]/g,"")}),[a,l,c,r,s,function(e){switch(e.detail.name){case"toggleEditMode":!function(){if(n(0,a=!a),a){let e=ae.clone(r);me.update(t=>e)}}();break;case"transmitConfig":ie("Sending sysex:",s.toSysexArray()),de.sendConfiguration(s,o),d(he,r=s),n(0,a=!a);break;case"requestConfig":de.requestConfig(o);break;case"importConfig":le.import(s,r,me);break;case"exportConfig":le.export(r)}}]}return new class extends se{constructor(e){super(),oe(this,e,ur,cr,s,{})}}({target:document.body,props:{}})}();
//# sourceMappingURL=bundle.js.map
