import{K as Ne,S as pe,i as _e,s as Ee,e as se,b as N,I as ae,h,J as me,L as Tt,k as A,l as C,m as D,n as U,q as O,r as k,H as b,a as K,c as J,u as fe,M as oe,g as y,v as ie,d as P,f as le,y as Z,z as Q,A as x,B as ee,N as jr,C as Ye,E as Xe,F as We,G as Ke,w as et,O as tt,P as nt,Q as Le,R as be,T as Je,U as qe,V as Oe,W as Ge,p as ke,X as ge,Y as qr,Z as wr,_ as zt,$ as rt,a0 as Yt,o as zr,a1 as Yr}from"../chunks/index.bd603792.js";import{w as Re}from"../chunks/index.10e3ed9b.js";class Se{constructor(e=!1){this.eventMap={},this.eventsSuspended=e==!0}addListener(e,t,n={}){if(typeof e=="string"&&e.length<1||e instanceof String&&e.length<1||typeof e!="string"&&!(e instanceof String)&&e!==Se.ANY_EVENT)throw new TypeError("The 'event' parameter must be a string or EventEmitter.ANY_EVENT.");if(typeof t!="function")throw new TypeError("The callback must be a function.");const r=new Xt(e,this,t,n);return this.eventMap[e]||(this.eventMap[e]=[]),n.prepend?this.eventMap[e].unshift(r):this.eventMap[e].push(r),r}addOneTimeListener(e,t,n={}){n.remaining=1,this.addListener(e,t,n)}static get ANY_EVENT(){return Symbol.for("Any event")}hasListener(e,t){return e===void 0?this.eventMap[Se.ANY_EVENT]&&this.eventMap[Se.ANY_EVENT].length>0?!0:Object.entries(this.eventMap).some(([,n])=>n.length>0):this.eventMap[e]&&this.eventMap[e].length>0?t instanceof Xt?this.eventMap[e].filter(r=>r===t).length>0:typeof t=="function"?this.eventMap[e].filter(r=>r.callback===t).length>0:t==null:!1}get eventNames(){return Object.keys(this.eventMap)}getListeners(e){return this.eventMap[e]||[]}suspendEvent(e){this.getListeners(e).forEach(t=>{t.suspended=!0})}unsuspendEvent(e){this.getListeners(e).forEach(t=>{t.suspended=!1})}getListenerCount(e){return this.getListeners(e).length}emit(e,...t){if(typeof e!="string"&&!(e instanceof String))throw new TypeError("The 'event' parameter must be a string.");if(this.eventsSuspended)return;let n=[],r=this.eventMap[Se.ANY_EVENT]||[];return this.eventMap[e]&&(r=r.concat(this.eventMap[e])),r.forEach(s=>{if(s.suspended)return;let l=[...t];Array.isArray(s.arguments)&&(l=l.concat(s.arguments)),s.remaining>0&&(n.push(s.callback.apply(s.context,l)),s.count++),--s.remaining<1&&s.remove()}),n}removeListener(e,t,n={}){if(e===void 0){this.eventMap={};return}else if(!this.eventMap[e])return;let r=this.eventMap[e].filter(s=>t&&s.callback!==t||n.remaining&&n.remaining!==s.remaining||n.context&&n.context!==s.context);r.length?this.eventMap[e]=r:delete this.eventMap[e]}async waitFor(e,t={}){return t.duration=parseInt(t.duration),(isNaN(t.duration)||t.duration<=0)&&(t.duration=1/0),new Promise((n,r)=>{let s,l=this.addListener(e,()=>{clearTimeout(s),n()},{remaining:1});t.duration!==1/0&&(s=setTimeout(()=>{l.remove(),r("The duration expired before the event was emitted.")},t.duration))})}get eventCount(){return Object.keys(this.eventMap).length}}class Xt{constructor(e,t,n,r={}){if(typeof e!="string"&&!(e instanceof String)&&e!==Se.ANY_EVENT)throw new TypeError("The 'event' parameter must be a string or EventEmitter.ANY_EVENT.");if(!t)throw new ReferenceError("The 'target' parameter is mandatory.");if(typeof n!="function")throw new TypeError("The 'callback' must be a function.");r.arguments!==void 0&&!Array.isArray(r.arguments)&&(r.arguments=[r.arguments]),r=Object.assign({context:t,remaining:1/0,arguments:void 0,duration:1/0},r),r.duration!==1/0&&setTimeout(()=>this.remove(),r.duration),this.arguments=r.arguments,this.callback=n,this.context=r.context,this.count=0,this.event=e,this.remaining=parseInt(r.remaining)>=1?parseInt(r.remaining):1/0,this.suspended=!1,this.target=t}remove(){this.target.removeListener(this.event,this.callback,{context:this.context,remaining:this.remaining})}}/**
 * The `Enumerations` class contains enumerations and arrays of elements used throughout the
 * library. All its properties are static and should be referenced using the class name. For
 * example: `Enumerations.CHANNEL_MESSAGES`.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class L{static get MIDI_CHANNEL_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MESSAGES enum has been deprecated. Use the Enumerations.CHANNEL_MESSAGES enum instead."),L.CHANNEL_MESSAGES}static get CHANNEL_MESSAGES(){return{noteoff:8,noteon:9,keyaftertouch:10,controlchange:11,programchange:12,channelaftertouch:13,pitchbend:14}}static get CHANNEL_NUMBERS(){return[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]}static get MIDI_CHANNEL_NUMBERS(){return this.validation&&console.warn("The MIDI_CHANNEL_NUMBERS array has been deprecated. Use the Enumerations.CHANNEL_NUMBERS array instead."),[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]}static get CHANNEL_MODE_MESSAGES(){return{allsoundoff:120,resetallcontrollers:121,localcontrol:122,allnotesoff:123,omnimodeoff:124,omnimodeon:125,monomodeon:126,polymodeon:127}}static get MIDI_CHANNEL_MODE_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MODE_MESSAGES enum has been deprecated. Use the Enumerations.CHANNEL_MODE_MESSAGES enum instead."),L.CHANNEL_MODE_MESSAGES}static get MIDI_CONTROL_CHANGE_MESSAGES(){return this.validation&&console.warn("The MIDI_CONTROL_CHANGE_MESSAGES enum has been deprecated. Use the Enumerations.CONTROL_CHANGE_MESSAGES array instead."),{bankselectcoarse:0,modulationwheelcoarse:1,breathcontrollercoarse:2,controller3:3,footcontrollercoarse:4,portamentotimecoarse:5,dataentrycoarse:6,volumecoarse:7,balancecoarse:8,controller9:9,pancoarse:10,expressioncoarse:11,effectcontrol1coarse:12,effectcontrol2coarse:13,controller14:14,controller15:15,generalpurposeslider1:16,generalpurposeslider2:17,generalpurposeslider3:18,generalpurposeslider4:19,controller20:20,controller21:21,controller22:22,controller23:23,controller24:24,controller25:25,controller26:26,controller27:27,controller28:28,controller29:29,controller30:30,controller31:31,bankselectfine:32,modulationwheelfine:33,breathcontrollerfine:34,controller35:35,footcontrollerfine:36,portamentotimefine:37,dataentryfine:38,volumefine:39,balancefine:40,controller41:41,panfine:42,expressionfine:43,effectcontrol1fine:44,effectcontrol2fine:45,controller46:46,controller47:47,controller48:48,controller49:49,controller50:50,controller51:51,controller52:52,controller53:53,controller54:54,controller55:55,controller56:56,controller57:57,controller58:58,controller59:59,controller60:60,controller61:61,controller62:62,controller63:63,holdpedal:64,portamento:65,sustenutopedal:66,softpedal:67,legatopedal:68,hold2pedal:69,soundvariation:70,resonance:71,soundreleasetime:72,soundattacktime:73,brightness:74,soundcontrol6:75,soundcontrol7:76,soundcontrol8:77,soundcontrol9:78,soundcontrol10:79,generalpurposebutton1:80,generalpurposebutton2:81,generalpurposebutton3:82,generalpurposebutton4:83,controller84:84,controller85:85,controller86:86,controller87:87,controller88:88,controller89:89,controller90:90,reverblevel:91,tremololevel:92,choruslevel:93,celestelevel:94,phaserlevel:95,databuttonincrement:96,databuttondecrement:97,nonregisteredparametercoarse:98,nonregisteredparameterfine:99,registeredparametercoarse:100,registeredparameterfine:101,controller102:102,controller103:103,controller104:104,controller105:105,controller106:106,controller107:107,controller108:108,controller109:109,controller110:110,controller111:111,controller112:112,controller113:113,controller114:114,controller115:115,controller116:116,controller117:117,controller118:118,controller119:119,allsoundoff:120,resetallcontrollers:121,localcontrol:122,allnotesoff:123,omnimodeoff:124,omnimodeon:125,monomodeon:126,polymodeon:127}}static get CONTROL_CHANGE_MESSAGES(){return[{number:0,name:"bankselectcoarse",description:"Bank Select (Coarse)",position:"msb"},{number:1,name:"modulationwheelcoarse",description:"Modulation Wheel (Coarse)",position:"msb"},{number:2,name:"breathcontrollercoarse",description:"Breath Controller (Coarse)",position:"msb"},{number:3,name:"controller3",description:"Undefined",position:"msb"},{number:4,name:"footcontrollercoarse",description:"Foot Controller (Coarse)",position:"msb"},{number:5,name:"portamentotimecoarse",description:"Portamento Time (Coarse)",position:"msb"},{number:6,name:"dataentrycoarse",description:"Data Entry (Coarse)",position:"msb"},{number:7,name:"volumecoarse",description:"Channel Volume (Coarse)",position:"msb"},{number:8,name:"balancecoarse",description:"Balance (Coarse)",position:"msb"},{number:9,name:"controller9",description:"Controller 9 (Coarse)",position:"msb"},{number:10,name:"pancoarse",description:"Pan (Coarse)",position:"msb"},{number:11,name:"expressioncoarse",description:"Expression Controller (Coarse)",position:"msb"},{number:12,name:"effectcontrol1coarse",description:"Effect Control 1 (Coarse)",position:"msb"},{number:13,name:"effectcontrol2coarse",description:"Effect Control 2 (Coarse)",position:"msb"},{number:14,name:"controller14",description:"Undefined",position:"msb"},{number:15,name:"controller15",description:"Undefined",position:"msb"},{number:16,name:"generalpurposecontroller1",description:"General Purpose Controller 1 (Coarse)",position:"msb"},{number:17,name:"generalpurposecontroller2",description:"General Purpose Controller 2 (Coarse)",position:"msb"},{number:18,name:"generalpurposecontroller3",description:"General Purpose Controller 3 (Coarse)",position:"msb"},{number:19,name:"generalpurposecontroller4",description:"General Purpose Controller 4 (Coarse)",position:"msb"},{number:20,name:"controller20",description:"Undefined",position:"msb"},{number:21,name:"controller21",description:"Undefined",position:"msb"},{number:22,name:"controller22",description:"Undefined",position:"msb"},{number:23,name:"controller23",description:"Undefined",position:"msb"},{number:24,name:"controller24",description:"Undefined",position:"msb"},{number:25,name:"controller25",description:"Undefined",position:"msb"},{number:26,name:"controller26",description:"Undefined",position:"msb"},{number:27,name:"controller27",description:"Undefined",position:"msb"},{number:28,name:"controller28",description:"Undefined",position:"msb"},{number:29,name:"controller29",description:"Undefined",position:"msb"},{number:30,name:"controller30",description:"Undefined",position:"msb"},{number:31,name:"controller31",description:"Undefined",position:"msb"},{number:32,name:"bankselectfine",description:"Bank Select (Fine)",position:"lsb"},{number:33,name:"modulationwheelfine",description:"Modulation Wheel (Fine)",position:"lsb"},{number:34,name:"breathcontrollerfine",description:"Breath Controller (Fine)",position:"lsb"},{number:35,name:"controller35",description:"Undefined",position:"lsb"},{number:36,name:"footcontrollerfine",description:"Foot Controller (Fine)",position:"lsb"},{number:37,name:"portamentotimefine",description:"Portamento Time (Fine)",position:"lsb"},{number:38,name:"dataentryfine",description:"Data Entry (Fine)",position:"lsb"},{number:39,name:"channelvolumefine",description:"Channel Volume (Fine)",position:"lsb"},{number:40,name:"balancefine",description:"Balance (Fine)",position:"lsb"},{number:41,name:"controller41",description:"Undefined",position:"lsb"},{number:42,name:"panfine",description:"Pan (Fine)",position:"lsb"},{number:43,name:"expressionfine",description:"Expression Controller (Fine)",position:"lsb"},{number:44,name:"effectcontrol1fine",description:"Effect control 1 (Fine)",position:"lsb"},{number:45,name:"effectcontrol2fine",description:"Effect control 2 (Fine)",position:"lsb"},{number:46,name:"controller46",description:"Undefined",position:"lsb"},{number:47,name:"controller47",description:"Undefined",position:"lsb"},{number:48,name:"controller48",description:"General Purpose Controller 1 (Fine)",position:"lsb"},{number:49,name:"controller49",description:"General Purpose Controller 2 (Fine)",position:"lsb"},{number:50,name:"controller50",description:"General Purpose Controller 3 (Fine)",position:"lsb"},{number:51,name:"controller51",description:"General Purpose Controller 4 (Fine)",position:"lsb"},{number:52,name:"controller52",description:"Undefined",position:"lsb"},{number:53,name:"controller53",description:"Undefined",position:"lsb"},{number:54,name:"controller54",description:"Undefined",position:"lsb"},{number:55,name:"controller55",description:"Undefined",position:"lsb"},{number:56,name:"controller56",description:"Undefined",position:"lsb"},{number:57,name:"controller57",description:"Undefined",position:"lsb"},{number:58,name:"controller58",description:"Undefined",position:"lsb"},{number:59,name:"controller59",description:"Undefined",position:"lsb"},{number:60,name:"controller60",description:"Undefined",position:"lsb"},{number:61,name:"controller61",description:"Undefined",position:"lsb"},{number:62,name:"controller62",description:"Undefined",position:"lsb"},{number:63,name:"controller63",description:"Undefined",position:"lsb"},{number:64,name:"damperpedal",description:"Damper Pedal On/Off"},{number:65,name:"portamento",description:"Portamento On/Off"},{number:66,name:"sostenuto",description:"Sostenuto On/Off"},{number:67,name:"softpedal",description:"Soft Pedal On/Off"},{number:68,name:"legatopedal",description:"Legato Pedal On/Off"},{number:69,name:"hold2",description:"Hold 2 On/Off"},{number:70,name:"soundvariation",description:"Sound Variation",position:"lsb"},{number:71,name:"resonance",description:"Resonance",position:"lsb"},{number:72,name:"releasetime",description:"Release Time",position:"lsb"},{number:73,name:"attacktime",description:"Attack Time",position:"lsb"},{number:74,name:"brightness",description:"Brightness",position:"lsb"},{number:75,name:"decaytime",description:"Decay Time",position:"lsb"},{number:76,name:"vibratorate",description:"Vibrato Rate",position:"lsb"},{number:77,name:"vibratodepth",description:"Vibrato Depth",position:"lsb"},{number:78,name:"vibratodelay",description:"Vibrato Delay",position:"lsb"},{number:79,name:"controller79",description:"Undefined",position:"lsb"},{number:80,name:"generalpurposecontroller5",description:"General Purpose Controller 5",position:"lsb"},{number:81,name:"generalpurposecontroller6",description:"General Purpose Controller 6",position:"lsb"},{number:82,name:"generalpurposecontroller7",description:"General Purpose Controller 7",position:"lsb"},{number:83,name:"generalpurposecontroller8",description:"General Purpose Controller 8",position:"lsb"},{number:84,name:"portamentocontrol",description:"Portamento Control",position:"lsb"},{number:85,name:"controller85",description:"Undefined"},{number:86,name:"controller86",description:"Undefined"},{number:87,name:"controller87",description:"Undefined"},{number:88,name:"highresolutionvelocityprefix",description:"High Resolution Velocity Prefix",position:"lsb"},{number:89,name:"controller89",description:"Undefined"},{number:90,name:"controller90",description:"Undefined"},{number:91,name:"effect1depth",description:"Effects 1 Depth (Reverb Send Level)"},{number:92,name:"effect2depth",description:"Effects 2 Depth"},{number:93,name:"effect3depth",description:"Effects 3 Depth (Chorus Send Level)"},{number:94,name:"effect4depth",description:"Effects 4 Depth"},{number:95,name:"effect5depth",description:"Effects 5 Depth"},{number:96,name:"dataincrement",description:"Data Increment"},{number:97,name:"datadecrement",description:"Data Decrement"},{number:98,name:"nonregisteredparameterfine",description:"Non-Registered Parameter Number (Fine)",position:"lsb"},{number:99,name:"nonregisteredparametercoarse",description:"Non-Registered Parameter Number (Coarse)",position:"msb"},{number:100,name:"registeredparameterfine",description:"Registered Parameter Number (Fine)",position:"lsb"},{number:101,name:"registeredparametercoarse",description:"Registered Parameter Number (Coarse)",position:"msb"},{number:102,name:"controller102",description:"Undefined"},{number:103,name:"controller103",description:"Undefined"},{number:104,name:"controller104",description:"Undefined"},{number:105,name:"controller105",description:"Undefined"},{number:106,name:"controller106",description:"Undefined"},{number:107,name:"controller107",description:"Undefined"},{number:108,name:"controller108",description:"Undefined"},{number:109,name:"controller109",description:"Undefined"},{number:110,name:"controller110",description:"Undefined"},{number:111,name:"controller111",description:"Undefined"},{number:112,name:"controller112",description:"Undefined"},{number:113,name:"controller113",description:"Undefined"},{number:114,name:"controller114",description:"Undefined"},{number:115,name:"controller115",description:"Undefined"},{number:116,name:"controller116",description:"Undefined"},{number:117,name:"controller117",description:"Undefined"},{number:118,name:"controller118",description:"Undefined"},{number:119,name:"controller119",description:"Undefined"},{number:120,name:"allsoundoff",description:"All Sound Off"},{number:121,name:"resetallcontrollers",description:"Reset All Controllers"},{number:122,name:"localcontrol",description:"Local Control On/Off"},{number:123,name:"allnotesoff",description:"All Notes Off"},{number:124,name:"omnimodeoff",description:"Omni Mode Off"},{number:125,name:"omnimodeon",description:"Omni Mode On"},{number:126,name:"monomodeon",description:"Mono Mode On"},{number:127,name:"polymodeon",description:"Poly Mode On"}]}static get REGISTERED_PARAMETERS(){return{pitchbendrange:[0,0],channelfinetuning:[0,1],channelcoarsetuning:[0,2],tuningprogram:[0,3],tuningbank:[0,4],modulationrange:[0,5],azimuthangle:[61,0],elevationangle:[61,1],gain:[61,2],distanceratio:[61,3],maximumdistance:[61,4],maximumdistancegain:[61,5],referencedistanceratio:[61,6],panspreadangle:[61,7],rollangle:[61,8]}}static get MIDI_REGISTERED_PARAMETERS(){return this.validation&&console.warn("The MIDI_REGISTERED_PARAMETERS enum has been deprecated. Use the Enumerations.REGISTERED_PARAMETERS enum instead."),L.MIDI_REGISTERED_PARAMETERS}static get SYSTEM_MESSAGES(){return{sysex:240,timecode:241,songposition:242,songselect:243,tunerequest:246,tuningrequest:246,sysexend:247,clock:248,start:250,continue:251,stop:252,activesensing:254,reset:255,midimessage:0,unknownsystemmessage:-1}}static get MIDI_SYSTEM_MESSAGES(){return this.validation&&console.warn("The MIDI_SYSTEM_MESSAGES enum has been deprecated. Use the Enumerations.SYSTEM_MESSAGES enum instead."),L.SYSTEM_MESSAGES}static get CHANNEL_EVENTS(){return["noteoff","controlchange","noteon","keyaftertouch","programchange","channelaftertouch","pitchbend","allnotesoff","allsoundoff","localcontrol","monomode","omnimode","resetallcontrollers","nrpn","nrpn-dataentrycoarse","nrpn-dataentryfine","nrpn-dataincrement","nrpn-datadecrement","rpn","rpn-dataentrycoarse","rpn-dataentryfine","rpn-dataincrement","rpn-datadecrement","nrpn-databuttonincrement","nrpn-databuttondecrement","rpn-databuttonincrement","rpn-databuttondecrement"]}}/**
 * The `Note` class represents a single musical note such as `"D3"`, `"G#4"`, `"F-1"`, `"Gb7"`, etc.
 *
 * `Note` objects can be played back on a single channel by calling
 * [`OutputChannel.playNote()`]{@link OutputChannel#playNote} or, on multiple channels of the same
 * output, by calling [`Output.playNote()`]{@link Output#playNote}.
 *
 * The note has [`attack`](#attack) and [`release`](#release) velocities set at `0.5` by default.
 * These can be changed by passing in the appropriate option. It is also possible to set a
 * system-wide default for attack and release velocities by using the
 * [`WebMidi.defaults`](WebMidi#defaults) property.
 *
 * If you prefer to work with raw MIDI values (`0` to `127`), you can use [`rawAttack`](#rawAttack) and
 * [`rawRelease`](#rawRelease) to both get and set the values.
 *
 * The note may have a [`duration`](#duration). If it does, playback will be automatically stopped
 * when the duration has elapsed by sending a `"noteoff"` event. By default, the duration is set to
 * `Infinity`. In this case, it will never stop playing unless explicitly stopped by calling a
 * method such as [`OutputChannel.stopNote()`]{@link OutputChannel#stopNote},
 * [`Output.stopNote()`]{@link Output#stopNote} or similar.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class Fe{constructor(e,t={}){this.duration=H.defaults.note.duration,this.attack=H.defaults.note.attack,this.release=H.defaults.note.release,t.duration!=null&&(this.duration=t.duration),t.attack!=null&&(this.attack=t.attack),t.rawAttack!=null&&(this.attack=j.from7bitToFloat(t.rawAttack)),t.release!=null&&(this.release=t.release),t.rawRelease!=null&&(this.release=j.from7bitToFloat(t.rawRelease)),Number.isInteger(e)?this.identifier=j.toNoteIdentifier(e):this.identifier=e}get identifier(){return this._name+(this._accidental||"")+this._octave}set identifier(e){const t=j.getNoteDetails(e);if(H.validation&&!e)throw new Error("Invalid note identifier");this._name=t.name,this._accidental=t.accidental,this._octave=t.octave}get name(){return this._name}set name(e){if(H.validation&&(e=e.toUpperCase(),!["C","D","E","F","G","A","B"].includes(e)))throw new Error("Invalid name value");this._name=e}get accidental(){return this._accidental}set accidental(e){if(H.validation&&(e=e.toLowerCase(),!["#","##","b","bb"].includes(e)))throw new Error("Invalid accidental value");this._accidental=e}get octave(){return this._octave}set octave(e){if(H.validation&&(e=parseInt(e),isNaN(e)))throw new Error("Invalid octave value");this._octave=e}get duration(){return this._duration}set duration(e){if(H.validation&&(e=parseFloat(e),isNaN(e)||e===null||e<0))throw new RangeError("Invalid duration value.");this._duration=e}get attack(){return this._attack}set attack(e){if(H.validation&&(e=parseFloat(e),isNaN(e)||!(e>=0&&e<=1)))throw new RangeError("Invalid attack value.");this._attack=e}get release(){return this._release}set release(e){if(H.validation&&(e=parseFloat(e),isNaN(e)||!(e>=0&&e<=1)))throw new RangeError("Invalid release value.");this._release=e}get rawAttack(){return j.fromFloatTo7Bit(this._attack)}set rawAttack(e){this._attack=j.from7bitToFloat(e)}get rawRelease(){return j.fromFloatTo7Bit(this._release)}set rawRelease(e){this._release=j.from7bitToFloat(e)}get number(){return j.toNoteNumber(this.identifier)}getOffsetNumber(e=0,t=0){return H.validation&&(e=parseInt(e)||0,t=parseInt(t)||0),Math.min(Math.max(this.number+e*12+t,0),127)}}/**
 * The `Utilities` class contains general-purpose utility methods. All methods are static and
 * should be called using the class name. For example: `Utilities.getNoteDetails("C4")`.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class j{static toNoteNumber(e,t=0){if(t=t==null?0:parseInt(t),isNaN(t))throw new RangeError("Invalid 'octaveOffset' value");typeof e!="string"&&(e="");const n=this.getNoteDetails(e);if(!n)throw new TypeError("Invalid note identifier");const r={C:0,D:2,E:4,F:5,G:7,A:9,B:11};let s=(n.octave+1+t)*12;if(s+=r[n.name],n.accidental&&(n.accidental.startsWith("b")?s-=n.accidental.length:s+=n.accidental.length),s<0||s>127)throw new RangeError("Invalid octaveOffset value");return s}static getNoteDetails(e){Number.isInteger(e)&&(e=this.toNoteIdentifier(e));const t=e.match(/^([CDEFGAB])(#{0,2}|b{0,2})(-?\d+)$/i);if(!t)throw new TypeError("Invalid note identifier");const n=t[1].toUpperCase(),r=parseInt(t[3]);let s=t[2].toLowerCase();return s=s===""?void 0:s,{accidental:s,identifier:n+(s||"")+r,name:n,octave:r}}static sanitizeChannels(e){let t;if(H.validation){if(e==="all")t=["all"];else if(e==="none")return[]}return Array.isArray(e)?t=e:t=[e],t.indexOf("all")>-1&&(t=L.MIDI_CHANNEL_NUMBERS),t.map(function(n){return parseInt(n)}).filter(function(n){return n>=1&&n<=16})}static toTimestamp(e){let t=!1;const n=parseFloat(e);return isNaN(n)?!1:(typeof e=="string"&&e.substring(0,1)==="+"?n>=0&&(t=H.time+n):n>=0&&(t=n),t)}static guessNoteNumber(e,t){t=parseInt(t)||0;let n=!1;if(Number.isInteger(e)&&e>=0&&e<=127)n=parseInt(e);else if(parseInt(e)>=0&&parseInt(e)<=127)n=parseInt(e);else if(typeof e=="string"||e instanceof String)try{n=this.toNoteNumber(e.trim(),t)}catch{return!1}return n}static toNoteIdentifier(e,t){if(e=parseInt(e),isNaN(e)||e<0||e>127)throw new RangeError("Invalid note number");if(t=t==null?0:parseInt(t),isNaN(t))throw new RangeError("Invalid octaveOffset value");const n=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],r=Math.floor(e/12-1)+t;return n[e%12]+r.toString()}static buildNote(e,t={}){if(t.octaveOffset=parseInt(t.octaveOffset)||0,e instanceof Fe)return e;let n=this.guessNoteNumber(e,t.octaveOffset);if(n===!1)throw new TypeError(`The input could not be parsed as a note (${e})`);return t.octaveOffset=void 0,new Fe(n,t)}static buildNoteArray(e,t={}){let n=[];return Array.isArray(e)||(e=[e]),e.forEach(r=>{n.push(this.buildNote(r,t))}),n}static from7bitToFloat(e){return e===1/0&&(e=127),e=parseInt(e)||0,Math.min(Math.max(e/127,0),1)}static fromFloatTo7Bit(e){return e===1/0&&(e=1),e=parseFloat(e)||0,Math.min(Math.max(Math.round(e*127),0),127)}static fromMsbLsbToFloat(e,t=0){H.validation&&(e=Math.min(Math.max(parseInt(e)||0,0),127),t=Math.min(Math.max(parseInt(t)||0,0),127));const n=((e<<7)+t)/16383;return Math.min(Math.max(n,0),1)}static fromFloatToMsbLsb(e){H.validation&&(e=Math.min(Math.max(parseFloat(e)||0,0),1));const t=Math.round(e*16383);return{msb:t>>7,lsb:t&127}}static offsetNumber(e,t=0,n=0){if(H.validation){if(e=parseInt(e),isNaN(e))throw new Error("Invalid note number");t=parseInt(t)||0,n=parseInt(n)||0}return Math.min(Math.max(e+t*12+n,0),127)}static getPropertyByValue(e,t){return Object.keys(e).find(n=>e[n]===t)}static getCcNameByNumber(e){if(!(H.validation&&(e=parseInt(e),!(e>=0&&e<=127))))return L.CONTROL_CHANGE_MESSAGES[e].name}static getCcNumberByName(e){let t=L.CONTROL_CHANGE_MESSAGES.find(n=>n.name===e);return t?t.number:L.MIDI_CONTROL_CHANGE_MESSAGES[e]}static getChannelModeByNumber(e){if(!(e>=120&&e<=127))return!1;for(let t in L.CHANNEL_MODE_MESSAGES)if(L.CHANNEL_MODE_MESSAGES.hasOwnProperty(t)&&e===L.CHANNEL_MODE_MESSAGES[t])return t;return!1}static get isNode(){return typeof process<"u"&&process.versions!=null&&process.versions.node!=null}static get isBrowser(){return typeof window<"u"&&typeof window.document<"u"}}/**
 * The `OutputChannel` class represents a single output MIDI channel. `OutputChannel` objects are
 * provided by an [`Output`](Output) port which, itself, is made available by a device. The
 * `OutputChannel` object is derived from the host's MIDI subsystem and should not be instantiated
 * directly.
 *
 * All 16 `OutputChannel` objects can be found inside the parent output's
 * [`channels`]{@link Output#channels} property.
 *
 * @param {Output} output The [`Output`](Output) this channel belongs to.
 * @param {number} number The MIDI channel number (`1` - `16`).
 *
 * @extends EventEmitter
 * @license Apache-2.0
 * @since 3.0.0
 */class Xr extends Se{constructor(e,t){super(),this._output=e,this._number=t,this._octaveOffset=0}destroy(){this._output=null,this._number=null,this._octaveOffset=0,this.removeListener()}send(e,t={time:0}){return this.output.send(e,t),this}sendKeyAftertouch(e,t,n={}){if(H.validation){if(n.useRawValue&&(n.rawValue=n.useRawValue),isNaN(parseFloat(t)))throw new RangeError("Invalid key aftertouch value.");if(n.rawValue){if(!(t>=0&&t<=127&&Number.isInteger(t)))throw new RangeError("Key aftertouch raw value must be an integer between 0 and 127.")}else if(!(t>=0&&t<=1))throw new RangeError("Key aftertouch value must be a float between 0 and 1.")}n.rawValue||(t=j.fromFloatTo7Bit(t));const r=H.octaveOffset+this.output.octaveOffset+this.octaveOffset;return Array.isArray(e)||(e=[e]),j.buildNoteArray(e).forEach(s=>{this.send([(L.CHANNEL_MESSAGES.keyaftertouch<<4)+(this.number-1),s.getOffsetNumber(r),t],{time:j.toTimestamp(n.time)})}),this}sendControlChange(e,t,n={}){if(typeof e=="string"&&(e=j.getCcNumberByName(e)),Array.isArray(t)||(t=[t]),H.validation){if(e===void 0)throw new TypeError("Control change must be identified with a valid name or an integer between 0 and 127.");if(!Number.isInteger(e)||!(e>=0&&e<=127))throw new TypeError("Control change number must be an integer between 0 and 127.");if(t=t.map(r=>{const s=Math.min(Math.max(parseInt(r),0),127);if(isNaN(s))throw new TypeError("Values must be integers between 0 and 127");return s}),t.length===2&&e>=32)throw new TypeError("To use a value array, the controller must be between 0 and 31")}return t.forEach((r,s)=>{this.send([(L.CHANNEL_MESSAGES.controlchange<<4)+(this.number-1),e+s*32,t[s]],{time:j.toTimestamp(n.time)})}),this}_selectNonRegisteredParameter(e,t={}){return this.sendControlChange(99,e[0],t),this.sendControlChange(98,e[1],t),this}_deselectRegisteredParameter(e={}){return this.sendControlChange(101,127,e),this.sendControlChange(100,127,e),this}_deselectNonRegisteredParameter(e={}){return this.sendControlChange(101,127,e),this.sendControlChange(100,127,e),this}_selectRegisteredParameter(e,t={}){return this.sendControlChange(101,e[0],t),this.sendControlChange(100,e[1],t),this}_setCurrentParameter(e,t={}){return e=[].concat(e),this.sendControlChange(6,e[0],t),e.length<2?this:(this.sendControlChange(38,e[1],t),this)}sendRpnDecrement(e,t={}){if(Array.isArray(e)||(e=L.REGISTERED_PARAMETERS[e]),H.validation){if(e===void 0)throw new TypeError("The specified registered parameter is invalid.");let n=!1;if(Object.getOwnPropertyNames(L.REGISTERED_PARAMETERS).forEach(r=>{L.REGISTERED_PARAMETERS[r][0]===e[0]&&L.REGISTERED_PARAMETERS[r][1]===e[1]&&(n=!0)}),!n)throw new TypeError("The specified registered parameter is invalid.")}return this._selectRegisteredParameter(e,t),this.sendControlChange(97,0,t),this._deselectRegisteredParameter(t),this}sendRpnIncrement(e,t={}){if(Array.isArray(e)||(e=L.REGISTERED_PARAMETERS[e]),H.validation){if(e===void 0)throw new TypeError("The specified registered parameter is invalid.");let n=!1;if(Object.getOwnPropertyNames(L.REGISTERED_PARAMETERS).forEach(r=>{L.REGISTERED_PARAMETERS[r][0]===e[0]&&L.REGISTERED_PARAMETERS[r][1]===e[1]&&(n=!0)}),!n)throw new TypeError("The specified registered parameter is invalid.")}return this._selectRegisteredParameter(e,t),this.sendControlChange(96,0,t),this._deselectRegisteredParameter(t),this}playNote(e,t={}){this.sendNoteOn(e,t);const n=Array.isArray(e)?e:[e];for(let r of n)if(parseInt(r.duration)>0){const s={time:(j.toTimestamp(t.time)||H.time)+parseInt(r.duration),release:r.release,rawRelease:r.rawRelease};this.sendNoteOff(r,s)}else if(parseInt(t.duration)>0){const s={time:(j.toTimestamp(t.time)||H.time)+parseInt(t.duration),release:t.release,rawRelease:t.rawRelease};this.sendNoteOff(r,s)}return this}sendNoteOff(e,t={}){if(H.validation){if(t.rawRelease!=null&&!(t.rawRelease>=0&&t.rawRelease<=127))throw new RangeError("The 'rawRelease' option must be an integer between 0 and 127");if(t.release!=null&&!(t.release>=0&&t.release<=1))throw new RangeError("The 'release' option must be an number between 0 and 1");t.rawVelocity&&(t.rawRelease=t.velocity,console.warn("The 'rawVelocity' option is deprecated. Use 'rawRelease' instead.")),t.velocity&&(t.release=t.velocity,console.warn("The 'velocity' option is deprecated. Use 'attack' instead."))}let n=64;t.rawRelease!=null?n=t.rawRelease:isNaN(t.release)||(n=Math.round(t.release*127));const r=H.octaveOffset+this.output.octaveOffset+this.octaveOffset;return j.buildNoteArray(e,{rawRelease:parseInt(n)}).forEach(s=>{this.send([(L.CHANNEL_MESSAGES.noteoff<<4)+(this.number-1),s.getOffsetNumber(r),s.rawRelease],{time:j.toTimestamp(t.time)})}),this}stopNote(e,t={}){return this.sendNoteOff(e,t)}sendNoteOn(e,t={}){if(H.validation){if(t.rawAttack!=null&&!(t.rawAttack>=0&&t.rawAttack<=127))throw new RangeError("The 'rawAttack' option must be an integer between 0 and 127");if(t.attack!=null&&!(t.attack>=0&&t.attack<=1))throw new RangeError("The 'attack' option must be an number between 0 and 1");t.rawVelocity&&(t.rawAttack=t.velocity,t.rawRelease=t.release,console.warn("The 'rawVelocity' option is deprecated. Use 'rawAttack' or 'rawRelease'.")),t.velocity&&(t.attack=t.velocity,console.warn("The 'velocity' option is deprecated. Use 'attack' instead."))}let n=64;t.rawAttack!=null?n=t.rawAttack:isNaN(t.attack)||(n=Math.round(t.attack*127));const r=H.octaveOffset+this.output.octaveOffset+this.octaveOffset;return j.buildNoteArray(e,{rawAttack:n}).forEach(s=>{this.send([(L.CHANNEL_MESSAGES.noteon<<4)+(this.number-1),s.getOffsetNumber(r),s.rawAttack],{time:j.toTimestamp(t.time)})}),this}sendChannelMode(e,t=0,n={}){if(typeof e=="string"&&(e=L.CHANNEL_MODE_MESSAGES[e]),H.validation){if(e===void 0)throw new TypeError("Invalid channel mode message name or number.");if(isNaN(e)||!(e>=120&&e<=127))throw new TypeError("Invalid channel mode message number.");if(isNaN(parseInt(t))||t<0||t>127)throw new RangeError("Value must be an integer between 0 and 127.")}return this.send([(L.CHANNEL_MESSAGES.controlchange<<4)+(this.number-1),e,t],{time:j.toTimestamp(n.time)}),this}sendOmniMode(e,t={}){return e===void 0||e?this.sendChannelMode("omnimodeon",0,t):this.sendChannelMode("omnimodeoff",0,t),this}sendChannelAftertouch(e,t={}){if(H.validation){if(isNaN(parseFloat(e)))throw new RangeError("Invalid channel aftertouch value.");if(t.rawValue){if(!(e>=0&&e<=127&&Number.isInteger(e)))throw new RangeError("Channel aftertouch raw value must be an integer between 0 and 127.")}else if(!(e>=0&&e<=1))throw new RangeError("Channel aftertouch value must be a float between 0 and 1.")}return this.send([(L.CHANNEL_MESSAGES.channelaftertouch<<4)+(this.number-1),Math.round(e*127)],{time:j.toTimestamp(t.time)}),this}sendMasterTuning(e,t={}){if(e=parseFloat(e)||0,H.validation&&!(e>-65&&e<64))throw new RangeError("The value must be a decimal number larger than -65 and smaller than 64.");let n=Math.floor(e)+64,r=e-Math.floor(e);r=Math.round((r+1)/2*16383);let s=r>>7&127,l=r&127;return this.sendRpnValue("channelcoarsetuning",n,t),this.sendRpnValue("channelfinetuning",[s,l],t),this}sendModulationRange(e,t,n={}){if(H.validation){if(!Number.isInteger(e)||!(e>=0&&e<=127))throw new RangeError("The semitones value must be an integer between 0 and 127.");if(t!=null&&(!Number.isInteger(t)||!(t>=0&&t<=127)))throw new RangeError("If specified, the cents value must be an integer between 0 and 127.")}return t>=0&&t<=127||(t=0),this.sendRpnValue("modulationrange",[e,t],n),this}sendNrpnValue(e,t,n={}){if(t=[].concat(t),H.validation){if(!Array.isArray(e)||!Number.isInteger(e[0])||!Number.isInteger(e[1]))throw new TypeError("The specified NRPN is invalid.");if(!(e[0]>=0&&e[0]<=127))throw new RangeError("The first byte of the NRPN must be between 0 and 127.");if(!(e[1]>=0&&e[1]<=127))throw new RangeError("The second byte of the NRPN must be between 0 and 127.");t.forEach(r=>{if(!(r>=0&&r<=127))throw new RangeError("The data bytes of the NRPN must be between 0 and 127.")})}return this._selectNonRegisteredParameter(e,n),this._setCurrentParameter(t,n),this._deselectNonRegisteredParameter(n),this}sendPitchBend(e,t={}){if(H.validation)if(t.rawValue&&Array.isArray(e)){if(!(e[0]>=0&&e[0]<=127))throw new RangeError("The pitch bend MSB must be an integer between 0 and 127.");if(!(e[1]>=0&&e[1]<=127))throw new RangeError("The pitch bend LSB must be an integer between 0 and 127.")}else if(t.rawValue&&!Array.isArray(e)){if(!(e>=0&&e<=127))throw new RangeError("The pitch bend MSB must be an integer between 0 and 127.")}else{if(isNaN(e)||e===null)throw new RangeError("Invalid pitch bend value.");if(!(e>=-1&&e<=1))throw new RangeError("The pitch bend value must be a float between -1 and 1.")}let n=0,r=0;if(t.rawValue&&Array.isArray(e))n=e[0],r=e[1];else if(t.rawValue&&!Array.isArray(e))n=e;else{const s=j.fromFloatToMsbLsb((e+1)/2);n=s.msb,r=s.lsb}return this.send([(L.CHANNEL_MESSAGES.pitchbend<<4)+(this.number-1),r,n],{time:j.toTimestamp(t.time)}),this}sendPitchBendRange(e,t,n={}){if(H.validation){if(!Number.isInteger(e)||!(e>=0&&e<=127))throw new RangeError("The semitones value must be an integer between 0 and 127.");if(!Number.isInteger(t)||!(t>=0&&t<=127))throw new RangeError("The cents value must be an integer between 0 and 127.")}return this.sendRpnValue("pitchbendrange",[e,t],n),this}sendProgramChange(e,t={}){if(e=parseInt(e)||0,H.validation&&!(e>=0&&e<=127))throw new RangeError("The program number must be between 0 and 127.");return this.send([(L.CHANNEL_MESSAGES.programchange<<4)+(this.number-1),e],{time:j.toTimestamp(t.time)}),this}sendRpnValue(e,t,n={}){if(Array.isArray(e)||(e=L.REGISTERED_PARAMETERS[e]),H.validation){if(!Number.isInteger(e[0])||!Number.isInteger(e[1]))throw new TypeError("The specified NRPN is invalid.");if(!(e[0]>=0&&e[0]<=127))throw new RangeError("The first byte of the RPN must be between 0 and 127.");if(!(e[1]>=0&&e[1]<=127))throw new RangeError("The second byte of the RPN must be between 0 and 127.");[].concat(t).forEach(r=>{if(!(r>=0&&r<=127))throw new RangeError("The data bytes of the RPN must be between 0 and 127.")})}return this._selectRegisteredParameter(e,n),this._setCurrentParameter(t,n),this._deselectRegisteredParameter(n),this}sendTuningBank(e,t={}){if(H.validation&&(!Number.isInteger(e)||!(e>=0&&e<=127)))throw new RangeError("The tuning bank number must be between 0 and 127.");return this.sendRpnValue("tuningbank",e,t),this}sendTuningProgram(e,t={}){if(H.validation&&(!Number.isInteger(e)||!(e>=0&&e<=127)))throw new RangeError("The tuning program number must be between 0 and 127.");return this.sendRpnValue("tuningprogram",e,t),this}sendLocalControl(e,t={}){return e?this.sendChannelMode("localcontrol",127,t):this.sendChannelMode("localcontrol",0,t)}sendAllNotesOff(e={}){return this.sendChannelMode("allnotesoff",0,e)}sendAllSoundOff(e={}){return this.sendChannelMode("allsoundoff",0,e)}sendResetAllControllers(e={}){return this.sendChannelMode("resetallcontrollers",0,e)}sendPolyphonicMode(e,t={}){return e==="mono"?this.sendChannelMode("monomodeon",0,t):this.sendChannelMode("polymodeon",0,t)}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}get output(){return this._output}get number(){return this._number}}/**
 * The `Output` class represents a single MIDI output port (not to be confused with a MIDI channel).
 * A port is made available by a MIDI device. A MIDI device can advertise several input and output
 * ports. Each port has 16 MIDI channels which can be accessed via the [`channels`](#channels)
 * property.
 *
 * The `Output` object is automatically instantiated by the library according to the host's MIDI
 * subsystem and should not be directly instantiated.
 *
 * You can access all available `Output` objects by referring to the
 * [`WebMidi.outputs`](WebMidi#outputs) array or by using methods such as
 * [`WebMidi.getOutputByName()`](WebMidi#getOutputByName) or
 * [`WebMidi.getOutputById()`](WebMidi#getOutputById).
 *
 * @fires Output#opened
 * @fires Output#disconnected
 * @fires Output#closed
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */class Mt extends Se{constructor(e){super(),this._midiOutput=e,this._octaveOffset=0,this.channels=[];for(let t=1;t<=16;t++)this.channels[t]=new Xr(this,t);this._midiOutput.onstatechange=this._onStateChange.bind(this)}async destroy(){this.removeListener(),this.channels.forEach(e=>e.destroy()),this.channels=[],this._midiOutput.onstatechange=null,await this.close(),this._midiOutput=null}_onStateChange(e){let t={timestamp:H.time};e.port.connection==="open"?(t.type="opened",t.target=this,t.port=t.target,this.emit("opened",t)):e.port.connection==="closed"&&e.port.state==="connected"?(t.type="closed",t.target=this,t.port=t.target,this.emit("closed",t)):e.port.connection==="closed"&&e.port.state==="disconnected"?(t.type="disconnected",t.port={connection:e.port.connection,id:e.port.id,manufacturer:e.port.manufacturer,name:e.port.name,state:e.port.state,type:e.port.type},this.emit("disconnected",t)):e.port.connection==="pending"&&e.port.state==="disconnected"||console.warn("This statechange event was not caught:",e.port.connection,e.port.state)}async open(){try{return await this._midiOutput.open(),Promise.resolve(this)}catch(e){return Promise.reject(e)}}async close(){this._midiOutput?await this._midiOutput.close():await Promise.resolve()}send(e,t={time:0},n=0){if(e instanceof Sr&&(e=j.isNode?e.data:e.rawData),e instanceof Uint8Array&&j.isNode&&(e=Array.from(e)),H.validation){if(!Array.isArray(e)&&!(e instanceof Uint8Array)&&(e=[e],Array.isArray(t)&&(e=e.concat(t)),t=isNaN(n)?{time:0}:{time:n}),!(parseInt(e[0])>=128&&parseInt(e[0])<=255))throw new RangeError("The first byte (status) must be an integer between 128 and 255.");e.slice(1).forEach(r=>{if(r=parseInt(r),!(r>=0&&r<=255))throw new RangeError("Data bytes must be integers between 0 and 255.")}),t||(t={time:0})}return this._midiOutput.send(e,j.toTimestamp(t.time)),this}sendSysex(e,t=[],n={}){if(e=[].concat(e),t instanceof Uint8Array){const r=new Uint8Array(1+e.length+t.length+1);r[0]=L.SYSTEM_MESSAGES.sysex,r.set(Uint8Array.from(e),1),r.set(t,1+e.length),r[r.length-1]=L.SYSTEM_MESSAGES.sysexend,this.send(r,{time:n.time})}else{const r=e.concat(t,L.SYSTEM_MESSAGES.sysexend);this.send([L.SYSTEM_MESSAGES.sysex].concat(r),{time:n.time})}return this}clear(){return this._midiOutput.clear?this._midiOutput.clear():H.validation&&console.warn("The 'clear()' method has not yet been implemented in your environment."),this}sendTimecodeQuarterFrame(e,t={}){if(H.validation&&(e=parseInt(e),isNaN(e)||!(e>=0&&e<=127)))throw new RangeError("The value must be an integer between 0 and 127.");return this.send([L.SYSTEM_MESSAGES.timecode,e],{time:t.time}),this}sendSongPosition(e=0,t={}){e=Math.floor(e)||0;var n=e>>7&127,r=e&127;return this.send([L.SYSTEM_MESSAGES.songposition,n,r],{time:t.time}),this}sendSongSelect(e=0,t={}){if(H.validation&&(e=parseInt(e),isNaN(e)||!(e>=0&&e<=127)))throw new RangeError("The program value must be between 0 and 127");return this.send([L.SYSTEM_MESSAGES.songselect,e],{time:t.time}),this}sendTuneRequest(e={}){return this.send([L.SYSTEM_MESSAGES.tunerequest],{time:e.time}),this}sendClock(e={}){return this.send([L.SYSTEM_MESSAGES.clock],{time:e.time}),this}sendStart(e={}){return this.send([L.SYSTEM_MESSAGES.start],{time:e.time}),this}sendContinue(e={}){return this.send([L.SYSTEM_MESSAGES.continue],{time:e.time}),this}sendStop(e={}){return this.send([L.SYSTEM_MESSAGES.stop],{time:e.time}),this}sendActiveSensing(e={}){return this.send([L.SYSTEM_MESSAGES.activesensing],{time:e.time}),this}sendReset(e={}){return this.send([L.SYSTEM_MESSAGES.reset],{time:e.time}),this}sendTuningRequest(e={}){return H.validation&&console.warn("The sendTuningRequest() method has been deprecated. Use sendTuningRequest() instead."),this.sendTuneRequest(e)}sendKeyAftertouch(e,t,n={}){return n.channels==null&&(n.channels=L.MIDI_CHANNEL_NUMBERS),j.sanitizeChannels(n.channels).forEach(r=>{this.channels[r].sendKeyAftertouch(e,t,n)}),this}sendControlChange(e,t,n={},r={}){if(H.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){const s=n;n=r,n.channels=s,n.channels==="all"&&(n.channels=L.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=L.MIDI_CHANNEL_NUMBERS),j.sanitizeChannels(n.channels).forEach(s=>{this.channels[s].sendControlChange(e,t,n)}),this}sendPitchBendRange(e=0,t=0,n={}){return n.channels==null&&(n.channels=L.MIDI_CHANNEL_NUMBERS),j.sanitizeChannels(n.channels).forEach(r=>{this.channels[r].sendPitchBendRange(e,t,n)}),this}setPitchBendRange(e=0,t=0,n="all",r={}){return H.validation&&(console.warn("The setPitchBendRange() method is deprecated. Use sendPitchBendRange() instead."),r.channels=n,r.channels==="all"&&(r.channels=L.MIDI_CHANNEL_NUMBERS)),this.sendPitchBendRange(e,t,r)}sendRpnValue(e,t,n={}){return n.channels==null&&(n.channels=L.MIDI_CHANNEL_NUMBERS),j.sanitizeChannels(n.channels).forEach(r=>{this.channels[r].sendRpnValue(e,t,n)}),this}setRegisteredParameter(e,t=[],n="all",r={}){return H.validation&&(console.warn("The setRegisteredParameter() method is deprecated. Use sendRpnValue() instead."),r.channels=n,r.channels==="all"&&(r.channels=L.MIDI_CHANNEL_NUMBERS)),this.sendRpnValue(e,t,r)}sendChannelAftertouch(e,t={},n={}){if(H.validation&&(Array.isArray(t)||Number.isInteger(t)||t==="all")){const r=t;t=n,t.channels=r,t.channels==="all"&&(t.channels=L.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=L.MIDI_CHANNEL_NUMBERS),j.sanitizeChannels(t.channels).forEach(r=>{this.channels[r].sendChannelAftertouch(e,t)}),this}sendPitchBend(e,t={},n={}){if(H.validation&&(Array.isArray(t)||Number.isInteger(t)||t==="all")){const r=t;t=n,t.channels=r,t.channels==="all"&&(t.channels=L.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=L.MIDI_CHANNEL_NUMBERS),j.sanitizeChannels(t.channels).forEach(r=>{this.channels[r].sendPitchBend(e,t)}),this}sendProgramChange(e=0,t={},n={}){if(H.validation&&(Array.isArray(t)||Number.isInteger(t)||t==="all")){const r=t;t=n,t.channels=r,t.channels==="all"&&(t.channels=L.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=L.MIDI_CHANNEL_NUMBERS),j.sanitizeChannels(t.channels).forEach(r=>{this.channels[r].sendProgramChange(e,t)}),this}sendModulationRange(e,t,n={}){return n.channels==null&&(n.channels=L.MIDI_CHANNEL_NUMBERS),j.sanitizeChannels(n.channels).forEach(r=>{this.channels[r].sendModulationRange(e,t,n)}),this}setModulationRange(e=0,t=0,n="all",r={}){return H.validation&&(console.warn("The setModulationRange() method is deprecated. Use sendModulationRange() instead."),r.channels=n,r.channels==="all"&&(r.channels=L.MIDI_CHANNEL_NUMBERS)),this.sendModulationRange(e,t,r)}sendMasterTuning(e,t={}){return t.channels==null&&(t.channels=L.MIDI_CHANNEL_NUMBERS),j.sanitizeChannels(t.channels).forEach(n=>{this.channels[n].sendMasterTuning(e,t)}),this}setMasterTuning(e,t={},n={}){return H.validation&&(console.warn("The setMasterTuning() method is deprecated. Use sendMasterTuning() instead."),n.channels=t,n.channels==="all"&&(n.channels=L.MIDI_CHANNEL_NUMBERS)),this.sendMasterTuning(e,n)}sendTuningProgram(e,t={}){return t.channels==null&&(t.channels=L.MIDI_CHANNEL_NUMBERS),j.sanitizeChannels(t.channels).forEach(n=>{this.channels[n].sendTuningProgram(e,t)}),this}setTuningProgram(e,t="all",n={}){return H.validation&&(console.warn("The setTuningProgram() method is deprecated. Use sendTuningProgram() instead."),n.channels=t,n.channels==="all"&&(n.channels=L.MIDI_CHANNEL_NUMBERS)),this.sendTuningProgram(e,n)}sendTuningBank(e=0,t={}){return t.channels==null&&(t.channels=L.MIDI_CHANNEL_NUMBERS),j.sanitizeChannels(t.channels).forEach(n=>{this.channels[n].sendTuningBank(e,t)}),this}setTuningBank(e,t="all",n={}){return H.validation&&(console.warn("The setTuningBank() method is deprecated. Use sendTuningBank() instead."),n.channels=t,n.channels==="all"&&(n.channels=L.MIDI_CHANNEL_NUMBERS)),this.sendTuningBank(e,n)}sendChannelMode(e,t=0,n={},r={}){if(H.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){const s=n;n=r,n.channels=s,n.channels==="all"&&(n.channels=L.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=L.MIDI_CHANNEL_NUMBERS),j.sanitizeChannels(n.channels).forEach(s=>{this.channels[s].sendChannelMode(e,t,n)}),this}sendAllSoundOff(e={}){return e.channels==null&&(e.channels=L.MIDI_CHANNEL_NUMBERS),j.sanitizeChannels(e.channels).forEach(t=>{this.channels[t].sendAllSoundOff(e)}),this}sendAllNotesOff(e={}){return e.channels==null&&(e.channels=L.MIDI_CHANNEL_NUMBERS),j.sanitizeChannels(e.channels).forEach(t=>{this.channels[t].sendAllNotesOff(e)}),this}sendResetAllControllers(e={},t={}){if(H.validation&&(Array.isArray(e)||Number.isInteger(e)||e==="all")){const n=e;e=t,e.channels=n,e.channels==="all"&&(e.channels=L.MIDI_CHANNEL_NUMBERS)}return e.channels==null&&(e.channels=L.MIDI_CHANNEL_NUMBERS),j.sanitizeChannels(e.channels).forEach(n=>{this.channels[n].sendResetAllControllers(e)}),this}sendPolyphonicMode(e,t={},n={}){if(H.validation&&(Array.isArray(t)||Number.isInteger(t)||t==="all")){const r=t;t=n,t.channels=r,t.channels==="all"&&(t.channels=L.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=L.MIDI_CHANNEL_NUMBERS),j.sanitizeChannels(t.channels).forEach(r=>{this.channels[r].sendPolyphonicMode(e,t)}),this}sendLocalControl(e,t={},n={}){if(H.validation&&(Array.isArray(t)||Number.isInteger(t)||t==="all")){const r=t;t=n,t.channels=r,t.channels==="all"&&(t.channels=L.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=L.MIDI_CHANNEL_NUMBERS),j.sanitizeChannels(t.channels).forEach(r=>{this.channels[r].sendLocalControl(e,t)}),this}sendOmniMode(e,t={},n={}){if(H.validation&&(Array.isArray(t)||Number.isInteger(t)||t==="all")){const r=t;t=n,t.channels=r,t.channels==="all"&&(t.channels=L.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=L.MIDI_CHANNEL_NUMBERS),j.sanitizeChannels(t.channels).forEach(r=>{this.channels[r].sendOmniMode(e,t)}),this}sendNrpnValue(e,t,n={}){return n.channels==null&&(n.channels=L.MIDI_CHANNEL_NUMBERS),j.sanitizeChannels(n.channels).forEach(r=>{this.channels[r].sendNrpnValue(e,t,n)}),this}setNonRegisteredParameter(e,t=[],n="all",r={}){return H.validation&&(console.warn("The setNonRegisteredParameter() method is deprecated. Use sendNrpnValue() instead."),r.channels=n,r.channels==="all"&&(r.channels=L.MIDI_CHANNEL_NUMBERS)),this.sendNrpnValue(e,t,r)}sendRpnIncrement(e,t={}){return t.channels==null&&(t.channels=L.MIDI_CHANNEL_NUMBERS),j.sanitizeChannels(t.channels).forEach(n=>{this.channels[n].sendRpnIncrement(e,t)}),this}incrementRegisteredParameter(e,t="all",n={}){return H.validation&&(console.warn("The incrementRegisteredParameter() method is deprecated. Use sendRpnIncrement() instead."),n.channels=t,n.channels==="all"&&(n.channels=L.MIDI_CHANNEL_NUMBERS)),this.sendRpnIncrement(e,n)}sendRpnDecrement(e,t={}){return t.channels==null&&(t.channels=L.MIDI_CHANNEL_NUMBERS),j.sanitizeChannels(t.channels).forEach(n=>{this.channels[n].sendRpnDecrement(e,t)}),this}decrementRegisteredParameter(e,t="all",n={}){return H.validation&&(console.warn("The decrementRegisteredParameter() method is deprecated. Use sendRpnDecrement() instead."),n.channels=t,n.channels==="all"&&(n.channels=L.MIDI_CHANNEL_NUMBERS)),this.sendRpnDecrement(e,n)}sendNoteOff(e,t={},n={}){if(H.validation&&(Array.isArray(t)||Number.isInteger(t)||t==="all")){const r=t;t=n,t.channels=r,t.channels==="all"&&(t.channels=L.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=L.MIDI_CHANNEL_NUMBERS),j.sanitizeChannels(t.channels).forEach(r=>{this.channels[r].sendNoteOff(e,t)}),this}stopNote(e,t){return this.sendNoteOff(e,t)}playNote(e,t={},n={}){if(H.validation&&(t.rawVelocity&&console.warn("The 'rawVelocity' option is deprecated. Use 'rawAttack' instead."),t.velocity&&console.warn("The 'velocity' option is deprecated. Use 'velocity' instead."),Array.isArray(t)||Number.isInteger(t)||t==="all")){const r=t;t=n,t.channels=r,t.channels==="all"&&(t.channels=L.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=L.MIDI_CHANNEL_NUMBERS),j.sanitizeChannels(t.channels).forEach(r=>{this.channels[r].playNote(e,t)}),this}sendNoteOn(e,t={},n={}){if(H.validation&&(Array.isArray(t)||Number.isInteger(t)||t==="all")){const r=t;t=n,t.channels=r,t.channels==="all"&&(t.channels=L.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=L.MIDI_CHANNEL_NUMBERS),j.sanitizeChannels(t.channels).forEach(r=>{this.channels[r].sendNoteOn(e,t)}),this}get name(){return this._midiOutput.name}get id(){return this._midiOutput.id}get connection(){return this._midiOutput.connection}get manufacturer(){return this._midiOutput.manufacturer}get state(){return this._midiOutput.state}get type(){return this._midiOutput.type}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}}/**
 * The `Forwarder` class allows the forwarding of MIDI messages to predetermined outputs. When you
 * call its [`forward()`](#forward) method, it will send the specified [`Message`](Message) object
 * to all the outputs listed in its [`destinations`](#destinations) property.
 *
 * If specific channels or message types have been defined in the [`channels`](#channels) or
 * [`types`](#types) properties, only messages matching the channels/types will be forwarded.
 *
 * While it can be manually instantiated, you are more likely to come across a `Forwarder` object as
 * the return value of the [`Input.addForwarder()`](Input#addForwarder) method.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class Wt{constructor(e=[],t={}){this.destinations=[],this.types=[...Object.keys(L.SYSTEM_MESSAGES),...Object.keys(L.CHANNEL_MESSAGES)],this.channels=L.MIDI_CHANNEL_NUMBERS,this.suspended=!1,Array.isArray(e)||(e=[e]),t.types&&!Array.isArray(t.types)&&(t.types=[t.types]),t.channels&&!Array.isArray(t.channels)&&(t.channels=[t.channels]),H.validation&&(e.forEach(n=>{if(!(n instanceof Mt))throw new TypeError("Destinations must be of type 'Output'.")}),t.types!==void 0&&t.types.forEach(n=>{if(!L.SYSTEM_MESSAGES.hasOwnProperty(n)&&!L.CHANNEL_MESSAGES.hasOwnProperty(n))throw new TypeError("Type must be a valid message type.")}),t.channels!==void 0&&t.channels.forEach(n=>{if(!L.MIDI_CHANNEL_NUMBERS.includes(n))throw new TypeError("MIDI channel must be between 1 and 16.")})),this.destinations=e,t.types&&(this.types=t.types),t.channels&&(this.channels=t.channels)}forward(e){this.suspended||this.types.includes(e.type)&&(e.channel&&!this.channels.includes(e.channel)||this.destinations.forEach(t=>{H.validation&&!(t instanceof Mt)||t.send(e)}))}}/**
 * The `InputChannel` class represents a single MIDI input channel (1-16) from a single input
 * device. This object is derived from the host's MIDI subsystem and should not be instantiated
 * directly.
 *
 * All 16 `InputChannel` objects can be found inside the input's [`channels`](Input#channels)
 * property.
 *
 * @fires InputChannel#midimessage
 * @fires InputChannel#unknownmessage
 *
 * @fires InputChannel#noteoff
 * @fires InputChannel#noteon
 * @fires InputChannel#keyaftertouch
 * @fires InputChannel#programchange
 * @fires InputChannel#channelaftertouch
 * @fires InputChannel#pitchbend
 *
 * @fires InputChannel#allnotesoff
 * @fires InputChannel#allsoundoff
 * @fires InputChannel#localcontrol
 * @fires InputChannel#monomode
 * @fires InputChannel#omnimode
 * @fires InputChannel#resetallcontrollers
 *
 * @fires InputChannel#event:nrpn
 * @fires InputChannel#event:nrpn-dataentrycoarse
 * @fires InputChannel#event:nrpn-dataentryfine
 * @fires InputChannel#event:nrpn-dataincrement
 * @fires InputChannel#event:nrpn-datadecrement
 * @fires InputChannel#event:rpn
 * @fires InputChannel#event:rpn-dataentrycoarse
 * @fires InputChannel#event:rpn-dataentryfine
 * @fires InputChannel#event:rpn-dataincrement
 * @fires InputChannel#event:rpn-datadecrement
 *
 * @fires InputChannel#controlchange
 * @fires InputChannel#event:controlchange-controllerxxx
 * @fires InputChannel#event:controlchange-bankselectcoarse
 * @fires InputChannel#event:controlchange-modulationwheelcoarse
 * @fires InputChannel#event:controlchange-breathcontrollercoarse
 * @fires InputChannel#event:controlchange-footcontrollercoarse
 * @fires InputChannel#event:controlchange-portamentotimecoarse
 * @fires InputChannel#event:controlchange-dataentrycoarse
 * @fires InputChannel#event:controlchange-volumecoarse
 * @fires InputChannel#event:controlchange-balancecoarse
 * @fires InputChannel#event:controlchange-pancoarse
 * @fires InputChannel#event:controlchange-expressioncoarse
 * @fires InputChannel#event:controlchange-effectcontrol1coarse
 * @fires InputChannel#event:controlchange-effectcontrol2coarse
 * @fires InputChannel#event:controlchange-generalpurposecontroller1
 * @fires InputChannel#event:controlchange-generalpurposecontroller2
 * @fires InputChannel#event:controlchange-generalpurposecontroller3
 * @fires InputChannel#event:controlchange-generalpurposecontroller4
 * @fires InputChannel#event:controlchange-bankselectfine
 * @fires InputChannel#event:controlchange-modulationwheelfine
 * @fires InputChannel#event:controlchange-breathcontrollerfine
 * @fires InputChannel#event:controlchange-footcontrollerfine
 * @fires InputChannel#event:controlchange-portamentotimefine
 * @fires InputChannel#event:controlchange-dataentryfine
 * @fires InputChannel#event:controlchange-channelvolumefine
 * @fires InputChannel#event:controlchange-balancefine
 * @fires InputChannel#event:controlchange-panfine
 * @fires InputChannel#event:controlchange-expressionfine
 * @fires InputChannel#event:controlchange-effectcontrol1fine
 * @fires InputChannel#event:controlchange-effectcontrol2fine
 * @fires InputChannel#event:controlchange-damperpedal
 * @fires InputChannel#event:controlchange-portamento
 * @fires InputChannel#event:controlchange-sostenuto
 * @fires InputChannel#event:controlchange-softpedal
 * @fires InputChannel#event:controlchange-legatopedal
 * @fires InputChannel#event:controlchange-hold2
 * @fires InputChannel#event:controlchange-soundvariation
 * @fires InputChannel#event:controlchange-resonance
 * @fires InputChannel#event:controlchange-releasetime
 * @fires InputChannel#event:controlchange-attacktime
 * @fires InputChannel#event:controlchange-brightness
 * @fires InputChannel#event:controlchange-decaytime
 * @fires InputChannel#event:controlchange-vibratorate
 * @fires InputChannel#event:controlchange-vibratodepth
 * @fires InputChannel#event:controlchange-vibratodelay
 * @fires InputChannel#event:controlchange-generalpurposecontroller5
 * @fires InputChannel#event:controlchange-generalpurposecontroller6
 * @fires InputChannel#event:controlchange-generalpurposecontroller7
 * @fires InputChannel#event:controlchange-generalpurposecontroller8
 * @fires InputChannel#event:controlchange-portamentocontrol
 * @fires InputChannel#event:controlchange-highresolutionvelocityprefix
 * @fires InputChannel#event:controlchange-effect1depth
 * @fires InputChannel#event:controlchange-effect2depth
 * @fires InputChannel#event:controlchange-effect3depth
 * @fires InputChannel#event:controlchange-effect4depth
 * @fires InputChannel#event:controlchange-effect5depth
 * @fires InputChannel#event:controlchange-dataincrement
 * @fires InputChannel#event:controlchange-datadecrement
 * @fires InputChannel#event:controlchange-nonregisteredparameterfine
 * @fires InputChannel#event:controlchange-nonregisteredparametercoarse
 * @fires InputChannel#event:controlchange-registeredparameterfine
 * @fires InputChannel#event:controlchange-registeredparametercoarse
 * @fires InputChannel#event:controlchange-allsoundoff
 * @fires InputChannel#event:controlchange-resetallcontrollers
 * @fires InputChannel#event:controlchange-localcontrol
 * @fires InputChannel#event:controlchange-allnotesoff
 * @fires InputChannel#event:controlchange-omnimodeoff
 * @fires InputChannel#event:controlchange-omnimodeon
 * @fires InputChannel#event:controlchange-monomodeon
 * @fires InputChannel#event:controlchange-polymodeon
 * @fires InputChannel#event:
 *
 * @extends EventEmitter
 * @license Apache-2.0
 * @since 3.0.0
 */class Wr extends Se{constructor(e,t){super(),this._input=e,this._number=t,this._octaveOffset=0,this._nrpnBuffer=[],this._rpnBuffer=[],this.parameterNumberEventsEnabled=!0,this.notesState=new Array(128).fill(!1)}destroy(){this._input=null,this._number=null,this._octaveOffset=0,this._nrpnBuffer=[],this.notesState=new Array(128).fill(!1),this.parameterNumberEventsEnabled=!1,this.removeListener()}_processMidiMessageEvent(e){const t=Object.assign({},e);t.port=this.input,t.target=this,t.type="midimessage",this.emit(t.type,t),this._parseEventForStandardMessages(t)}_parseEventForStandardMessages(e){const t=Object.assign({},e);t.type=t.message.type||"unknownmessage";const n=e.message.dataBytes[0],r=e.message.dataBytes[1];if(t.type==="noteoff"||t.type==="noteon"&&r===0)this.notesState[n]=!1,t.type="noteoff",t.note=new Fe(j.offsetNumber(n,this.octaveOffset+this.input.octaveOffset+H.octaveOffset),{rawAttack:0,rawRelease:r}),t.value=j.from7bitToFloat(r),t.rawValue=r,t.velocity=t.note.release,t.rawVelocity=t.note.rawRelease;else if(t.type==="noteon")this.notesState[n]=!0,t.note=new Fe(j.offsetNumber(n,this.octaveOffset+this.input.octaveOffset+H.octaveOffset),{rawAttack:r}),t.value=j.from7bitToFloat(r),t.rawValue=r,t.velocity=t.note.attack,t.rawVelocity=t.note.rawAttack;else if(t.type==="keyaftertouch")t.note=new Fe(j.offsetNumber(n,this.octaveOffset+this.input.octaveOffset+H.octaveOffset)),t.value=j.from7bitToFloat(r),t.rawValue=r,t.identifier=t.note.identifier,t.key=t.note.number,t.rawKey=n;else if(t.type==="controlchange"){t.controller={number:n,name:L.CONTROL_CHANGE_MESSAGES[n].name,description:L.CONTROL_CHANGE_MESSAGES[n].description,position:L.CONTROL_CHANGE_MESSAGES[n].position},t.subtype=t.controller.name||"controller"+n,t.value=j.from7bitToFloat(r),t.rawValue=r;const s=Object.assign({},t);s.type=`${t.type}-controller${n}`,delete s.subtype,this.emit(s.type,s);const l=Object.assign({},t);l.type=`${t.type}-`+L.CONTROL_CHANGE_MESSAGES[n].name,delete l.subtype,l.type.indexOf("controller")!==0&&this.emit(l.type,l),t.message.dataBytes[0]>=120&&this._parseChannelModeMessage(t),this.parameterNumberEventsEnabled&&this._isRpnOrNrpnController(t.message.dataBytes[0])&&this._parseEventForParameterNumber(t)}else t.type==="programchange"?(t.value=n,t.rawValue=t.value):t.type==="channelaftertouch"?(t.value=j.from7bitToFloat(n),t.rawValue=n):t.type==="pitchbend"?(t.value=((r<<7)+n-8192)/8192,t.rawValue=(r<<7)+n):t.type="unknownmessage";this.emit(t.type,t)}_parseChannelModeMessage(e){const t=Object.assign({},e);t.type=t.controller.name,t.type==="localcontrol"&&(t.value=t.message.data[2]===127,t.rawValue=t.message.data[2]),t.type==="omnimodeon"?(t.type="omnimode",t.value=!0,t.rawValue=t.message.data[2]):t.type==="omnimodeoff"&&(t.type="omnimode",t.value=!1,t.rawValue=t.message.data[2]),t.type==="monomodeon"?(t.type="monomode",t.value=!0,t.rawValue=t.message.data[2]):t.type==="polymodeon"&&(t.type="monomode",t.value=!1,t.rawValue=t.message.data[2]),this.emit(t.type,t)}_parseEventForParameterNumber(e){const t=e.message.dataBytes[0],n=e.message.dataBytes[1];t===99||t===101?(this._nrpnBuffer=[],this._rpnBuffer=[],t===99?this._nrpnBuffer=[e.message]:n!==127&&(this._rpnBuffer=[e.message])):t===98||t===100?t===98?(this._rpnBuffer=[],this._nrpnBuffer.length===1?this._nrpnBuffer.push(e.message):this._nrpnBuffer=[]):(this._nrpnBuffer=[],this._rpnBuffer.length===1&&n!==127?this._rpnBuffer.push(e.message):this._rpnBuffer=[]):(t===6||t===38||t===96||t===97)&&(this._rpnBuffer.length===2?this._dispatchParameterNumberEvent("rpn",this._rpnBuffer[0].dataBytes[1],this._rpnBuffer[1].dataBytes[1],e):this._nrpnBuffer.length===2?this._dispatchParameterNumberEvent("nrpn",this._nrpnBuffer[0].dataBytes[1],this._nrpnBuffer[1].dataBytes[1],e):(this._nrpnBuffer=[],this._rpnBuffer=[]))}_isRpnOrNrpnController(e){return e===6||e===38||e===96||e===97||e===98||e===99||e===100||e===101}_dispatchParameterNumberEvent(e,t,n,r){e=e==="nrpn"?"nrpn":"rpn";const s={target:r.target,timestamp:r.timestamp,message:r.message,parameterMsb:t,parameterLsb:n,value:j.from7bitToFloat(r.message.dataBytes[1]),rawValue:r.message.dataBytes[1]};e==="rpn"?s.parameter=Object.keys(L.REGISTERED_PARAMETERS).find(o=>L.REGISTERED_PARAMETERS[o][0]===t&&L.REGISTERED_PARAMETERS[o][1]===n):s.parameter=(t<<7)+n;const l=L.CONTROL_CHANGE_MESSAGES[r.message.dataBytes[0]].name;s.type=`${e}-${l}`,this.emit(s.type,s);const a=Object.assign({},s);a.type==="nrpn-dataincrement"?a.type="nrpn-databuttonincrement":a.type==="nrpn-datadecrement"?a.type="nrpn-databuttondecrement":a.type==="rpn-dataincrement"?a.type="rpn-databuttonincrement":a.type==="rpn-datadecrement"&&(a.type="rpn-databuttondecrement"),this.emit(a.type,a),s.type=e,s.subtype=l,this.emit(s.type,s)}getChannelModeByNumber(e){return H.validation&&(console.warn("The 'getChannelModeByNumber()' method has been moved to the 'Utilities' class."),e=Math.floor(e)),j.getChannelModeByNumber(e)}getCcNameByNumber(e){if(H.validation&&(console.warn("The 'getCcNameByNumber()' method has been moved to the 'Utilities' class."),e=parseInt(e),!(e>=0&&e<=127)))throw new RangeError("Invalid control change number.");return j.getCcNameByNumber(e)}getNoteState(e){e instanceof Fe&&(e=e.identifier);const t=j.guessNoteNumber(e,H.octaveOffset+this.input.octaveOffset+this.octaveOffset);return this.notesState[t]}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}get input(){return this._input}get number(){return this._number}get nrpnEventsEnabled(){return this.parameterNumberEventsEnabled}set nrpnEventsEnabled(e){this.validation&&(e=!!e),this.parameterNumberEventsEnabled=e}}/**
 * The `Message` class represents a single MIDI message. It has several properties that make it
 * easy to make sense of the binary data it contains.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class Sr{constructor(e){this.rawData=e,this.data=Array.from(this.rawData),this.statusByte=this.rawData[0],this.rawDataBytes=this.rawData.slice(1),this.dataBytes=this.data.slice(1),this.isChannelMessage=!1,this.isSystemMessage=!1,this.command=void 0,this.channel=void 0,this.manufacturerId=void 0,this.type=void 0,this.statusByte<240?(this.isChannelMessage=!0,this.command=this.statusByte>>4,this.channel=(this.statusByte&15)+1):(this.isSystemMessage=!0,this.command=this.statusByte),this.isChannelMessage?this.type=j.getPropertyByValue(L.CHANNEL_MESSAGES,this.command):this.isSystemMessage&&(this.type=j.getPropertyByValue(L.SYSTEM_MESSAGES,this.command)),this.statusByte===L.SYSTEM_MESSAGES.sysex&&(this.dataBytes[0]===0?(this.manufacturerId=this.dataBytes.slice(0,3),this.dataBytes=this.dataBytes.slice(3,this.rawDataBytes.length-1),this.rawDataBytes=this.rawDataBytes.slice(3,this.rawDataBytes.length-1)):(this.manufacturerId=[this.dataBytes[0]],this.dataBytes=this.dataBytes.slice(1,this.dataBytes.length-1),this.rawDataBytes=this.rawDataBytes.slice(1,this.rawDataBytes.length-1)))}}/**
 * The `Input` class represents a single MIDI input port. This object is automatically instantiated
 * by the library according to the host's MIDI subsystem and does not need to be directly
 * instantiated. Instead, you can access all `Input` objects by referring to the
 * [`WebMidi.inputs`](WebMidi#inputs) array. You can also retrieve inputs by using methods such as
 * [`WebMidi.getInputByName()`](WebMidi#getInputByName) and
 * [`WebMidi.getInputById()`](WebMidi#getInputById).
 *
 * Note that a single MIDI device may expose several inputs and/or outputs.
 *
 * **Important**: the `Input` class does not directly fire channel-specific MIDI messages
 * (such as [`noteon`](InputChannel#event:noteon) or
 * [`controlchange`](InputChannel#event:controlchange), etc.). The [`InputChannel`](InputChannel)
 * object does that. However, you can still use the
 * [`Input.addListener()`](#addListener) method to listen to channel-specific events on multiple
 * [`InputChannel`](InputChannel) objects at once.
 *
 * @fires Input#opened
 * @fires Input#disconnected
 * @fires Input#closed
 * @fires Input#midimessage
 *
 * @fires Input#sysex
 * @fires Input#timecode
 * @fires Input#songposition
 * @fires Input#songselect
 * @fires Input#tunerequest
 * @fires Input#clock
 * @fires Input#start
 * @fires Input#continue
 * @fires Input#stop
 * @fires Input#activesensing
 * @fires Input#reset
 *
 * @fires Input#unknownmidimessage
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */class Kr extends Se{constructor(e){super(),this._midiInput=e,this._octaveOffset=0,this.channels=[];for(let t=1;t<=16;t++)this.channels[t]=new Wr(this,t);this._forwarders=[],this._midiInput.onstatechange=this._onStateChange.bind(this),this._midiInput.onmidimessage=this._onMidiMessage.bind(this)}async destroy(){this.removeListener(),this.channels.forEach(e=>e.destroy()),this.channels=[],this._forwarders=[],this._midiInput&&(this._midiInput.onstatechange=null,this._midiInput.onmidimessage=null),await this.close(),this._midiInput=null}_onStateChange(e){let t={timestamp:H.time,target:this,port:this};e.port.connection==="open"?(t.type="opened",this.emit("opened",t)):e.port.connection==="closed"&&e.port.state==="connected"?(t.type="closed",this.emit("closed",t)):e.port.connection==="closed"&&e.port.state==="disconnected"?(t.type="disconnected",t.port={connection:e.port.connection,id:e.port.id,manufacturer:e.port.manufacturer,name:e.port.name,state:e.port.state,type:e.port.type},this.emit("disconnected",t)):e.port.connection==="pending"&&e.port.state==="disconnected"||console.warn("This statechange event was not caught: ",e.port.connection,e.port.state)}_onMidiMessage(e){const t=new Sr(e.data),n={port:this,target:this,message:t,timestamp:e.timeStamp,type:"midimessage",data:t.data,rawData:t.data,statusByte:t.data[0],dataBytes:t.dataBytes};this.emit("midimessage",n),t.isSystemMessage?this._parseEvent(n):t.isChannelMessage&&this.channels[t.channel]._processMidiMessageEvent(n),this._forwarders.forEach(r=>r.forward(t))}_parseEvent(e){const t=Object.assign({},e);t.type=t.message.type||"unknownmidimessage",t.type==="songselect"&&(t.song=e.data[1]+1,t.value=e.data[1],t.rawValue=t.value),this.emit(t.type,t)}async open(){try{await this._midiInput.open()}catch(e){return Promise.reject(e)}return Promise.resolve(this)}async close(){if(!this._midiInput)return Promise.resolve(this);try{await this._midiInput.close()}catch(e){return Promise.reject(e)}return Promise.resolve(this)}getChannelModeByNumber(){H.validation&&console.warn("The 'getChannelModeByNumber()' method has been moved to the 'Utilities' class.")}addListener(e,t,n={}){if(H.validation&&typeof n=="function"){let r=t!=null?[].concat(t):void 0;t=n,n={channels:r}}if(L.CHANNEL_EVENTS.includes(e)){n.channels===void 0&&(n.channels=L.MIDI_CHANNEL_NUMBERS);let r=[];return j.sanitizeChannels(n.channels).forEach(s=>{r.push(this.channels[s].addListener(e,t,n))}),r}else return super.addListener(e,t,n)}addOneTimeListener(e,t,n={}){return n.remaining=1,this.addListener(e,t,n)}on(e,t,n,r){return this.addListener(e,t,n,r)}hasListener(e,t,n={}){if(H.validation&&typeof n=="function"){let r=[].concat(t);t=n,n={channels:r}}return L.CHANNEL_EVENTS.includes(e)?(n.channels===void 0&&(n.channels=L.MIDI_CHANNEL_NUMBERS),j.sanitizeChannels(n.channels).every(r=>this.channels[r].hasListener(e,t))):super.hasListener(e,t)}removeListener(e,t,n={}){if(H.validation&&typeof n=="function"){let r=[].concat(t);t=n,n={channels:r}}if(n.channels===void 0&&(n.channels=L.MIDI_CHANNEL_NUMBERS),e==null)return j.sanitizeChannels(n.channels).forEach(r=>{this.channels[r]&&this.channels[r].removeListener()}),super.removeListener();L.CHANNEL_EVENTS.includes(e)?j.sanitizeChannels(n.channels).forEach(r=>{this.channels[r].removeListener(e,t,n)}):super.removeListener(e,t,n)}addForwarder(e,t={}){let n;return e instanceof Wt?n=e:n=new Wt(e,t),this._forwarders.push(n),n}removeForwarder(e){this._forwarders=this._forwarders.filter(t=>t!==e)}hasForwarder(e){return this._forwarders.includes(e)}get name(){return this._midiInput.name}get id(){return this._midiInput.id}get connection(){return this._midiInput.connection}get manufacturer(){return this._midiInput.manufacturer}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}get state(){return this._midiInput.state}get type(){return this._midiInput.type}get nrpnEventsEnabled(){return H.validation&&console.warn("The 'nrpnEventsEnabled' property has been moved to the 'InputChannel' class."),!1}}/**
 * The `WebMidi` object makes it easier to work with the low-level Web MIDI API. Basically, it
 * simplifies sending outgoing MIDI messages and reacting to incoming MIDI messages.
 *
 * When using the WebMidi.js library, you should know that the `WebMidi` class has already been
 * instantiated. You cannot instantiate it yourself. If you use the **IIFE** version, you should
 * simply use the global object called `WebMidi`. If you use the **CJS** (CommonJS) or **ESM** (ES6
 * module) version, you get an already-instantiated object when you import the module.
 *
 * @fires WebMidi#connected
 * @fires WebMidi#disabled
 * @fires WebMidi#disconnected
 * @fires WebMidi#enabled
 * @fires WebMidi#error
 * @fires WebMidi#midiaccessgranted
 * @fires WebMidi#portschanged
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */class Jr extends Se{constructor(){super(),this.defaults={note:{attack:j.from7bitToFloat(64),release:j.from7bitToFloat(64),duration:1/0}},this.interface=null,this.validation=!0,this._inputs=[],this._disconnectedInputs=[],this._outputs=[],this._disconnectedOutputs=[],this._stateChangeQueue=[],this._octaveOffset=0}async enable(e={},t=!1){if(j.isNode){try{window.navigator}catch{global.navigator=await Object.getPrototypeOf(async function(){}).constructor(`
        let jzz = await import("jzz");
        return jzz.default;
        `)()}try{}catch{global.performance=await Object.getPrototypeOf(async function(){}).constructor(`
        let perf_hooks = await import("perf_hooks");
        return perf_hooks.performance;
        `)()}}if(this.validation=e.validation!==!1,this.validation&&(typeof e=="function"&&(e={callback:e,sysex:t}),t&&(e.sysex=!0)),this.enabled)return typeof e.callback=="function"&&e.callback(),Promise.resolve();const n={timestamp:this.time,target:this,type:"error",error:void 0},r={timestamp:this.time,target:this,type:"midiaccessgranted"},s={timestamp:this.time,target:this,type:"enabled"};try{typeof e.requestMIDIAccessFunction=="function"?this.interface=await e.requestMIDIAccessFunction({sysex:e.sysex,software:e.software}):this.interface=await navigator.requestMIDIAccess({sysex:e.sysex,software:e.software})}catch(l){return n.error=l,this.emit("error",n),typeof e.callback=="function"&&e.callback(l),Promise.reject(l)}this.emit("midiaccessgranted",r),this.interface.onstatechange=this._onInterfaceStateChange.bind(this);try{await this._updateInputsAndOutputs()}catch(l){return n.error=l,this.emit("error",n),typeof e.callback=="function"&&e.callback(l),Promise.reject(l)}return this.emit("enabled",s),typeof e.callback=="function"&&e.callback(),Promise.resolve(this)}async disable(){return this._destroyInputsAndOutputs().then(()=>{navigator&&typeof navigator.close=="function"&&navigator.close(),this.interface&&(this.interface.onstatechange=void 0),this.interface=null;let e={timestamp:this.time,target:this,type:"disabled"};this.emit("disabled",e),this.removeListener()})}getInputById(e,t={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!e)return}if(t.disconnected){for(let n=0;n<this._disconnectedInputs.length;n++)if(this._disconnectedInputs[n].id===e.toString())return this._disconnectedInputs[n]}else for(let n=0;n<this.inputs.length;n++)if(this.inputs[n].id===e.toString())return this.inputs[n]}getInputByName(e,t={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!e)return;e=e.toString()}if(t.disconnected){for(let n=0;n<this._disconnectedInputs.length;n++)if(~this._disconnectedInputs[n].name.indexOf(e))return this._disconnectedInputs[n]}else for(let n=0;n<this.inputs.length;n++)if(~this.inputs[n].name.indexOf(e))return this.inputs[n]}getOutputByName(e,t={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!e)return;e=e.toString()}if(t.disconnected){for(let n=0;n<this._disconnectedOutputs.length;n++)if(~this._disconnectedOutputs[n].name.indexOf(e))return this._disconnectedOutputs[n]}else for(let n=0;n<this.outputs.length;n++)if(~this.outputs[n].name.indexOf(e))return this.outputs[n]}getOutputById(e,t={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!e)return}if(t.disconnected){for(let n=0;n<this._disconnectedOutputs.length;n++)if(this._disconnectedOutputs[n].id===e.toString())return this._disconnectedOutputs[n]}else for(let n=0;n<this.outputs.length;n++)if(this.outputs[n].id===e.toString())return this.outputs[n]}noteNameToNumber(e){return this.validation&&console.warn("The noteNameToNumber() method is deprecated. Use Utilities.toNoteNumber() instead."),j.toNoteNumber(e,this.octaveOffset)}getOctave(e){return this.validation&&(console.warn("The getOctave()is deprecated. Use Utilities.getNoteDetails() instead"),e=parseInt(e)),!isNaN(e)&&e>=0&&e<=127?j.getNoteDetails(j.offsetNumber(e,this.octaveOffset)).octave:!1}sanitizeChannels(e){return this.validation&&console.warn("The sanitizeChannels() method has been moved to the utilities class."),j.sanitizeChannels(e)}toMIDIChannels(e){return this.validation&&console.warn("The toMIDIChannels() method has been deprecated. Use Utilities.sanitizeChannels() instead."),j.sanitizeChannels(e)}guessNoteNumber(e){return this.validation&&console.warn("The guessNoteNumber() method has been deprecated. Use Utilities.guessNoteNumber() instead."),j.guessNoteNumber(e,this.octaveOffset)}getValidNoteArray(e,t={}){return this.validation&&console.warn("The getValidNoteArray() method has been moved to the Utilities.buildNoteArray()"),j.buildNoteArray(e,t)}convertToTimestamp(e){return this.validation&&console.warn("The convertToTimestamp() method has been moved to Utilities.toTimestamp()."),j.toTimestamp(e)}async _destroyInputsAndOutputs(){let e=[];return this.inputs.forEach(t=>e.push(t.destroy())),this.outputs.forEach(t=>e.push(t.destroy())),Promise.all(e).then(()=>{this._inputs=[],this._outputs=[]})}_onInterfaceStateChange(e){this._updateInputsAndOutputs();let t={timestamp:e.timeStamp,type:e.port.state,target:this};if(e.port.state==="connected"&&e.port.connection==="open"){e.port.type==="output"?t.port=this.getOutputById(e.port.id):e.port.type==="input"&&(t.port=this.getInputById(e.port.id)),this.emit(e.port.state,t);const n=Object.assign({},t);n.type="portschanged",this.emit(n.type,n)}else if(e.port.state==="disconnected"&&e.port.connection==="pending"){e.port.type==="input"?t.port=this.getInputById(e.port.id,{disconnected:!0}):e.port.type==="output"&&(t.port=this.getOutputById(e.port.id,{disconnected:!0})),this.emit(e.port.state,t);const n=Object.assign({},t);n.type="portschanged",this.emit(n.type,n)}}async _updateInputsAndOutputs(){return Promise.all([this._updateInputs(),this._updateOutputs()])}async _updateInputs(){if(!this.interface)return;for(let t=this._inputs.length-1;t>=0;t--){const n=this._inputs[t];Array.from(this.interface.inputs.values()).find(s=>s===n._midiInput)||(this._disconnectedInputs.push(n),this._inputs.splice(t,1))}let e=[];return this.interface.inputs.forEach(t=>{if(!this._inputs.find(n=>n._midiInput===t)){let n=this._disconnectedInputs.find(r=>r._midiInput===t);n||(n=new Kr(t)),this._inputs.push(n),e.push(n.open())}}),Promise.all(e)}async _updateOutputs(){if(!this.interface)return;for(let t=this._outputs.length-1;t>=0;t--){const n=this._outputs[t];Array.from(this.interface.outputs.values()).find(s=>s===n._midiOutput)||(this._disconnectedOutputs.push(n),this._outputs.splice(t,1))}let e=[];return this.interface.outputs.forEach(t=>{if(!this._outputs.find(n=>n._midiOutput===t)){let n=this._disconnectedOutputs.find(r=>r._midiOutput===t);n||(n=new Mt(t)),this._outputs.push(n),e.push(n.open())}}),Promise.all(e)}get enabled(){return this.interface!==null}get inputs(){return this._inputs}get isNode(){return this.validation&&console.warn("WebMidi.isNode has been deprecated. Use Utilities.isNode instead."),j.isNode}get isBrowser(){return this.validation&&console.warn("WebMidi.isBrowser has been deprecated. Use Utilities.isBrowser instead."),j.isBrowser}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}get outputs(){return this._outputs}get supported(){return typeof navigator<"u"&&navigator.requestMIDIAccess}get sysexEnabled(){return!!(this.interface&&this.interface.sysexEnabled)}get time(){return performance.now()}get version(){return"3.1.5"}get flavour(){return"esm"}get CHANNEL_EVENTS(){return this.validation&&console.warn("The CHANNEL_EVENTS enum has been moved to Enumerations.CHANNEL_EVENTS."),L.CHANNEL_EVENTS}get MIDI_SYSTEM_MESSAGES(){return this.validation&&console.warn("The MIDI_SYSTEM_MESSAGES enum has been moved to Enumerations.SYSTEM_MESSAGES."),L.SYSTEM_MESSAGES}get MIDI_CHANNEL_MODE_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MODE_MESSAGES enum has been moved to Enumerations.CHANNEL_MODE_MESSAGES."),L.CHANNEL_MODE_MESSAGES}get MIDI_CONTROL_CHANGE_MESSAGES(){return this.validation&&console.warn("The MIDI_CONTROL_CHANGE_MESSAGES enum has been replaced by the Enumerations.CONTROL_CHANGE_MESSAGES array."),L.MIDI_CONTROL_CHANGE_MESSAGES}get MIDI_REGISTERED_PARAMETER(){return this.validation&&console.warn("The MIDI_REGISTERED_PARAMETER enum has been moved to Enumerations.REGISTERED_PARAMETERS."),L.REGISTERED_PARAMETERS}get NOTES(){return this.validation&&console.warn("The NOTES enum has been deprecated."),["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"]}}const H=new Jr;H.constructor=null;const dt=(...i)=>{},yr=(i,e)=>{let t=i.faderBlink==e.faderBlink&&i.accelBlink==e.accelBlink&&i.controllerFlip==e.controllerFlip&&i.midiThru==e.midiThru&&i.midiMode==e.midiMode&&i.dxMode==e.dxMode&&i.pageNumber==e.pageNumber;("i2cLeader"in i||"i2cLeader"in e)&&(t=t&&i.i2cLeader==e.i2cLeader),("fadermax"in i||"fadermax"in e)&&(t=t&&i.faderMax==e.faderMax&&i.faderMin==e.faderMin);let n=!0,r=!0;i.usbControls.forEach((a,o)=>{const c=e.usbControls[o];(a.channel!=c.channel||a.cc!=c.cc)&&(n=!1)}),i.trsControls.forEach((a,o)=>{const c=e.trsControls[o];(a.channel!=c.channel||a.cc!=c.cc)&&(r=!1)});let s=!0,l=!0;return i.usbButtons.forEach((a,o)=>{const c=e.usbButtons[o];(a.channel!=c.channel||a.mode!=c.mode||a.paramA!=c.paramA||a.paramB!=c.paramB)&&(s=!1)}),i.trsButtons.forEach((a,o)=>{const c=e.trsButtons[o];(a.channel!=c.channel||a.mode!=c.mode||a.paramA!=c.paramA||a.paramB!=c.paramB)&&(l=!1)}),t&&n&&r&&s&&l},lt=i=>{const e=Array.from({length:116},()=>0),t=i.firmwareVersion.trim().split(".").map(E=>parseInt(E));e[0]=i.deviceId,e[1]=t[0],e[2]=t[1],e[3]=t[2],e[4]=i.faderBlink?1:0,e[5]=i.accelBlink?1:0,e[6]=i.controllerFlip?1:0,e[7]=i.i2cLeader?1:0;const n=i.faderMin>>7,r=i.faderMin-(n<<7);e[8]=r,e[9]=n;const s=i.faderMax>>7,l=i.faderMax-(s<<7);e[10]=l,e[11]=s,e[12]=i.midiThru?1:0,e[13]=i.midiMode?1:0,e[14]=i.dxMode?1:0,e[15]=i.pageNumber;const a=20,o=36,c=52,u=68;i.usbControls.forEach((E,p)=>{e[p+a]=E.channel,e[p+c]=E.cc}),i.trsControls.forEach((E,p)=>{e[p+o]=E.channel,e[p+u]=E.cc});const f=84,m=88,d=92,g=96,w=100,$=104,R=108,v=112;return i.usbButtons.forEach((E,p)=>{e[p+f]=E.channel,e[p+d]=E.mode,e[p+w]=E.paramA,e[p+R]=E.paramB}),i.trsButtons.forEach((E,p)=>{e[p+m]=E.channel,e[p+g]=E.mode,e[p+$]=E.paramA,e[p+v]=E.paramB}),e},Zr=i=>lt(i).slice(4,20),Qr=i=>{const e=lt(i),t=e.slice(20,36),n=e.slice(52,68);return t.concat(n)},xr=i=>{const e=lt(i),t=e.slice(36,52),n=e.slice(68,84);return t.concat(n)},es=i=>{const e={...i},t=ye(i.deviceId).controlCount,n=ye(i.deviceId).buttonCount;return e.usbControls=e.usbControls.splice(0,t),e.usbControls.forEach(r=>delete r.val),e.trsControls=e.trsControls.splice(0,t),e.usbButtons=e.usbButtons.splice(0,n),e.trsButtons=e.trsButtons.splice(0,n),JSON.stringify(e,null,2)},ts=(i,e)=>e.deviceId!=i.deviceId?`Cannot update - this data file is for a ${ye(e.deviceId).name}, but you are trying to install it on a ${ye(i.deviceId).name} `:!1,ns=(i,e)=>(Object.keys(e).forEach(t=>{t!=="pageNumber"&&(i[t]=e[t])}),i),rs=i=>{const t=i[5],n=i[6]+"."+i[7]+"."+i[8],r=i[1+8]==1,s=i[2+8]==1,l=i[3+8]==1,a=i[4+8]==1,o=i[5+8],u=(i[6+8]<<7)+o,f=i[7+8],d=(i[8+8]<<7)+f,g=i[9+8]==1,w=i[10+8]==1,$=i[11+8]==1,R=i[12+8],v=[],E=[],p=[],_=[];return i.slice(17+8,33+8).forEach((M,F)=>{M!=127&&(v[F]={channel:M})}),i.slice(33+8,49+8).forEach((M,F)=>{M!=127&&(E[F]={channel:M})}),i.slice(49+8,65+8).forEach((M,F)=>{M!=127&&(v[F].cc=M)}),i.slice(65+8,81+8).forEach((M,F)=>{M!=127&&(E[F].cc=M)}),i.slice(81+8,85+8).forEach((M,F)=>{M!=127&&(p[F]={channel:M})}),i.slice(85+8,89+8).forEach((M,F)=>{M!=127&&(_[F]={channel:M})}),i.slice(89+8,93+8).forEach((M,F)=>{M!=127&&(p[F].mode=M)}),i.slice(93+8,97+8).forEach((M,F)=>{M!=127&&(_[F].mode=M)}),i.slice(97+8,101+8).forEach((M,F)=>{M!=127&&(p[F].paramA=M)}),i.slice(101+8,105+8).forEach((M,F)=>{M!=127&&(_[F].paramA=M)}),i.slice(105+8,109+8).forEach((M,F)=>{M!=127&&(p[F].paramB=M)}),i.slice(109+8,113+8).forEach((M,F)=>{M!=127&&(_[F].paramB=M)}),v.forEach(M=>M.val=0),{faderBlink:r,accelBlink:s,controllerFlip:l,midiThru:g,midiMode:w,dxMode:$,usbControls:v,trsControls:E,deviceId:t,firmwareVersion:n,i2cLeader:a,faderMin:u,faderMax:d,usbButtons:p,trsButtons:_,pageNumber:R}},ye=i=>ss[i],at=(i,e)=>!!ye(i.deviceId).capabilities[e],ss=[{name:"unknown",controlCount:0,capabilities:{}},{name:"Oxion development board",controlCount:4,capabilities:{led:!0}},{name:"16n",controlCount:16,capabilities:{i2c:!0,led:!0}},{name:"16n (LC)",controlCount:16,capabilities:{i2c:!0,led:!0},sendShortMessages:!0},{name:"Music Thing 8mu",controlCount:16,buttonCount:4,capabilities:{i2c:!1,led:!0}}],we={sysexMfgId:[125,0,0],requestInfoMsg:31,updateConfigMsg:14,updateDeviceOptionsMsg:13,updateUSBOptionsMessage:12,updateTRSOptionsMessage:11},is=i=>i[1]==we.sysexMfgId[0]&&i[2]==we.sysexMfgId[1]&&i[3]==we.sysexMfgId[2],ls=(i,e)=>{ye(i.deviceId).sendShortMessages?os(i,e):as(i,e)},as=(i,e)=>{e.sendSysex(we.sysexMfgId,[we.updateConfigMsg,...lt(i)])},os=(i,e)=>{e.sendSysex(we.sysexMfgId,[we.updateDeviceOptionsMsg,...Zr(i)]),e.sendSysex(we.sysexMfgId,[we.updateUSBOptionsMessage,...Qr(i)]),e.sendSysex(we.sysexMfgId,[we.updateTRSOptionsMessage,...xr(i)])},cs=i=>{i.sendSysex(we.sysexMfgId,[we.requestInfoMsg])},ve=Re(null),ue=Re(null),Ve=Re(!1),De=Re([]),He=Re([]),je=Re(null),Pe=Re(null),Lt=Re(!1);je.subscribe(i=>{i&&(Ne(De).forEach(e=>{e.removeListener()}),Ar(i),Cr(i),ve.set(null),Bt())});Pe.subscribe(i=>{i&&(ve.set(null),Bt())});const vt=()=>H.inputs.sort(Ir),$t=()=>H.outputs.sort(Ir),Ir=(i,e)=>{const t=`${i.manufacturer} ${i.name}`,n=`${e.manufacturer} ${e.name}`;return t<n?-1:t>n?1:0},fs=()=>{Lt.set(!0),us()},us=()=>{De.set(vt()),He.set($t()),ot(),H.addListener("connected",()=>{De.set(vt()),He.set($t()),ot()}),H.addListener("disconnected",()=>{De.set(vt()),He.set($t()),je.set(null),Pe.set(null),ve.set(null),ot()}),setInterval(()=>{ot()},1e3)},ot=()=>{const i=Ne(je),e=Ne(Pe);if(!i&&Ne(De).length>0){const t=Ne(De).find(r=>r.name.match(/.*16n.*/));t&&je.set(t);const n=Ne(De).find(r=>r.name.match(/.*Music.*/));n&&je.set(n)}if(!e&&Ne(He).length>0){const t=Ne(He).find(r=>r.name.match(/.*16n.*/));t&&Pe.set(t);const n=Ne(He).find(r=>r.name.match(/.*Music.*/));n&&Pe.set(n)}i&&e&&(Ar(i),Cr(i),Bt())},hs=i=>{const e=Ne(ve);e&&(e.usbControls.forEach(t=>{t.channel==i.message.channel&&t.cc==i.controller.number&&(t.val=i.rawValue)}),ve.set(e))},Ar=i=>{i.addListener("controlchange",hs)},Cr=i=>{i.addListener("sysex",e=>{const t=e.message.data;is(t)&&t[4]==15&&(ve.set(rs(t)),dt("Received config",Ne(ve)))}),dt("Attached sysex listener to ",i.name)},Bt=()=>{const i=Ne(je),e=Ne(Pe);i&&e&&(dt("Requesting config over "+e.name),dt("Hoping to receive on "+i.name),cs(e))};function ds(i){if(i.__esModule)return i;var e=i.default;if(typeof e=="function"){var t=function n(){if(this instanceof n){var r=[null];r.push.apply(r,arguments);var s=Function.bind.apply(e,r);return new s}return e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(i).forEach(function(n){var r=Object.getOwnPropertyDescriptor(i,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return i[n]}})}),t}var Be={},ms={get exports(){return Be},set exports(i){Be=i}};const ps="2.0.0",_s=256,Es=Number.MAX_SAFE_INTEGER||9007199254740991,bs=16,gs=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var pt={MAX_LENGTH:_s,MAX_SAFE_COMPONENT_LENGTH:bs,MAX_SAFE_INTEGER:Es,RELEASE_TYPES:gs,SEMVER_SPEC_VERSION:ps,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const vs=typeof process=="object"&&process.env&&{}.NODE_DEBUG&&/\bsemver\b/i.test({}.NODE_DEBUG)?(...i)=>console.error("SEMVER",...i):()=>{};var _t=vs;(function(i,e){const{MAX_SAFE_COMPONENT_LENGTH:t}=pt,n=_t;e=i.exports={};const r=e.re=[],s=e.src=[],l=e.t={};let a=0;const o=(c,u,f)=>{const m=a++;n(c,m,u),l[c]=m,s[m]=u,r[m]=new RegExp(u,f?"g":void 0)};o("NUMERICIDENTIFIER","0|[1-9]\\d*"),o("NUMERICIDENTIFIERLOOSE","[0-9]+"),o("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),o("MAINVERSION",`(${s[l.NUMERICIDENTIFIER]})\\.(${s[l.NUMERICIDENTIFIER]})\\.(${s[l.NUMERICIDENTIFIER]})`),o("MAINVERSIONLOOSE",`(${s[l.NUMERICIDENTIFIERLOOSE]})\\.(${s[l.NUMERICIDENTIFIERLOOSE]})\\.(${s[l.NUMERICIDENTIFIERLOOSE]})`),o("PRERELEASEIDENTIFIER",`(?:${s[l.NUMERICIDENTIFIER]}|${s[l.NONNUMERICIDENTIFIER]})`),o("PRERELEASEIDENTIFIERLOOSE",`(?:${s[l.NUMERICIDENTIFIERLOOSE]}|${s[l.NONNUMERICIDENTIFIER]})`),o("PRERELEASE",`(?:-(${s[l.PRERELEASEIDENTIFIER]}(?:\\.${s[l.PRERELEASEIDENTIFIER]})*))`),o("PRERELEASELOOSE",`(?:-?(${s[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${s[l.PRERELEASEIDENTIFIERLOOSE]})*))`),o("BUILDIDENTIFIER","[0-9A-Za-z-]+"),o("BUILD",`(?:\\+(${s[l.BUILDIDENTIFIER]}(?:\\.${s[l.BUILDIDENTIFIER]})*))`),o("FULLPLAIN",`v?${s[l.MAINVERSION]}${s[l.PRERELEASE]}?${s[l.BUILD]}?`),o("FULL",`^${s[l.FULLPLAIN]}$`),o("LOOSEPLAIN",`[v=\\s]*${s[l.MAINVERSIONLOOSE]}${s[l.PRERELEASELOOSE]}?${s[l.BUILD]}?`),o("LOOSE",`^${s[l.LOOSEPLAIN]}$`),o("GTLT","((?:<|>)?=?)"),o("XRANGEIDENTIFIERLOOSE",`${s[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),o("XRANGEIDENTIFIER",`${s[l.NUMERICIDENTIFIER]}|x|X|\\*`),o("XRANGEPLAIN",`[v=\\s]*(${s[l.XRANGEIDENTIFIER]})(?:\\.(${s[l.XRANGEIDENTIFIER]})(?:\\.(${s[l.XRANGEIDENTIFIER]})(?:${s[l.PRERELEASE]})?${s[l.BUILD]}?)?)?`),o("XRANGEPLAINLOOSE",`[v=\\s]*(${s[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${s[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${s[l.XRANGEIDENTIFIERLOOSE]})(?:${s[l.PRERELEASELOOSE]})?${s[l.BUILD]}?)?)?`),o("XRANGE",`^${s[l.GTLT]}\\s*${s[l.XRANGEPLAIN]}$`),o("XRANGELOOSE",`^${s[l.GTLT]}\\s*${s[l.XRANGEPLAINLOOSE]}$`),o("COERCE",`(^|[^\\d])(\\d{1,${t}})(?:\\.(\\d{1,${t}}))?(?:\\.(\\d{1,${t}}))?(?:$|[^\\d])`),o("COERCERTL",s[l.COERCE],!0),o("LONETILDE","(?:~>?)"),o("TILDETRIM",`(\\s*)${s[l.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",o("TILDE",`^${s[l.LONETILDE]}${s[l.XRANGEPLAIN]}$`),o("TILDELOOSE",`^${s[l.LONETILDE]}${s[l.XRANGEPLAINLOOSE]}$`),o("LONECARET","(?:\\^)"),o("CARETTRIM",`(\\s*)${s[l.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",o("CARET",`^${s[l.LONECARET]}${s[l.XRANGEPLAIN]}$`),o("CARETLOOSE",`^${s[l.LONECARET]}${s[l.XRANGEPLAINLOOSE]}$`),o("COMPARATORLOOSE",`^${s[l.GTLT]}\\s*(${s[l.LOOSEPLAIN]})$|^$`),o("COMPARATOR",`^${s[l.GTLT]}\\s*(${s[l.FULLPLAIN]})$|^$`),o("COMPARATORTRIM",`(\\s*)${s[l.GTLT]}\\s*(${s[l.LOOSEPLAIN]}|${s[l.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",o("HYPHENRANGE",`^\\s*(${s[l.XRANGEPLAIN]})\\s+-\\s+(${s[l.XRANGEPLAIN]})\\s*$`),o("HYPHENRANGELOOSE",`^\\s*(${s[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${s[l.XRANGEPLAINLOOSE]})\\s*$`),o("STAR","(<|>)?=?\\s*\\*"),o("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),o("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(ms,Be);const $s=Object.freeze({loose:!0}),Ns=Object.freeze({}),ws=i=>i?typeof i!="object"?$s:i:Ns;var Dt=ws;const Kt=/^[0-9]+$/,Rr=(i,e)=>{const t=Kt.test(i),n=Kt.test(e);return t&&n&&(i=+i,e=+e),i===e?0:t&&!n?-1:n&&!t?1:i<e?-1:1},Ss=(i,e)=>Rr(e,i);var Tr={compareIdentifiers:Rr,rcompareIdentifiers:Ss};const ys={},Is=Object.freeze(Object.defineProperty({__proto__:null,default:ys},Symbol.toStringTag,{value:"Module"})),As=ds(Is),ct=_t,{MAX_LENGTH:Jt,MAX_SAFE_INTEGER:ft}=pt,{re:Zt,t:Qt}=Be,Cs=Dt,{compareIdentifiers:Ue}=Tr;let Rs=class Ce{constructor(e,t){if(t=Cs(t),e instanceof Ce){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid Version: ${As.inspect(e)}`);if(e.length>Jt)throw new TypeError(`version is longer than ${Jt} characters`);ct("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const n=e.trim().match(t.loose?Zt[Qt.LOOSE]:Zt[Qt.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>ft||this.major<0)throw new TypeError("Invalid major version");if(this.minor>ft||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>ft||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(r=>{if(/^[0-9]+$/.test(r)){const s=+r;if(s>=0&&s<ft)return s}return r}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(ct("SemVer.compare",this.version,this.options,e),!(e instanceof Ce)){if(typeof e=="string"&&e===this.version)return 0;e=new Ce(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof Ce||(e=new Ce(e,this.options)),Ue(this.major,e.major)||Ue(this.minor,e.minor)||Ue(this.patch,e.patch)}comparePre(e){if(e instanceof Ce||(e=new Ce(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const n=this.prerelease[t],r=e.prerelease[t];if(ct("prerelease compare",t,n,r),n===void 0&&r===void 0)return 0;if(r===void 0)return 1;if(n===void 0)return-1;if(n===r)continue;return Ue(n,r)}while(++t)}compareBuild(e){e instanceof Ce||(e=new Ce(e,this.options));let t=0;do{const n=this.build[t],r=e.build[t];if(ct("prerelease compare",t,n,r),n===void 0&&r===void 0)return 0;if(r===void 0)return 1;if(n===void 0)return-1;if(n===r)continue;return Ue(n,r)}while(++t)}inc(e,t,n){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,n),this.inc("pre",t,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t,n),this.inc("pre",t,n);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const r=Number(n)?1:0;if(!t&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[r];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(t===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(r)}}if(t){let s=[t,r];n===!1&&(s=[t]),Ue(this.prerelease[0],t)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}};var $e=Rs;const xt=$e,Ts=(i,e,t=!1)=>{if(i instanceof xt)return i;try{return new xt(i,e)}catch(n){if(!t)return null;throw n}};var Ze=Ts;const Ms=Ze,Os=(i,e)=>{const t=Ms(i,e);return t?t.version:null};var ks=Os;const Ls=Ze,Bs=(i,e)=>{const t=Ls(i.trim().replace(/^[=v]+/,""),e);return t?t.version:null};var Ds=Bs;const en=$e,Ps=(i,e,t,n,r)=>{typeof t=="string"&&(r=n,n=t,t=void 0);try{return new en(i instanceof en?i.version:i,t).inc(e,n,r).version}catch{return null}};var Us=Ps;const tn=Ze,Gs=(i,e)=>{const t=tn(i,null,!0),n=tn(e,null,!0),r=t.compare(n);if(r===0)return null;const s=r>0,l=s?t:n,a=s?n:t,o=!!l.prerelease.length,c=o?"pre":"";return t.major!==n.major?c+"major":t.minor!==n.minor?c+"minor":t.patch!==n.patch?c+"patch":o?"prerelease":a.patch?"patch":a.minor?"minor":"major"};var Fs=Gs;const Vs=$e,Hs=(i,e)=>new Vs(i,e).major;var js=Hs;const qs=$e,zs=(i,e)=>new qs(i,e).minor;var Ys=zs;const Xs=$e,Ws=(i,e)=>new Xs(i,e).patch;var Ks=Ws;const Js=Ze,Zs=(i,e)=>{const t=Js(i,e);return t&&t.prerelease.length?t.prerelease:null};var Qs=Zs;const nn=$e,xs=(i,e,t)=>new nn(i,t).compare(new nn(e,t));var Ie=xs;const ei=Ie,ti=(i,e,t)=>ei(e,i,t);var ni=ti;const ri=Ie,si=(i,e)=>ri(i,e,!0);var ii=si;const rn=$e,li=(i,e,t)=>{const n=new rn(i,t),r=new rn(e,t);return n.compare(r)||n.compareBuild(r)};var Pt=li;const ai=Pt,oi=(i,e)=>i.sort((t,n)=>ai(t,n,e));var ci=oi;const fi=Pt,ui=(i,e)=>i.sort((t,n)=>fi(n,t,e));var hi=ui;const di=Ie,mi=(i,e,t)=>di(i,e,t)>0;var Et=mi;const pi=Ie,_i=(i,e,t)=>pi(i,e,t)<0;var Ut=_i;const Ei=Ie,bi=(i,e,t)=>Ei(i,e,t)===0;var Mr=bi;const gi=Ie,vi=(i,e,t)=>gi(i,e,t)!==0;var Or=vi;const $i=Ie,Ni=(i,e,t)=>$i(i,e,t)>=0;var Gt=Ni;const wi=Ie,Si=(i,e,t)=>wi(i,e,t)<=0;var Ft=Si;const yi=Mr,Ii=Or,Ai=Et,Ci=Gt,Ri=Ut,Ti=Ft,Mi=(i,e,t,n)=>{switch(e){case"===":return typeof i=="object"&&(i=i.version),typeof t=="object"&&(t=t.version),i===t;case"!==":return typeof i=="object"&&(i=i.version),typeof t=="object"&&(t=t.version),i!==t;case"":case"=":case"==":return yi(i,t,n);case"!=":return Ii(i,t,n);case">":return Ai(i,t,n);case">=":return Ci(i,t,n);case"<":return Ri(i,t,n);case"<=":return Ti(i,t,n);default:throw new TypeError(`Invalid operator: ${e}`)}};var kr=Mi;const Oi=$e,ki=Ze,{re:ut,t:ht}=Be,Li=(i,e)=>{if(i instanceof Oi)return i;if(typeof i=="number"&&(i=String(i)),typeof i!="string")return null;e=e||{};let t=null;if(!e.rtl)t=i.match(ut[ht.COERCE]);else{let n;for(;(n=ut[ht.COERCERTL].exec(i))&&(!t||t.index+t[0].length!==i.length);)(!t||n.index+n[0].length!==t.index+t[0].length)&&(t=n),ut[ht.COERCERTL].lastIndex=n.index+n[1].length+n[2].length;ut[ht.COERCERTL].lastIndex=-1}return t===null?null:ki(`${t[2]}.${t[3]||"0"}.${t[4]||"0"}`,e)};var Bi=Li,Nt,sn;function Di(){return sn||(sn=1,Nt=function(i){i.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}),Nt}var wt,ln;function Pi(){if(ln)return wt;ln=1,wt=i,i.Node=r,i.create=i;function i(s){var l=this;if(l instanceof i||(l=new i),l.tail=null,l.head=null,l.length=0,s&&typeof s.forEach=="function")s.forEach(function(c){l.push(c)});else if(arguments.length>0)for(var a=0,o=arguments.length;a<o;a++)l.push(arguments[a]);return l}i.prototype.removeNode=function(s){if(s.list!==this)throw new Error("removing node which does not belong to this list");var l=s.next,a=s.prev;return l&&(l.prev=a),a&&(a.next=l),s===this.head&&(this.head=l),s===this.tail&&(this.tail=a),s.list.length--,s.next=null,s.prev=null,s.list=null,l},i.prototype.unshiftNode=function(s){if(s!==this.head){s.list&&s.list.removeNode(s);var l=this.head;s.list=this,s.next=l,l&&(l.prev=s),this.head=s,this.tail||(this.tail=s),this.length++}},i.prototype.pushNode=function(s){if(s!==this.tail){s.list&&s.list.removeNode(s);var l=this.tail;s.list=this,s.prev=l,l&&(l.next=s),this.tail=s,this.head||(this.head=s),this.length++}},i.prototype.push=function(){for(var s=0,l=arguments.length;s<l;s++)t(this,arguments[s]);return this.length},i.prototype.unshift=function(){for(var s=0,l=arguments.length;s<l;s++)n(this,arguments[s]);return this.length},i.prototype.pop=function(){if(this.tail){var s=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,s}},i.prototype.shift=function(){if(this.head){var s=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,s}},i.prototype.forEach=function(s,l){l=l||this;for(var a=this.head,o=0;a!==null;o++)s.call(l,a.value,o,this),a=a.next},i.prototype.forEachReverse=function(s,l){l=l||this;for(var a=this.tail,o=this.length-1;a!==null;o--)s.call(l,a.value,o,this),a=a.prev},i.prototype.get=function(s){for(var l=0,a=this.head;a!==null&&l<s;l++)a=a.next;if(l===s&&a!==null)return a.value},i.prototype.getReverse=function(s){for(var l=0,a=this.tail;a!==null&&l<s;l++)a=a.prev;if(l===s&&a!==null)return a.value},i.prototype.map=function(s,l){l=l||this;for(var a=new i,o=this.head;o!==null;)a.push(s.call(l,o.value,this)),o=o.next;return a},i.prototype.mapReverse=function(s,l){l=l||this;for(var a=new i,o=this.tail;o!==null;)a.push(s.call(l,o.value,this)),o=o.prev;return a},i.prototype.reduce=function(s,l){var a,o=this.head;if(arguments.length>1)a=l;else if(this.head)o=this.head.next,a=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var c=0;o!==null;c++)a=s(a,o.value,c),o=o.next;return a},i.prototype.reduceReverse=function(s,l){var a,o=this.tail;if(arguments.length>1)a=l;else if(this.tail)o=this.tail.prev,a=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var c=this.length-1;o!==null;c--)a=s(a,o.value,c),o=o.prev;return a},i.prototype.toArray=function(){for(var s=new Array(this.length),l=0,a=this.head;a!==null;l++)s[l]=a.value,a=a.next;return s},i.prototype.toArrayReverse=function(){for(var s=new Array(this.length),l=0,a=this.tail;a!==null;l++)s[l]=a.value,a=a.prev;return s},i.prototype.slice=function(s,l){l=l||this.length,l<0&&(l+=this.length),s=s||0,s<0&&(s+=this.length);var a=new i;if(l<s||l<0)return a;s<0&&(s=0),l>this.length&&(l=this.length);for(var o=0,c=this.head;c!==null&&o<s;o++)c=c.next;for(;c!==null&&o<l;o++,c=c.next)a.push(c.value);return a},i.prototype.sliceReverse=function(s,l){l=l||this.length,l<0&&(l+=this.length),s=s||0,s<0&&(s+=this.length);var a=new i;if(l<s||l<0)return a;s<0&&(s=0),l>this.length&&(l=this.length);for(var o=this.length,c=this.tail;c!==null&&o>l;o--)c=c.prev;for(;c!==null&&o>s;o--,c=c.prev)a.push(c.value);return a},i.prototype.splice=function(s,l,...a){s>this.length&&(s=this.length-1),s<0&&(s=this.length+s);for(var o=0,c=this.head;c!==null&&o<s;o++)c=c.next;for(var u=[],o=0;c&&o<l;o++)u.push(c.value),c=this.removeNode(c);c===null&&(c=this.tail),c!==this.head&&c!==this.tail&&(c=c.prev);for(var o=0;o<a.length;o++)c=e(this,c,a[o]);return u},i.prototype.reverse=function(){for(var s=this.head,l=this.tail,a=s;a!==null;a=a.prev){var o=a.prev;a.prev=a.next,a.next=o}return this.head=l,this.tail=s,this};function e(s,l,a){var o=l===s.head?new r(a,null,l,s):new r(a,l,l.next,s);return o.next===null&&(s.tail=o),o.prev===null&&(s.head=o),s.length++,o}function t(s,l){s.tail=new r(l,s.tail,null,s),s.head||(s.head=s.tail),s.length++}function n(s,l){s.head=new r(l,null,s.head,s),s.tail||(s.tail=s.head),s.length++}function r(s,l,a,o){if(!(this instanceof r))return new r(s,l,a,o);this.list=o,this.value=s,l?(l.next=this,this.prev=l):this.prev=null,a?(a.prev=this,this.next=a):this.next=null}try{Di()(i)}catch{}return wt}var St,an;function Ui(){if(an)return St;an=1;const i=Pi(),e=Symbol("max"),t=Symbol("length"),n=Symbol("lengthCalculator"),r=Symbol("allowStale"),s=Symbol("maxAge"),l=Symbol("dispose"),a=Symbol("noDisposeOnSet"),o=Symbol("lruList"),c=Symbol("cache"),u=Symbol("updateAgeOnGet"),f=()=>1;class m{constructor(p){if(typeof p=="number"&&(p={max:p}),p||(p={}),p.max&&(typeof p.max!="number"||p.max<0))throw new TypeError("max must be a non-negative number");this[e]=p.max||1/0;const _=p.length||f;if(this[n]=typeof _!="function"?f:_,this[r]=p.stale||!1,p.maxAge&&typeof p.maxAge!="number")throw new TypeError("maxAge must be a number");this[s]=p.maxAge||0,this[l]=p.dispose,this[a]=p.noDisposeOnSet||!1,this[u]=p.updateAgeOnGet||!1,this.reset()}set max(p){if(typeof p!="number"||p<0)throw new TypeError("max must be a non-negative number");this[e]=p||1/0,w(this)}get max(){return this[e]}set allowStale(p){this[r]=!!p}get allowStale(){return this[r]}set maxAge(p){if(typeof p!="number")throw new TypeError("maxAge must be a non-negative number");this[s]=p,w(this)}get maxAge(){return this[s]}set lengthCalculator(p){typeof p!="function"&&(p=f),p!==this[n]&&(this[n]=p,this[t]=0,this[o].forEach(_=>{_.length=this[n](_.value,_.key),this[t]+=_.length})),w(this)}get lengthCalculator(){return this[n]}get length(){return this[t]}get itemCount(){return this[o].length}rforEach(p,_){_=_||this;for(let M=this[o].tail;M!==null;){const F=M.prev;v(this,p,M,_),M=F}}forEach(p,_){_=_||this;for(let M=this[o].head;M!==null;){const F=M.next;v(this,p,M,_),M=F}}keys(){return this[o].toArray().map(p=>p.key)}values(){return this[o].toArray().map(p=>p.value)}reset(){this[l]&&this[o]&&this[o].length&&this[o].forEach(p=>this[l](p.key,p.value)),this[c]=new Map,this[o]=new i,this[t]=0}dump(){return this[o].map(p=>g(this,p)?!1:{k:p.key,v:p.value,e:p.now+(p.maxAge||0)}).toArray().filter(p=>p)}dumpLru(){return this[o]}set(p,_,M){if(M=M||this[s],M&&typeof M!="number")throw new TypeError("maxAge must be a number");const F=M?Date.now():0,W=this[n](_,p);if(this[c].has(p)){if(W>this[e])return $(this,this[c].get(p)),!1;const z=this[c].get(p).value;return this[l]&&(this[a]||this[l](p,z.value)),z.now=F,z.maxAge=M,z.value=_,this[t]+=W-z.length,z.length=W,this.get(p),w(this),!0}const G=new R(p,_,W,F,M);return G.length>this[e]?(this[l]&&this[l](p,_),!1):(this[t]+=G.length,this[o].unshift(G),this[c].set(p,this[o].head),w(this),!0)}has(p){if(!this[c].has(p))return!1;const _=this[c].get(p).value;return!g(this,_)}get(p){return d(this,p,!0)}peek(p){return d(this,p,!1)}pop(){const p=this[o].tail;return p?($(this,p),p.value):null}del(p){$(this,this[c].get(p))}load(p){this.reset();const _=Date.now();for(let M=p.length-1;M>=0;M--){const F=p[M],W=F.e||0;if(W===0)this.set(F.k,F.v);else{const G=W-_;G>0&&this.set(F.k,F.v,G)}}}prune(){this[c].forEach((p,_)=>d(this,_,!1))}}const d=(E,p,_)=>{const M=E[c].get(p);if(M){const F=M.value;if(g(E,F)){if($(E,M),!E[r])return}else _&&(E[u]&&(M.value.now=Date.now()),E[o].unshiftNode(M));return F.value}},g=(E,p)=>{if(!p||!p.maxAge&&!E[s])return!1;const _=Date.now()-p.now;return p.maxAge?_>p.maxAge:E[s]&&_>E[s]},w=E=>{if(E[t]>E[e])for(let p=E[o].tail;E[t]>E[e]&&p!==null;){const _=p.prev;$(E,p),p=_}},$=(E,p)=>{if(p){const _=p.value;E[l]&&E[l](_.key,_.value),E[t]-=_.length,E[c].delete(_.key),E[o].removeNode(p)}};class R{constructor(p,_,M,F,W){this.key=p,this.value=_,this.length=M,this.now=F,this.maxAge=W||0}}const v=(E,p,_,M)=>{let F=_.value;g(E,F)&&($(E,_),E[r]||(F=void 0)),F&&p.call(M,F.value,F.key,E)};return St=m,St}var yt,on;function Ae(){if(on)return yt;on=1;class i{constructor(T,q){if(q=n(q),T instanceof i)return T.loose===!!q.loose&&T.includePrerelease===!!q.includePrerelease?T:new i(T.raw,q);if(T instanceof r)return this.raw=T.value,this.set=[[T]],this.format(),this;if(this.options=q,this.loose=!!q.loose,this.includePrerelease=!!q.includePrerelease,this.raw=T,this.set=T.split("||").map(S=>this.parseRange(S.trim())).filter(S=>S.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${T}`);if(this.set.length>1){const S=this.set[0];if(this.set=this.set.filter(B=>!g(B[0])),this.set.length===0)this.set=[S];else if(this.set.length>1){for(const B of this.set)if(B.length===1&&w(B[0])){this.set=[B];break}}}this.format()}format(){return this.range=this.set.map(T=>T.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(T){T=T.trim();const S=((this.options.includePrerelease&&m)|(this.options.loose&&d))+":"+T,B=t.get(S);if(B)return B;const V=this.options.loose,X=V?a[o.HYPHENRANGELOOSE]:a[o.HYPHENRANGE];T=T.replace(X,z(this.options.includePrerelease)),s("hyphen replace",T),T=T.replace(a[o.COMPARATORTRIM],c),s("comparator trim",T),T=T.replace(a[o.TILDETRIM],u),T=T.replace(a[o.CARETTRIM],f),T=T.split(/\s+/).join(" ");let ne=T.split(" ").map(he=>R(he,this.options)).join(" ").split(/\s+/).map(he=>Y(he,this.options));V&&(ne=ne.filter(he=>(s("loose invalid filter",he,this.options),!!he.match(a[o.COMPARATORLOOSE])))),s("range list",ne);const te=new Map,re=ne.map(he=>new r(he,this.options));for(const he of re){if(g(he))return[he];te.set(he.value,he)}te.size>1&&te.has("")&&te.delete("");const de=[...te.values()];return t.set(S,de),de}intersects(T,q){if(!(T instanceof i))throw new TypeError("a Range is required");return this.set.some(S=>$(S,q)&&T.set.some(B=>$(B,q)&&S.every(V=>B.every(X=>V.intersects(X,q)))))}test(T){if(!T)return!1;if(typeof T=="string")try{T=new l(T,this.options)}catch{return!1}for(let q=0;q<this.set.length;q++)if(ce(this.set[q],T,this.options))return!0;return!1}}yt=i;const e=Ui(),t=new e({max:1e3}),n=Dt,r=bt(),s=_t,l=$e,{re:a,t:o,comparatorTrimReplace:c,tildeTrimReplace:u,caretTrimReplace:f}=Be,{FLAG_INCLUDE_PRERELEASE:m,FLAG_LOOSE:d}=pt,g=I=>I.value==="<0.0.0-0",w=I=>I.value==="",$=(I,T)=>{let q=!0;const S=I.slice();let B=S.pop();for(;q&&S.length;)q=S.every(V=>B.intersects(V,T)),B=S.pop();return q},R=(I,T)=>(s("comp",I,T),I=_(I,T),s("caret",I),I=E(I,T),s("tildes",I),I=F(I,T),s("xrange",I),I=G(I,T),s("stars",I),I),v=I=>!I||I.toLowerCase()==="x"||I==="*",E=(I,T)=>I.trim().split(/\s+/).map(q=>p(q,T)).join(" "),p=(I,T)=>{const q=T.loose?a[o.TILDELOOSE]:a[o.TILDE];return I.replace(q,(S,B,V,X,ne)=>{s("tilde",I,S,B,V,X,ne);let te;return v(B)?te="":v(V)?te=`>=${B}.0.0 <${+B+1}.0.0-0`:v(X)?te=`>=${B}.${V}.0 <${B}.${+V+1}.0-0`:ne?(s("replaceTilde pr",ne),te=`>=${B}.${V}.${X}-${ne} <${B}.${+V+1}.0-0`):te=`>=${B}.${V}.${X} <${B}.${+V+1}.0-0`,s("tilde return",te),te})},_=(I,T)=>I.trim().split(/\s+/).map(q=>M(q,T)).join(" "),M=(I,T)=>{s("caret",I,T);const q=T.loose?a[o.CARETLOOSE]:a[o.CARET],S=T.includePrerelease?"-0":"";return I.replace(q,(B,V,X,ne,te)=>{s("caret",I,B,V,X,ne,te);let re;return v(V)?re="":v(X)?re=`>=${V}.0.0${S} <${+V+1}.0.0-0`:v(ne)?V==="0"?re=`>=${V}.${X}.0${S} <${V}.${+X+1}.0-0`:re=`>=${V}.${X}.0${S} <${+V+1}.0.0-0`:te?(s("replaceCaret pr",te),V==="0"?X==="0"?re=`>=${V}.${X}.${ne}-${te} <${V}.${X}.${+ne+1}-0`:re=`>=${V}.${X}.${ne}-${te} <${V}.${+X+1}.0-0`:re=`>=${V}.${X}.${ne}-${te} <${+V+1}.0.0-0`):(s("no pr"),V==="0"?X==="0"?re=`>=${V}.${X}.${ne}${S} <${V}.${X}.${+ne+1}-0`:re=`>=${V}.${X}.${ne}${S} <${V}.${+X+1}.0-0`:re=`>=${V}.${X}.${ne} <${+V+1}.0.0-0`),s("caret return",re),re})},F=(I,T)=>(s("replaceXRanges",I,T),I.split(/\s+/).map(q=>W(q,T)).join(" ")),W=(I,T)=>{I=I.trim();const q=T.loose?a[o.XRANGELOOSE]:a[o.XRANGE];return I.replace(q,(S,B,V,X,ne,te)=>{s("xRange",I,S,B,V,X,ne,te);const re=v(V),de=re||v(X),he=de||v(ne),Qe=he;return B==="="&&Qe&&(B=""),te=T.includePrerelease?"-0":"",re?B===">"||B==="<"?S="<0.0.0-0":S="*":B&&Qe?(de&&(X=0),ne=0,B===">"?(B=">=",de?(V=+V+1,X=0,ne=0):(X=+X+1,ne=0)):B==="<="&&(B="<",de?V=+V+1:X=+X+1),B==="<"&&(te="-0"),S=`${B+V}.${X}.${ne}${te}`):de?S=`>=${V}.0.0${te} <${+V+1}.0.0-0`:he&&(S=`>=${V}.${X}.0${te} <${V}.${+X+1}.0-0`),s("xRange return",S),S})},G=(I,T)=>(s("replaceStars",I,T),I.trim().replace(a[o.STAR],"")),Y=(I,T)=>(s("replaceGTE0",I,T),I.trim().replace(a[T.includePrerelease?o.GTE0PRE:o.GTE0],"")),z=I=>(T,q,S,B,V,X,ne,te,re,de,he,Qe,ic)=>(v(S)?q="":v(B)?q=`>=${S}.0.0${I?"-0":""}`:v(V)?q=`>=${S}.${B}.0${I?"-0":""}`:X?q=`>=${q}`:q=`>=${q}${I?"-0":""}`,v(re)?te="":v(de)?te=`<${+re+1}.0.0-0`:v(he)?te=`<${re}.${+de+1}.0-0`:Qe?te=`<=${re}.${de}.${he}-${Qe}`:I?te=`<${re}.${de}.${+he+1}-0`:te=`<=${te}`,`${q} ${te}`.trim()),ce=(I,T,q)=>{for(let S=0;S<I.length;S++)if(!I[S].test(T))return!1;if(T.prerelease.length&&!q.includePrerelease){for(let S=0;S<I.length;S++)if(s(I[S].semver),I[S].semver!==r.ANY&&I[S].semver.prerelease.length>0){const B=I[S].semver;if(B.major===T.major&&B.minor===T.minor&&B.patch===T.patch)return!0}return!1}return!0};return yt}var It,cn;function bt(){if(cn)return It;cn=1;const i=Symbol("SemVer ANY");class e{static get ANY(){return i}constructor(u,f){if(f=t(f),u instanceof e){if(u.loose===!!f.loose)return u;u=u.value}l("comparator",u,f),this.options=f,this.loose=!!f.loose,this.parse(u),this.semver===i?this.value="":this.value=this.operator+this.semver.version,l("comp",this)}parse(u){const f=this.options.loose?n[r.COMPARATORLOOSE]:n[r.COMPARATOR],m=u.match(f);if(!m)throw new TypeError(`Invalid comparator: ${u}`);this.operator=m[1]!==void 0?m[1]:"",this.operator==="="&&(this.operator=""),m[2]?this.semver=new a(m[2],this.options.loose):this.semver=i}toString(){return this.value}test(u){if(l("Comparator.test",u,this.options.loose),this.semver===i||u===i)return!0;if(typeof u=="string")try{u=new a(u,this.options)}catch{return!1}return s(u,this.operator,this.semver,this.options)}intersects(u,f){if(!(u instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new o(u.value,f).test(this.value):u.operator===""?u.value===""?!0:new o(this.value,f).test(u.semver):(f=t(f),f.includePrerelease&&(this.value==="<0.0.0-0"||u.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||u.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&u.operator.startsWith(">")||this.operator.startsWith("<")&&u.operator.startsWith("<")||this.semver.version===u.semver.version&&this.operator.includes("=")&&u.operator.includes("=")||s(this.semver,"<",u.semver,f)&&this.operator.startsWith(">")&&u.operator.startsWith("<")||s(this.semver,">",u.semver,f)&&this.operator.startsWith("<")&&u.operator.startsWith(">")))}}It=e;const t=Dt,{re:n,t:r}=Be,s=kr,l=_t,a=$e,o=Ae();return It}const Gi=Ae(),Fi=(i,e,t)=>{try{e=new Gi(e,t)}catch{return!1}return e.test(i)};var gt=Fi;const Vi=Ae(),Hi=(i,e)=>new Vi(i,e).set.map(t=>t.map(n=>n.value).join(" ").trim().split(" "));var ji=Hi;const qi=$e,zi=Ae(),Yi=(i,e,t)=>{let n=null,r=null,s=null;try{s=new zi(e,t)}catch{return null}return i.forEach(l=>{s.test(l)&&(!n||r.compare(l)===-1)&&(n=l,r=new qi(n,t))}),n};var Xi=Yi;const Wi=$e,Ki=Ae(),Ji=(i,e,t)=>{let n=null,r=null,s=null;try{s=new Ki(e,t)}catch{return null}return i.forEach(l=>{s.test(l)&&(!n||r.compare(l)===1)&&(n=l,r=new Wi(n,t))}),n};var Zi=Ji;const At=$e,Qi=Ae(),fn=Et,xi=(i,e)=>{i=new Qi(i,e);let t=new At("0.0.0");if(i.test(t)||(t=new At("0.0.0-0"),i.test(t)))return t;t=null;for(let n=0;n<i.set.length;++n){const r=i.set[n];let s=null;r.forEach(l=>{const a=new At(l.semver.version);switch(l.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!s||fn(a,s))&&(s=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${l.operator}`)}}),s&&(!t||fn(t,s))&&(t=s)}return t&&i.test(t)?t:null};var el=xi;const tl=Ae(),nl=(i,e)=>{try{return new tl(i,e).range||"*"}catch{return null}};var rl=nl;const sl=$e,Lr=bt(),{ANY:il}=Lr,ll=Ae(),al=gt,un=Et,hn=Ut,ol=Ft,cl=Gt,fl=(i,e,t,n)=>{i=new sl(i,n),e=new ll(e,n);let r,s,l,a,o;switch(t){case">":r=un,s=ol,l=hn,a=">",o=">=";break;case"<":r=hn,s=cl,l=un,a="<",o="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(al(i,e,n))return!1;for(let c=0;c<e.set.length;++c){const u=e.set[c];let f=null,m=null;if(u.forEach(d=>{d.semver===il&&(d=new Lr(">=0.0.0")),f=f||d,m=m||d,r(d.semver,f.semver,n)?f=d:l(d.semver,m.semver,n)&&(m=d)}),f.operator===a||f.operator===o||(!m.operator||m.operator===a)&&s(i,m.semver))return!1;if(m.operator===o&&l(i,m.semver))return!1}return!0};var Vt=fl;const ul=Vt,hl=(i,e,t)=>ul(i,e,">",t);var dl=hl;const ml=Vt,pl=(i,e,t)=>ml(i,e,"<",t);var _l=pl;const dn=Ae(),El=(i,e,t)=>(i=new dn(i,t),e=new dn(e,t),i.intersects(e,t));var bl=El;const gl=gt,vl=Ie;var $l=(i,e,t)=>{const n=[];let r=null,s=null;const l=i.sort((u,f)=>vl(u,f,t));for(const u of l)gl(u,e,t)?(s=u,r||(r=u)):(s&&n.push([r,s]),s=null,r=null);r&&n.push([r,null]);const a=[];for(const[u,f]of n)u===f?a.push(u):!f&&u===l[0]?a.push("*"):f?u===l[0]?a.push(`<=${f}`):a.push(`${u} - ${f}`):a.push(`>=${u}`);const o=a.join(" || "),c=typeof e.raw=="string"?e.raw:String(e);return o.length<c.length?o:e};const mn=Ae(),Ht=bt(),{ANY:Ct}=Ht,xe=gt,jt=Ie,Nl=(i,e,t={})=>{if(i===e)return!0;i=new mn(i,t),e=new mn(e,t);let n=!1;e:for(const r of i.set){for(const s of e.set){const l=Sl(r,s,t);if(n=n||l!==null,l)continue e}if(n)return!1}return!0},wl=[new Ht(">=0.0.0-0")],pn=[new Ht(">=0.0.0")],Sl=(i,e,t)=>{if(i===e)return!0;if(i.length===1&&i[0].semver===Ct){if(e.length===1&&e[0].semver===Ct)return!0;t.includePrerelease?i=wl:i=pn}if(e.length===1&&e[0].semver===Ct){if(t.includePrerelease)return!0;e=pn}const n=new Set;let r,s;for(const d of i)d.operator===">"||d.operator===">="?r=_n(r,d,t):d.operator==="<"||d.operator==="<="?s=En(s,d,t):n.add(d.semver);if(n.size>1)return null;let l;if(r&&s){if(l=jt(r.semver,s.semver,t),l>0)return null;if(l===0&&(r.operator!==">="||s.operator!=="<="))return null}for(const d of n){if(r&&!xe(d,String(r),t)||s&&!xe(d,String(s),t))return null;for(const g of e)if(!xe(d,String(g),t))return!1;return!0}let a,o,c,u,f=s&&!t.includePrerelease&&s.semver.prerelease.length?s.semver:!1,m=r&&!t.includePrerelease&&r.semver.prerelease.length?r.semver:!1;f&&f.prerelease.length===1&&s.operator==="<"&&f.prerelease[0]===0&&(f=!1);for(const d of e){if(u=u||d.operator===">"||d.operator===">=",c=c||d.operator==="<"||d.operator==="<=",r){if(m&&d.semver.prerelease&&d.semver.prerelease.length&&d.semver.major===m.major&&d.semver.minor===m.minor&&d.semver.patch===m.patch&&(m=!1),d.operator===">"||d.operator===">="){if(a=_n(r,d,t),a===d&&a!==r)return!1}else if(r.operator===">="&&!xe(r.semver,String(d),t))return!1}if(s){if(f&&d.semver.prerelease&&d.semver.prerelease.length&&d.semver.major===f.major&&d.semver.minor===f.minor&&d.semver.patch===f.patch&&(f=!1),d.operator==="<"||d.operator==="<="){if(o=En(s,d,t),o===d&&o!==s)return!1}else if(s.operator==="<="&&!xe(s.semver,String(d),t))return!1}if(!d.operator&&(s||r)&&l!==0)return!1}return!(r&&c&&!s&&l!==0||s&&u&&!r&&l!==0||m||f)},_n=(i,e,t)=>{if(!i)return e;const n=jt(i.semver,e.semver,t);return n>0?i:n<0||e.operator===">"&&i.operator===">="?e:i},En=(i,e,t)=>{if(!i)return e;const n=jt(i.semver,e.semver,t);return n<0?i:n>0||e.operator==="<"&&i.operator==="<="?e:i};var yl=Nl;const Rt=Be,bn=pt,Il=$e,gn=Tr,Al=Ze,Cl=ks,Rl=Ds,Tl=Us,Ml=Fs,Ol=js,kl=Ys,Ll=Ks,Bl=Qs,Dl=Ie,Pl=ni,Ul=ii,Gl=Pt,Fl=ci,Vl=hi,Hl=Et,jl=Ut,ql=Mr,zl=Or,Yl=Gt,Xl=Ft,Wl=kr,Kl=Bi,Jl=bt(),Zl=Ae(),Ql=gt,xl=ji,ea=Xi,ta=Zi,na=el,ra=rl,sa=Vt,ia=dl,la=_l,aa=bl,oa=$l,ca=yl;var fa={parse:Al,valid:Cl,clean:Rl,inc:Tl,diff:Ml,major:Ol,minor:kl,patch:Ll,prerelease:Bl,compare:Dl,rcompare:Pl,compareLoose:Ul,compareBuild:Gl,sort:Fl,rsort:Vl,gt:Hl,lt:jl,eq:ql,neq:zl,gte:Yl,lte:Xl,cmp:Wl,coerce:Kl,Comparator:Jl,Range:Zl,satisfies:Ql,toComparators:xl,maxSatisfying:ea,minSatisfying:ta,minVersion:na,validRange:ra,outside:sa,gtr:ia,ltr:la,intersects:aa,simplifyRange:oa,subset:ca,SemVer:Il,re:Rt.re,src:Rt.src,tokens:Rt.t,SEMVER_SPEC_VERSION:bn.SEMVER_SPEC_VERSION,RELEASE_TYPES:bn.RELEASE_TYPES,compareIdentifiers:gn.compareIdentifiers,rcompareIdentifiers:gn.rcompareIdentifiers};function vn(i){let e;function t(s,l){return s[2]?ha:ua}let n=t(i),r=n(i);return{c(){e=A("div"),r.c(),this.h()},l(s){e=C(s,"DIV",{class:!0});var l=D(e);r.l(l),l.forEach(h),this.h()},h(){U(e,"class","details svelte-1n5oywy")},m(s,l){N(s,e,l),r.m(e,null)},p(s,l){n===(n=t(s))&&r?r.p(s,l):(r.d(1),r=n(s),r&&(r.c(),r.m(e,null)))},d(s){s&&h(e),r.d()}}}function ua(i){let e,t;return{c(){e=A("p"),t=O("No device connected."),this.h()},l(n){e=C(n,"P",{class:!0});var r=D(e);t=k(r,"No device connected."),r.forEach(h),this.h()},h(){U(e,"class","device svelte-1n5oywy")},m(n,r){N(n,e,r),b(e,t)},p:ae,d(n){n&&h(e)}}}function ha(i){let e,t,n,r=ye(i[2].deviceId).name+"",s,l,a,o=i[2].firmwareVersion+"",c,u,f=i[0].trim()!="",m=f&&$n(i);return{c(){e=A("p"),t=O("Connected: "),n=A("strong"),s=O(r),l=O(`
        running firmware
        `),a=A("strong"),c=O(o),u=K(),m&&m.c(),this.h()},l(d){e=C(d,"P",{class:!0});var g=D(e);t=k(g,"Connected: "),n=C(g,"STRONG",{});var w=D(n);s=k(w,r),w.forEach(h),l=k(g,`
        running firmware
        `),a=C(g,"STRONG",{});var $=D(a);c=k($,o),$.forEach(h),u=J(g),m&&m.l(g),g.forEach(h),this.h()},h(){U(e,"class","device svelte-1n5oywy")},m(d,g){N(d,e,g),b(e,t),b(e,n),b(n,s),b(e,l),b(e,a),b(a,c),b(e,u),m&&m.m(e,null)},p(d,g){g&4&&r!==(r=ye(d[2].deviceId).name+"")&&fe(s,r),g&4&&o!==(o=d[2].firmwareVersion+"")&&fe(c,o),g&1&&(f=d[0].trim()!=""),f?m?m.p(d,g):(m=$n(d),m.c(),m.m(e,null)):m&&(m.d(1),m=null)},d(d){d&&h(e),m&&m.d()}}}function $n(i){let e,t,n,r,s;return{c(){e=A("span"),t=O(i[0]),n=K(),r=A("a"),s=O("Download"),this.h()},l(l){e=C(l,"SPAN",{class:!0});var a=D(e);t=k(a,i[0]),n=J(a),r=C(a,"A",{href:!0});var o=D(r);s=k(o,"Download"),o.forEach(h),a.forEach(h),this.h()},h(){U(r,"href","https://github.com/TomWhitwell/Smith-Kakehashi/releases"),U(e,"class","upgrade svelte-1n5oywy")},m(l,a){N(l,e,a),b(e,t),b(e,n),b(e,r),b(r,s)},p(l,a){a&1&&fe(t,l[0])},d(l){l&&h(e)}}}function da(i){let e,t=i[1]&&vn(i);return{c(){t&&t.c(),e=se()},l(n){t&&t.l(n),e=se()},m(n,r){t&&t.m(n,r),N(n,e,r)},p(n,[r]){n[1]?t?t.p(n,r):(t=vn(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:ae,o:ae,d(n){t&&t.d(n),n&&h(e)}}}function ma(i,e,t){let n,r;me(i,Lt,c=>t(1,n=c)),me(i,ve,c=>t(2,r=c));let s="",l="1.0.1",a=!1;const o=ve.subscribe(c=>{c&&c.firmwareVersion&&l.trim()!==""&&!a&&(a=!0,fa.gt(l,c.firmwareVersion)?t(0,s=`A new version of the 8mu firmware (${l}) is available.`):t(0,s=""))});return Tt(()=>{o()}),[s,n,r]}class pa extends pe{constructor(e){super(),_e(this,e,ma,da,Ee,{})}}function _a(i){let e,t;return{c(){e=A("span"),this.h()},l(n){e=C(n,"SPAN",{class:!0}),D(e).forEach(h),this.h()},h(){U(e,"class",t="fas fa-"+i[0]+" "+i[1]+" svelte-pvbvkq")},m(n,r){N(n,e,r)},p(n,[r]){r&3&&t!==(t="fas fa-"+n[0]+" "+n[1]+" svelte-pvbvkq")&&U(e,"class",t)},i:ae,o:ae,d(n){n&&h(e)}}}function Ea(i,e,t){let{i:n}=e,{classList:r=""}=e;return i.$$set=s=>{"i"in s&&t(0,n=s.i),"classList"in s&&t(1,r=s.classList)},[n,r]}class ba extends pe{constructor(e){super(),_e(this,e,Ea,_a,Ee,{i:0,classList:1})}}function Nn(i){let e,t;return e=new ba({props:{i:i[1]}}),{c(){Z(e.$$.fragment)},l(n){Q(e.$$.fragment,n)},m(n,r){x(e,n,r),t=!0},p(n,r){const s={};r&2&&(s.i=n[1]),e.$set(s)},i(n){t||(y(e.$$.fragment,n),t=!0)},o(n){P(e.$$.fragment,n),t=!1},d(n){ee(e,n)}}}function ga(i){let e,t,n=i[1]&&i[1].trim()!=="",r,s,l,a,o,c=n&&Nn(i);return{c(){e=A("div"),t=A("button"),c&&c.c(),r=K(),s=O(i[0]),this.h()},l(u){e=C(u,"DIV",{class:!0});var f=D(e);t=C(f,"BUTTON",{class:!0});var m=D(t);c&&c.l(m),r=J(m),s=k(m,i[0]),m.forEach(h),f.forEach(h),this.h()},h(){t.disabled=i[2],U(t,"class","svelte-1qu28ag"),U(e,"class","button-wrapper svelte-1qu28ag")},m(u,f){N(u,e,f),b(e,t),c&&c.m(t,null),b(t,r),b(t,s),l=!0,a||(o=oe(t,"click",function(){jr(i[3])&&i[3].apply(this,arguments)}),a=!0)},p(u,[f]){i=u,f&2&&(n=i[1]&&i[1].trim()!==""),n?c?(c.p(i,f),f&2&&y(c,1)):(c=Nn(i),c.c(),y(c,1),c.m(t,r)):c&&(ie(),P(c,1,1,()=>{c=null}),le()),(!l||f&1)&&fe(s,i[0]),(!l||f&4)&&(t.disabled=i[2])},i(u){l||(y(c),l=!0)},o(u){P(c),l=!1},d(u){u&&h(e),c&&c.d(),a=!1,o()}}}function va(i,e,t){let{label:n}=e,{icon:r=""}=e,{disabled:s=!1}=e,{click:l}=e;return i.$$set=a=>{"label"in a&&t(0,n=a.label),"icon"in a&&t(1,r=a.icon),"disabled"in a&&t(2,s=a.disabled),"click"in a&&t(3,l=a.click)},[n,r,s,l]}class st extends pe{constructor(e){super(),_e(this,e,va,ga,Ee,{label:0,icon:1,disabled:2,click:3})}}function $a(i){let e,t,n,r,s,l,a;const o=i[2].default,c=Ye(o,i,i[1],null);return{c(){e=A("p"),t=A("label"),n=A("input"),r=K(),c&&c.c(),this.h()},l(u){e=C(u,"P",{});var f=D(e);t=C(f,"LABEL",{});var m=D(t);n=C(m,"INPUT",{type:!0}),r=J(m),c&&c.l(m),m.forEach(h),f.forEach(h),this.h()},h(){U(n,"type","checkbox")},m(u,f){N(u,e,f),b(e,t),b(t,n),n.checked=i[0],b(t,r),c&&c.m(t,null),s=!0,l||(a=oe(n,"change",i[3]),l=!0)},p(u,[f]){f&1&&(n.checked=u[0]),c&&c.p&&(!s||f&2)&&Xe(c,o,u,u[1],s?Ke(o,u[1],f,null):We(u[1]),null)},i(u){s||(y(c,u),s=!0)},o(u){P(c,u),s=!1},d(u){u&&h(e),c&&c.d(u),l=!1,a()}}}function Na(i,e,t){let{$$slots:n={},$$scope:r}=e,{checked:s}=e;function l(){s=this.checked,t(0,s)}return i.$$set=a=>{"checked"in a&&t(0,s=a.checked),"$$scope"in a&&t(1,r=a.$$scope)},[s,r,n,l]}class it extends pe{constructor(e){super(),_e(this,e,Na,$a,Ee,{checked:0})}}function wn(i){let e=at(i[1],"led"),t,n,r,s,l,a,o,c,u,f,m,d,g,w,$,R,v=at(i[1],"i2c"),E,p,_=e&&Sn(i);function M(S){i[5](S)}let F={$$slots:{default:[ya]},$$scope:{ctx:i}};i[0].controllerFlip!==void 0&&(F.checked=i[0].controllerFlip),n=new it({props:F}),et.push(()=>tt(n,"checked",M));function W(S){i[6](S)}let G={$$slots:{default:[Ia]},$$scope:{ctx:i}};i[0].midiThru!==void 0&&(G.checked=i[0].midiThru),l=new it({props:G}),et.push(()=>tt(l,"checked",W));function Y(S){i[7](S)}let z={$$slots:{default:[Ra]},$$scope:{ctx:i}};i[0].midiMode!==void 0&&(z.checked=i[0].midiMode),c=new it({props:z}),et.push(()=>tt(c,"checked",Y));function ce(S,B){return S[1].pageNumber>0?Ma:Ta}let I=ce(i),T=I(i),q=v&&yn(i);return{c(){_&&_.c(),t=K(),Z(n.$$.fragment),s=K(),Z(l.$$.fragment),o=K(),Z(c.$$.fragment),f=K(),m=A("hr"),d=K(),g=A("h3"),w=O("Fader calibration"),$=K(),T.c(),R=K(),q&&q.c(),E=se()},l(S){_&&_.l(S),t=J(S),Q(n.$$.fragment,S),s=J(S),Q(l.$$.fragment,S),o=J(S),Q(c.$$.fragment,S),f=J(S),m=C(S,"HR",{}),d=J(S),g=C(S,"H3",{});var B=D(g);w=k(B,"Fader calibration"),B.forEach(h),$=J(S),T.l(S),R=J(S),q&&q.l(S),E=se()},m(S,B){_&&_.m(S,B),N(S,t,B),x(n,S,B),N(S,s,B),x(l,S,B),N(S,o,B),x(c,S,B),N(S,f,B),N(S,m,B),N(S,d,B),N(S,g,B),b(g,w),N(S,$,B),T.m(S,B),N(S,R,B),q&&q.m(S,B),N(S,E,B),p=!0},p(S,B){B&2&&(e=at(S[1],"led")),e?_?(_.p(S,B),B&2&&y(_,1)):(_=Sn(S),_.c(),y(_,1),_.m(t.parentNode,t)):_&&(ie(),P(_,1,1,()=>{_=null}),le());const V={};B&2048&&(V.$$scope={dirty:B,ctx:S}),!r&&B&1&&(r=!0,V.checked=S[0].controllerFlip,nt(()=>r=!1)),n.$set(V);const X={};B&2048&&(X.$$scope={dirty:B,ctx:S}),!a&&B&1&&(a=!0,X.checked=S[0].midiThru,nt(()=>a=!1)),l.$set(X);const ne={};B&2049&&(ne.$$scope={dirty:B,ctx:S}),!u&&B&1&&(u=!0,ne.checked=S[0].midiMode,nt(()=>u=!1)),c.$set(ne),I===(I=ce(S))&&T?T.p(S,B):(T.d(1),T=I(S),T&&(T.c(),T.m(R.parentNode,R))),B&2&&(v=at(S[1],"i2c")),v?q?q.p(S,B):(q=yn(S),q.c(),q.m(E.parentNode,E)):q&&(q.d(1),q=null)},i(S){p||(y(_),y(n.$$.fragment,S),y(l.$$.fragment,S),y(c.$$.fragment,S),p=!0)},o(S){P(_),P(n.$$.fragment,S),P(l.$$.fragment,S),P(c.$$.fragment,S),p=!1},d(S){_&&_.d(S),S&&h(t),ee(n,S),S&&h(s),ee(l,S),S&&h(o),ee(c,S),S&&h(f),S&&h(m),S&&h(d),S&&h(g),S&&h($),T.d(S),S&&h(R),q&&q.d(S),S&&h(E)}}}function Sn(i){let e,t,n,r,s,l;function a(f){i[3](f)}let o={$$slots:{default:[wa]},$$scope:{ctx:i}};i[0].faderBlink!==void 0&&(o.checked=i[0].faderBlink),e=new it({props:o}),et.push(()=>tt(e,"checked",a));function c(f){i[4](f)}let u={$$slots:{default:[Sa]},$$scope:{ctx:i}};return i[0].accelBlink!==void 0&&(u.checked=i[0].accelBlink),r=new it({props:u}),et.push(()=>tt(r,"checked",c)),{c(){Z(e.$$.fragment),n=K(),Z(r.$$.fragment)},l(f){Q(e.$$.fragment,f),n=J(f),Q(r.$$.fragment,f)},m(f,m){x(e,f,m),N(f,n,m),x(r,f,m),l=!0},p(f,m){const d={};m&2048&&(d.$$scope={dirty:m,ctx:f}),!t&&m&1&&(t=!0,d.checked=f[0].faderBlink,nt(()=>t=!1)),e.$set(d);const g={};m&2048&&(g.$$scope={dirty:m,ctx:f}),!s&&m&1&&(s=!0,g.checked=f[0].accelBlink,nt(()=>s=!1)),r.$set(g)},i(f){l||(y(e.$$.fragment,f),y(r.$$.fragment,f),l=!0)},o(f){P(e.$$.fragment,f),P(r.$$.fragment,f),l=!1},d(f){ee(e,f),f&&h(n),ee(r,f)}}}function wa(i){let e;return{c(){e=O("Blink LEDs on fader movements")},l(t){e=k(t,"Blink LEDs on fader movements")},m(t,n){N(t,e,n)},d(t){t&&h(e)}}}function Sa(i){let e;return{c(){e=O("Blink LEDs on accelerometer movements")},l(t){e=k(t,"Blink LEDs on accelerometer movements")},m(t,n){N(t,e,n)},d(t){t&&h(e)}}}function ya(i){let e;return{c(){e=O("Rotate controller 180º")},l(t){e=k(t,"Rotate controller 180º")},m(t,n){N(t,e,n)},d(t){t&&h(e)}}}function Ia(i){let e;return{c(){e=O("Soft MIDI thru (echo MIDI clock/note data sent to USB out of the minijack)")},l(t){e=k(t,"Soft MIDI thru (echo MIDI clock/note data sent to USB out of the minijack)")},m(t,n){N(t,e,n)},d(t){t&&h(e)}}}function Aa(i){let e;return{c(){e=O("Midi Type A (Make Noise, Intellijel)")},l(t){e=k(t,"Midi Type A (Make Noise, Intellijel)")},m(t,n){N(t,e,n)},d(t){t&&h(e)}}}function Ca(i){let e;return{c(){e=O("Midi Type B (Arturia)")},l(t){e=k(t,"Midi Type B (Arturia)")},m(t,n){N(t,e,n)},d(t){t&&h(e)}}}function Ra(i){let e;function t(s,l){if(s[0].midiMode)return Ca;if(!s[0].midiMode)return Aa}let n=t(i),r=n&&n(i);return{c(){r&&r.c(),e=se()},l(s){r&&r.l(s),e=se()},m(s,l){r&&r.m(s,l),N(s,e,l)},p(s,l){n!==(n=t(s))&&(r&&r.d(1),r=n&&n(s),r&&(r.c(),r.m(e.parentNode,e)))},d(s){r&&r.d(s),s&&h(e)}}}function Ta(i){let e,t,n,r,s,l,a,o,c,u,f,m,d,g,w,$,R,v,E,p,_,M,F,W,G,Y,z,ce,I,T,q,S;return{c(){e=A("div"),t=A("label"),n=O("Fader Minimum raw value"),r=K(),s=A("input"),l=K(),a=A("div"),o=A("label"),c=O("Fader Maximum raw value"),u=K(),f=A("input"),m=K(),d=A("p"),g=O(`Every fader is slightly different - depending on conditions when it was
      manufactured. You shouldn't touch this unless you are having issues with
      your faders either reaching `),w=A("code"),$=O("127"),R=O(` before the end of their
      travel, or not at all. `),v=A("br"),E=A("br"),p=O(`
      NB: these instructions are quite counter-intuitive, so read this carefully!`),_=A("br"),M=O(`

      • "Raw" analog values are read from the faders between 0 and 4096.
      `),F=A("br"),W=O(`
      • For Reasons, the Fader Maximum value relates to the BOTTOM of the fader
      range (assuming the USB cable is on the right so the controller is not in 'flipped'
      mode). The Fader Minimum relates to the TOP of the range.`),G=A("br"),Y=O(`
      • If when you pull the fader down, it sticks at 1 or 2 or more, so doesn't
      get all the way to 0, you should reduce the Fader Maximum value, maybe to 4080.`),z=A("br"),ce=O(`
      • If when you push the fader up, it stick at 126, 125 or less, so doesn't
      get all the way to 127, you should increase the Fader Minimum value, maybe
      to 100.`),I=A("br"),T=O(`
      • Defaults are Min = 15, Max = 4080.`),this.h()},l(B){e=C(B,"DIV",{});var V=D(e);t=C(V,"LABEL",{for:!0,class:!0});var X=D(t);n=k(X,"Fader Minimum raw value"),X.forEach(h),r=J(V),s=C(V,"INPUT",{name:!0,type:!0,min:!0,max:!0}),V.forEach(h),l=J(B),a=C(B,"DIV",{});var ne=D(a);o=C(ne,"LABEL",{for:!0,class:!0});var te=D(o);c=k(te,"Fader Maximum raw value"),te.forEach(h),u=J(ne),f=C(ne,"INPUT",{name:!0,type:!0,min:!0,max:!0}),ne.forEach(h),m=J(B),d=C(B,"P",{class:!0});var re=D(d);g=k(re,`Every fader is slightly different - depending on conditions when it was
      manufactured. You shouldn't touch this unless you are having issues with
      your faders either reaching `),w=C(re,"CODE",{});var de=D(w);$=k(de,"127"),de.forEach(h),R=k(re,` before the end of their
      travel, or not at all. `),v=C(re,"BR",{}),E=C(re,"BR",{}),p=k(re,`
      NB: these instructions are quite counter-intuitive, so read this carefully!`),_=C(re,"BR",{}),M=k(re,`

      • "Raw" analog values are read from the faders between 0 and 4096.
      `),F=C(re,"BR",{}),W=k(re,`
      • For Reasons, the Fader Maximum value relates to the BOTTOM of the fader
      range (assuming the USB cable is on the right so the controller is not in 'flipped'
      mode). The Fader Minimum relates to the TOP of the range.`),G=C(re,"BR",{}),Y=k(re,`
      • If when you pull the fader down, it sticks at 1 or 2 or more, so doesn't
      get all the way to 0, you should reduce the Fader Maximum value, maybe to 4080.`),z=C(re,"BR",{}),ce=k(re,`
      • If when you push the fader up, it stick at 126, 125 or less, so doesn't
      get all the way to 127, you should increase the Fader Minimum value, maybe
      to 100.`),I=C(re,"BR",{}),T=k(re,`
      • Defaults are Min = 15, Max = 4080.`),re.forEach(h),this.h()},h(){U(t,"for","faderMin"),U(t,"class","svelte-idpdcv"),U(s,"name","faderMin"),U(s,"type","number"),U(s,"min","0"),U(s,"max",(1<<13)-1),U(o,"for","faderMax"),U(o,"class","svelte-idpdcv"),U(f,"name","faderMax"),U(f,"type","number"),U(f,"min","0"),U(f,"max",(1<<13)-1),U(d,"class","note svelte-idpdcv")},m(B,V){N(B,e,V),b(e,t),b(t,n),b(e,r),b(e,s),Ge(s,i[0].faderMin),N(B,l,V),N(B,a,V),b(a,o),b(o,c),b(a,u),b(a,f),Ge(f,i[0].faderMax),N(B,m,V),N(B,d,V),b(d,g),b(d,w),b(w,$),b(d,R),b(d,v),b(d,E),b(d,p),b(d,_),b(d,M),b(d,F),b(d,W),b(d,G),b(d,Y),b(d,z),b(d,ce),b(d,I),b(d,T),q||(S=[oe(s,"input",i[8]),oe(s,"blur",i[2]),oe(f,"input",i[9]),oe(f,"blur",i[2])],q=!0)},p(B,V){V&1&&qe(s.value)!==B[0].faderMin&&Ge(s,B[0].faderMin),V&1&&qe(f.value)!==B[0].faderMax&&Ge(f,B[0].faderMax)},d(B){B&&h(e),B&&h(l),B&&h(a),B&&h(m),B&&h(d),q=!1,Je(S)}}}function Ma(i){let e,t;return{c(){e=A("b"),t=O("NB: Fader Calibration is global, and can only be changed in Bank 1")},l(n){e=C(n,"B",{});var r=D(e);t=k(r,"NB: Fader Calibration is global, and can only be changed in Bank 1"),r.forEach(h)},m(n,r){N(n,e,r),b(e,t)},p:ae,d(n){n&&h(e)}}}function yn(i){let e,t,n,r,s,l,a,o,c,u,f,m,d,g,w,$,R,v,E,p,_,M,F,W,G,Y,z,ce;return{c(){e=A("hr"),t=K(),n=A("h3"),r=O("I2C Leader/Follower"),s=K(),l=A("select"),a=A("option"),o=O("Follower"),c=A("option"),u=O("Leader"),f=K(),m=A("p"),d=A("strong"),g=O("Follower"),w=O(" mode is for use with Teletype."),$=K(),R=A("p"),v=A("strong"),E=O("Leader"),p=O(` mode is for use with Ansible, TXo, ER-301. 8mu will
      not respond to Teletype when in leader mode.`),_=K(),M=A("p"),F=O(`This will not take effect until you restart (disconnect/reconnect) your
      8mu.`),W=K(),G=A("p"),Y=O(`("Leader" is sometimes also referred to as 'master' mode)`),this.h()},l(I){e=C(I,"HR",{}),t=J(I),n=C(I,"H3",{});var T=D(n);r=k(T,"I2C Leader/Follower"),T.forEach(h),s=J(I),l=C(I,"SELECT",{});var q=D(l);a=C(q,"OPTION",{});var S=D(a);o=k(S,"Follower"),S.forEach(h),c=C(q,"OPTION",{});var B=D(c);u=k(B,"Leader"),B.forEach(h),q.forEach(h),f=J(I),m=C(I,"P",{class:!0});var V=D(m);d=C(V,"STRONG",{});var X=D(d);g=k(X,"Follower"),X.forEach(h),w=k(V," mode is for use with Teletype."),V.forEach(h),$=J(I),R=C(I,"P",{class:!0});var ne=D(R);v=C(ne,"STRONG",{});var te=D(v);E=k(te,"Leader"),te.forEach(h),p=k(ne,` mode is for use with Ansible, TXo, ER-301. 8mu will
      not respond to Teletype when in leader mode.`),ne.forEach(h),_=J(I),M=C(I,"P",{class:!0});var re=D(M);F=k(re,`This will not take effect until you restart (disconnect/reconnect) your
      8mu.`),re.forEach(h),W=J(I),G=C(I,"P",{class:!0});var de=D(G);Y=k(de,`("Leader" is sometimes also referred to as 'master' mode)`),de.forEach(h),this.h()},h(){a.__value=!1,a.value=a.__value,c.__value=!0,c.value=c.__value,i[0].i2cLeader===void 0&&Le(()=>i[10].call(l)),U(m,"class","note svelte-idpdcv"),U(R,"class","note svelte-idpdcv"),U(M,"class","note svelte-idpdcv"),U(G,"class","note small svelte-idpdcv")},m(I,T){N(I,e,T),N(I,t,T),N(I,n,T),b(n,r),N(I,s,T),N(I,l,T),b(l,a),b(a,o),b(l,c),b(c,u),be(l,i[0].i2cLeader,!0),N(I,f,T),N(I,m,T),b(m,d),b(d,g),b(m,w),N(I,$,T),N(I,R,T),b(R,v),b(v,E),b(R,p),N(I,_,T),N(I,M,T),b(M,F),N(I,W,T),N(I,G,T),b(G,Y),z||(ce=[oe(l,"change",i[10]),oe(l,"change",i[2])],z=!0)},p(I,T){T&1&&be(l,I[0].i2cLeader)},d(I){I&&h(e),I&&h(t),I&&h(n),I&&h(s),I&&h(l),I&&h(f),I&&h(m),I&&h($),I&&h(R),I&&h(_),I&&h(M),I&&h(W),I&&h(G),z=!1,Je(ce)}}}function Oa(i){let e,t,n=i[1]&&i[0]&&wn(i);return{c(){n&&n.c(),e=se()},l(r){n&&n.l(r),e=se()},m(r,s){n&&n.m(r,s),N(r,e,s),t=!0},p(r,[s]){r[1]&&r[0]?n?(n.p(r,s),s&3&&y(n,1)):(n=wn(r),n.c(),y(n,1),n.m(e.parentNode,e)):n&&(ie(),P(n,1,1,()=>{n=null}),le())},i(r){t||(y(n),t=!0)},o(r){P(n),t=!1},d(r){n&&n.d(r),r&&h(e)}}}function ka(i,e,t){let n,r;me(i,ue,g=>t(0,n=g)),me(i,ve,g=>t(1,r=g));const s=()=>{ue.set(n)};function l(g){i.$$.not_equal(n.faderBlink,g)&&(n.faderBlink=g,ue.set(n))}function a(g){i.$$.not_equal(n.accelBlink,g)&&(n.accelBlink=g,ue.set(n))}function o(g){i.$$.not_equal(n.controllerFlip,g)&&(n.controllerFlip=g,ue.set(n))}function c(g){i.$$.not_equal(n.midiThru,g)&&(n.midiThru=g,ue.set(n))}function u(g){i.$$.not_equal(n.midiMode,g)&&(n.midiMode=g,ue.set(n))}function f(){n.faderMin=qe(this.value),ue.set(n)}function m(){n.faderMax=qe(this.value),ue.set(n)}function d(){n.i2cLeader=Oe(this),ue.set(n)}return[n,r,s,l,a,o,c,u,f,m,d]}class La extends pe{constructor(e){super(),_e(this,e,ka,Oa,Ee,{})}}const mt=["Fader 1","Fader 2","Fader 3","Fader 4","Fader 5","Fader 6","Fader 7","Fader 8"," ↑ Front","↑ Back","↑ Right","↑ Left","↻","↺","ʎɐʍ sᴉɥʇ","this way"],ze=[125,125,125,125,125,125,125,125,155,155,155,155,155,155,155,155],Ba=Array.from(Array(10).keys()).map(i=>`${i+1}`),In=["OFF",...Ba],Br=["C","Db","D","Eb","E","F","F#","G","Ab","A","Bb","B"],Ot=["CC","Keyboard"],kt=["A","B","C","D"];function An(i,e,t){const n=i.slice();return n[8]=e[t],n}function Cn(i){let e,t=In[i[8]]+"",n,r;return{c(){e=A("option"),n=O(t),this.h()},l(s){e=C(s,"OPTION",{});var l=D(e);n=k(l,t),l.forEach(h),this.h()},h(){e.__value=r=i[8],e.value=e.__value},m(s,l){N(s,e,l),b(e,n)},p(s,l){l&4&&t!==(t=In[s[8]]+"")&&fe(n,t),l&4&&r!==(r=s[8])&&(e.__value=r,e.value=e.__value)},d(s){s&&h(e)}}}function Da(i){let e,t,n=mt[i[1]]+"",r,s,l,a,o,c,u,f,m,d,g,w,$,R=i[2],v=[];for(let E=0;E<R.length;E+=1)v[E]=Cn(An(i,R,E));return{c(){e=A("dl"),t=A("dt"),r=O(n),s=K(),l=A("dt"),a=O("Channel"),o=A("dd"),c=A("select");for(let E=0;E<v.length;E+=1)v[E].c();u=K(),f=A("dt"),m=O("CC"),d=A("dd"),g=A("input"),this.h()},l(E){e=C(E,"DL",{class:!0});var p=D(e);t=C(p,"DT",{class:!0,style:!0});var _=D(t);r=k(_,n),s=J(_),_.forEach(h),l=C(p,"DT",{class:!0});var M=D(l);a=k(M,"Channel"),M.forEach(h),o=C(p,"DD",{class:!0});var F=D(o);c=C(F,"SELECT",{});var W=D(c);for(let z=0;z<v.length;z+=1)v[z].l(W);W.forEach(h),u=J(F),F.forEach(h),f=C(p,"DT",{class:!0});var G=D(f);m=k(G,"CC"),G.forEach(h),d=C(p,"DD",{class:!0});var Y=D(d);g=C(Y,"INPUT",{type:!0,min:!0,max:!0,class:!0}),Y.forEach(h),p.forEach(h),this.h()},h(){U(t,"class","index svelte-gqdu21"),ke(t,"background-color","rgb("+ze[i[1]]+",125,125)"),U(l,"class","svelte-gqdu21"),i[0].channel===void 0&&Le(()=>i[5].call(c)),U(o,"class","svelte-gqdu21"),U(f,"class","svelte-gqdu21"),U(g,"type","number"),U(g,"min","0"),U(g,"max","127"),U(g,"class","svelte-gqdu21"),U(d,"class","svelte-gqdu21"),U(e,"class","config-column svelte-gqdu21")},m(E,p){N(E,e,p),b(e,t),b(t,r),b(t,s),b(e,l),b(l,a),b(e,o),b(o,c);for(let _=0;_<v.length;_+=1)v[_]&&v[_].m(c,null);be(c,i[0].channel,!0),b(o,u),b(e,f),b(f,m),b(e,d),b(d,g),Ge(g,i[0].cc),w||($=[oe(c,"change",i[5]),oe(c,"change",i[3]),oe(g,"input",i[6]),oe(g,"change",i[4]),oe(g,"blur",i[4])],w=!0)},p(E,[p]){if(p&2&&n!==(n=mt[E[1]]+"")&&fe(r,n),p&2&&ke(t,"background-color","rgb("+ze[E[1]]+",125,125)"),p&4){R=E[2];let _;for(_=0;_<R.length;_+=1){const M=An(E,R,_);v[_]?v[_].p(M,p):(v[_]=Cn(M),v[_].c(),v[_].m(c,null))}for(;_<v.length;_+=1)v[_].d(1);v.length=R.length}p&5&&be(c,E[0].channel),p&5&&qe(g.value)!==E[0].cc&&Ge(g,E[0].cc)},i:ae,o:ae,d(E){E&&h(e),ge(v,E),w=!1,Je($)}}}function Pa(i,e,t){let n;me(i,ue,f=>t(7,n=f));let{index:r}=e,{editControl:s}=e;const l=Array.from(Array(17).keys());l.forEach((f,m)=>t(2,l[m]=f,l));const a=()=>{ue.set(n)},o=f=>{const m=f.target;parseInt(m.value)<0&&t(0,s.cc=0,s),parseInt(m.value)>127&&t(0,s.cc=127,s),ue.set(n)};function c(){s.channel=Oe(this),t(0,s),t(2,l)}function u(){s.cc=qe(this.value),t(0,s),t(2,l)}return i.$$set=f=>{"index"in f&&t(1,r=f.index),"editControl"in f&&t(0,s=f.editControl)},[s,r,l,a,o,c,u]}class Dr extends pe{constructor(e){super(),_e(this,e,Pa,Da,Ee,{index:1,editControl:0})}}function Rn(i,e,t){const n=i.slice();return n[14]=e[t],n}function Tn(i,e,t){const n=i.slice();return n[14]=e[t],n}function Mn(i,e,t){const n=i.slice();return n[14]=e[t],n}function On(i,e,t){const n=i.slice();return n[14]=e[t],n}function kn(i,e,t){const n=i.slice();return n[23]=e[t],n[1]=t,n}function Ln(i,e,t){const n=i.slice();return n[25]=e[t],n}function Bn(i){let e,t=i[25]+"",n,r;return{c(){e=A("option"),n=O(t),this.h()},l(s){e=C(s,"OPTION",{});var l=D(e);n=k(l,t),l.forEach(h),this.h()},h(){e.__value=r=i[25],e.value=e.__value},m(s,l){N(s,e,l),b(e,n)},p(s,l){l&4&&t!==(t=s[25]+"")&&fe(n,t),l&4&&r!==(r=s[25])&&(e.__value=r,e.value=e.__value)},d(s){s&&h(e)}}}function Dn(i){let e,t=i[23]+"",n;return{c(){e=A("option"),n=O(t),this.h()},l(r){e=C(r,"OPTION",{});var s=D(e);n=k(s,t),s.forEach(h),this.h()},h(){e.__value=i[1],e.value=e.__value},m(r,s){N(r,e,s),b(e,n)},p:ae,d(r){r&&h(e)}}}function Ua(i){let e,t,n,r,s,l,a,o,c,u,f,m=i[3],d=[];for(let $=0;$<m.length;$+=1)d[$]=Pn(Tn(i,m,$));let g=i[3],w=[];for(let $=0;$<g.length;$+=1)w[$]=Un(Rn(i,g,$));return{c(){e=A("dt"),t=O("Controller"),n=A("dd"),r=A("select");for(let $=0;$<d.length;$+=1)d[$].c();s=K(),l=A("dt"),a=O("On value"),o=A("dd"),c=A("select");for(let $=0;$<w.length;$+=1)w[$].c();this.h()},l($){e=C($,"DT",{class:!0});var R=D(e);t=k(R,"Controller"),R.forEach(h),n=C($,"DD",{class:!0});var v=D(n);r=C(v,"SELECT",{});var E=D(r);for(let F=0;F<d.length;F+=1)d[F].l(E);E.forEach(h),s=J(v),v.forEach(h),l=C($,"DT",{class:!0});var p=D(l);a=k(p,"On value"),p.forEach(h),o=C($,"DD",{class:!0});var _=D(o);c=C(_,"SELECT",{});var M=D(c);for(let F=0;F<w.length;F+=1)w[F].l(M);M.forEach(h),_.forEach(h),this.h()},h(){U(e,"class","svelte-6nh3sy"),i[0].paramA===void 0&&Le(()=>i[11].call(r)),U(n,"class","svelte-6nh3sy"),U(l,"class","svelte-6nh3sy"),i[0].paramB===void 0&&Le(()=>i[12].call(c)),U(o,"class","svelte-6nh3sy")},m($,R){N($,e,R),b(e,t),N($,n,R),b(n,r);for(let v=0;v<d.length;v+=1)d[v]&&d[v].m(r,null);be(r,i[0].paramA,!0),b(n,s),N($,l,R),b(l,a),N($,o,R),b(o,c);for(let v=0;v<w.length;v+=1)w[v]&&w[v].m(c,null);be(c,i[0].paramB,!0),u||(f=[oe(r,"change",i[11]),oe(r,"change",i[4]),oe(c,"change",i[12]),oe(c,"change",i[4])],u=!0)},p($,R){if(R&8){m=$[3];let v;for(v=0;v<m.length;v+=1){const E=Tn($,m,v);d[v]?d[v].p(E,R):(d[v]=Pn(E),d[v].c(),d[v].m(r,null))}for(;v<d.length;v+=1)d[v].d(1);d.length=m.length}if(R&5&&be(r,$[0].paramA),R&8){g=$[3];let v;for(v=0;v<g.length;v+=1){const E=Rn($,g,v);w[v]?w[v].p(E,R):(w[v]=Un(E),w[v].c(),w[v].m(c,null))}for(;v<w.length;v+=1)w[v].d(1);w.length=g.length}R&5&&be(c,$[0].paramB)},d($){$&&h(e),$&&h(n),ge(d,$),$&&h(l),$&&h(o),ge(w,$),u=!1,Je(f)}}}function Ga(i){let e,t,n,r,s,l=i[6](i[0].paramA)+"",a,o,c,u,f,m,d,g,w=i[3],$=[];for(let E=0;E<w.length;E+=1)$[E]=Gn(On(i,w,E));let R=i[3],v=[];for(let E=0;E<R.length;E+=1)v[E]=Fn(Mn(i,R,E));return{c(){e=A("dt"),t=O("Note number"),n=A("dd"),r=A("select");for(let E=0;E<$.length;E+=1)$[E].c();s=O(`
      (`),a=O(l),o=O(`)
    `),c=A("dt"),u=O("Velocity"),f=A("dd"),m=A("select");for(let E=0;E<v.length;E+=1)v[E].c();this.h()},l(E){e=C(E,"DT",{class:!0});var p=D(e);t=k(p,"Note number"),p.forEach(h),n=C(E,"DD",{class:!0});var _=D(n);r=C(_,"SELECT",{});var M=D(r);for(let Y=0;Y<$.length;Y+=1)$[Y].l(M);M.forEach(h),s=k(_,`
      (`),a=k(_,l),o=k(_,`)
    `),_.forEach(h),c=C(E,"DT",{class:!0});var F=D(c);u=k(F,"Velocity"),F.forEach(h),f=C(E,"DD",{class:!0});var W=D(f);m=C(W,"SELECT",{});var G=D(m);for(let Y=0;Y<v.length;Y+=1)v[Y].l(G);G.forEach(h),W.forEach(h),this.h()},h(){U(e,"class","svelte-6nh3sy"),i[0].paramA===void 0&&Le(()=>i[9].call(r)),U(n,"class","svelte-6nh3sy"),U(c,"class","svelte-6nh3sy"),i[0].paramB===void 0&&Le(()=>i[10].call(m)),U(f,"class","svelte-6nh3sy")},m(E,p){N(E,e,p),b(e,t),N(E,n,p),b(n,r);for(let _=0;_<$.length;_+=1)$[_]&&$[_].m(r,null);be(r,i[0].paramA,!0),b(n,s),b(n,a),b(n,o),N(E,c,p),b(c,u),N(E,f,p),b(f,m);for(let _=0;_<v.length;_+=1)v[_]&&v[_].m(m,null);be(m,i[0].paramB,!0),d||(g=[oe(r,"change",i[9]),oe(r,"change",i[4]),oe(m,"change",i[10]),oe(m,"change",i[4])],d=!0)},p(E,p){if(p&8){w=E[3];let _;for(_=0;_<w.length;_+=1){const M=On(E,w,_);$[_]?$[_].p(M,p):($[_]=Gn(M),$[_].c(),$[_].m(r,null))}for(;_<$.length;_+=1)$[_].d(1);$.length=w.length}if(p&5&&be(r,E[0].paramA),p&1&&l!==(l=E[6](E[0].paramA)+"")&&fe(a,l),p&8){R=E[3];let _;for(_=0;_<R.length;_+=1){const M=Mn(E,R,_);v[_]?v[_].p(M,p):(v[_]=Fn(M),v[_].c(),v[_].m(m,null))}for(;_<v.length;_+=1)v[_].d(1);v.length=R.length}p&5&&be(m,E[0].paramB)},d(E){E&&h(e),E&&h(n),ge($,E),E&&h(c),E&&h(f),ge(v,E),d=!1,Je(g)}}}function Pn(i){let e,t=i[14]+"",n;return{c(){e=A("option"),n=O(t),this.h()},l(r){e=C(r,"OPTION",{});var s=D(e);n=k(s,t),s.forEach(h),this.h()},h(){e.__value=i[14],e.value=e.__value},m(r,s){N(r,e,s),b(e,n)},p:ae,d(r){r&&h(e)}}}function Un(i){let e,t=i[14]+"",n;return{c(){e=A("option"),n=O(t),this.h()},l(r){e=C(r,"OPTION",{});var s=D(e);n=k(s,t),s.forEach(h),this.h()},h(){e.__value=i[14],e.value=e.__value},m(r,s){N(r,e,s),b(e,n)},p:ae,d(r){r&&h(e)}}}function Gn(i){let e,t=i[14]+"",n;return{c(){e=A("option"),n=O(t),this.h()},l(r){e=C(r,"OPTION",{});var s=D(e);n=k(s,t),s.forEach(h),this.h()},h(){e.__value=i[14],e.value=e.__value},m(r,s){N(r,e,s),b(e,n)},p:ae,d(r){r&&h(e)}}}function Fn(i){let e,t=i[14]+"",n;return{c(){e=A("option"),n=O(t),this.h()},l(r){e=C(r,"OPTION",{});var s=D(e);n=k(s,t),s.forEach(h),this.h()},h(){e.__value=i[14],e.value=e.__value},m(r,s){N(r,e,s),b(e,n)},p:ae,d(r){r&&h(e)}}}function Fa(i){let e,t,n,r=kt[i[1]]+"",s,l,a,o,c,u,f,m,d,g,w,$,R,v=i[2],E=[];for(let G=0;G<v.length;G+=1)E[G]=Bn(Ln(i,v,G));let p=Ot,_=[];for(let G=0;G<p.length;G+=1)_[G]=Dn(kn(i,p,G));function M(G,Y){return G[0].mode==1?Ga:Ua}let F=M(i),W=F(i);return{c(){e=A("dl"),t=A("dt"),n=O("Button "),s=O(r),l=A("dt"),a=O("Channel"),o=A("dd"),c=A("select");for(let G=0;G<E.length;G+=1)E[G].c();u=K(),f=A("dt"),m=O("Mode"),d=A("dd"),g=A("select");for(let G=0;G<_.length;G+=1)_[G].c();w=K(),W.c(),this.h()},l(G){e=C(G,"DL",{class:!0});var Y=D(e);t=C(Y,"DT",{class:!0});var z=D(t);n=k(z,"Button "),s=k(z,r),z.forEach(h),l=C(Y,"DT",{class:!0});var ce=D(l);a=k(ce,"Channel"),ce.forEach(h),o=C(Y,"DD",{class:!0});var I=D(o);c=C(I,"SELECT",{});var T=D(c);for(let V=0;V<E.length;V+=1)E[V].l(T);T.forEach(h),u=J(I),I.forEach(h),f=C(Y,"DT",{class:!0});var q=D(f);m=k(q,"Mode"),q.forEach(h),d=C(Y,"DD",{class:!0});var S=D(d);g=C(S,"SELECT",{});var B=D(g);for(let V=0;V<_.length;V+=1)_[V].l(B);B.forEach(h),w=J(S),S.forEach(h),W.l(Y),Y.forEach(h),this.h()},h(){U(t,"class","index svelte-6nh3sy"),U(l,"class","svelte-6nh3sy"),i[0].channel===void 0&&Le(()=>i[7].call(c)),U(o,"class","svelte-6nh3sy"),U(f,"class","svelte-6nh3sy"),i[0].mode===void 0&&Le(()=>i[8].call(g)),U(d,"class","svelte-6nh3sy"),U(e,"class","config-column svelte-6nh3sy")},m(G,Y){N(G,e,Y),b(e,t),b(t,n),b(t,s),b(e,l),b(l,a),b(e,o),b(o,c);for(let z=0;z<E.length;z+=1)E[z]&&E[z].m(c,null);be(c,i[0].channel,!0),b(o,u),b(e,f),b(f,m),b(e,d),b(d,g);for(let z=0;z<_.length;z+=1)_[z]&&_[z].m(g,null);be(g,i[0].mode,!0),b(d,w),W.m(e,null),$||(R=[oe(c,"change",i[7]),oe(c,"change",i[5]),oe(g,"change",i[8]),oe(g,"change",i[4])],$=!0)},p(G,[Y]){if(Y&2&&r!==(r=kt[G[1]]+"")&&fe(s,r),Y&4){v=G[2];let z;for(z=0;z<v.length;z+=1){const ce=Ln(G,v,z);E[z]?E[z].p(ce,Y):(E[z]=Bn(ce),E[z].c(),E[z].m(c,null))}for(;z<E.length;z+=1)E[z].d(1);E.length=v.length}if(Y&5&&be(c,G[0].channel),Y&0){p=Ot;let z;for(z=0;z<p.length;z+=1){const ce=kn(G,p,z);_[z]?_[z].p(ce,Y):(_[z]=Dn(ce),_[z].c(),_[z].m(g,null))}for(;z<_.length;z+=1)_[z].d(1);_.length=p.length}Y&5&&be(g,G[0].mode),F===(F=M(G))&&W?W.p(G,Y):(W.d(1),W=F(G),W&&(W.c(),W.m(e,null)))},i:ae,o:ae,d(G){G&&h(e),ge(E,G),ge(_,G),W.d(),$=!1,Je(R)}}}function Va(i,e,t){let n;me(i,ue,R=>t(13,n=R));let{index:r}=e,{editButton:s}=e;const l=Array.from(Array(16).keys());l.forEach((R,v)=>t(2,l[v]=R+1,l));const a=Array.from(Array(128).keys());function o(){ue.update(()=>n)}const c=()=>{ue.set(n)};function u(R){const v=Br[R%12],E=Math.floor(R/12)-1;return`${v}${E}`}function f(){s.channel=Oe(this),t(0,s),t(2,l)}function m(){s.mode=Oe(this),t(0,s),t(2,l)}function d(){s.paramA=Oe(this),t(0,s),t(2,l)}function g(){s.paramB=Oe(this),t(0,s),t(2,l)}function w(){s.paramA=Oe(this),t(0,s),t(2,l)}function $(){s.paramB=Oe(this),t(0,s),t(2,l)}return i.$$set=R=>{"index"in R&&t(1,r=R.index),"editButton"in R&&t(0,s=R.editButton)},[s,r,l,a,o,c,u,f,m,d,g,w,$]}class Pr extends pe{constructor(e){super(),_e(this,e,Va,Fa,Ee,{index:1,editButton:0})}}function Ha(i){let e,t,n,r,s,l;const a=i[2].default,o=Ye(a,i,i[1],null);return{c(){e=A("div"),t=A("h2"),n=O(i[0]),r=K(),s=A("div"),o&&o.c(),this.h()},l(c){e=C(c,"DIV",{class:!0});var u=D(e);t=C(u,"H2",{class:!0});var f=D(t);n=k(f,i[0]),f.forEach(h),r=J(u),s=C(u,"DIV",{class:!0});var m=D(s);o&&o.l(m),m.forEach(h),u.forEach(h),this.h()},h(){U(t,"class","svelte-1o2kpty"),U(s,"class","details svelte-1o2kpty"),U(e,"class","subhead svelte-1o2kpty")},m(c,u){N(c,e,u),b(e,t),b(t,n),b(e,r),b(e,s),o&&o.m(s,null),l=!0},p(c,[u]){(!l||u&1)&&fe(n,c[0]),o&&o.p&&(!l||u&2)&&Xe(o,a,c,c[1],l?Ke(a,c[1],u,null):We(c[1]),null)},i(c){l||(y(o,c),l=!0)},o(c){P(o,c),l=!1},d(c){c&&h(e),o&&o.d(c)}}}function ja(i,e,t){let{$$slots:n={},$$scope:r}=e,{title:s}=e;return i.$$set=l=>{"title"in l&&t(0,s=l.title),"$$scope"in l&&t(1,r=l.$$scope)},[s,r,n]}class Ur extends pe{constructor(e){super(),_e(this,e,ja,Ha,Ee,{title:0})}}function qa(i){let e,t;const n=i[1].default,r=Ye(n,i,i[0],null);return{c(){e=A("div"),r&&r.c(),this.h()},l(s){e=C(s,"DIV",{class:!0});var l=D(e);r&&r.l(l),l.forEach(h),this.h()},h(){U(e,"class","tabs")},m(s,l){N(s,e,l),r&&r.m(e,null),t=!0},p(s,[l]){r&&r.p&&(!t||l&1)&&Xe(r,n,s,s[0],t?Ke(n,s[0],l,null):We(s[0]),null)},i(s){t||(y(r,s),t=!0)},o(s){P(r,s),t=!1},d(s){s&&h(e),r&&r.d(s)}}}const qt={};function za(i,e,t){let{$$slots:n={},$$scope:r}=e;const s=[],l=[],a=Re(null),o=Re(null);return qr(qt,{registerTab:c=>{s.push(c),a.update(u=>u||c),Tt(()=>{const u=s.indexOf(c);s.splice(u,1),a.update(f=>f===c?s[u]||s[s.length-1]:f)})},registerPanel:c=>{l.push(c),o.update(u=>u||c),Tt(()=>{const u=l.indexOf(c);l.splice(u,1),o.update(f=>f===c?l[u]||l[l.length-1]:f)})},selectTab:c=>{const u=s.indexOf(c);a.set(c),o.set(l[u])},selectedTab:a,selectedPanel:o}),i.$$set=c=>{"$$scope"in c&&t(0,r=c.$$scope)},[r,n]}class Gr extends pe{constructor(e){super(),_e(this,e,za,qa,Ee,{})}}function Ya(i){let e,t;const n=i[1].default,r=Ye(n,i,i[0],null);return{c(){e=A("div"),r&&r.c(),this.h()},l(s){e=C(s,"DIV",{class:!0});var l=D(e);r&&r.l(l),l.forEach(h),this.h()},h(){U(e,"class","tab-list svelte-1c799zm")},m(s,l){N(s,e,l),r&&r.m(e,null),t=!0},p(s,[l]){r&&r.p&&(!t||l&1)&&Xe(r,n,s,s[0],t?Ke(n,s[0],l,null):We(s[0]),null)},i(s){t||(y(r,s),t=!0)},o(s){P(r,s),t=!1},d(s){s&&h(e),r&&r.d(s)}}}function Xa(i,e,t){let{$$slots:n={},$$scope:r}=e;return i.$$set=s=>{"$$scope"in s&&t(0,r=s.$$scope)},[r,n]}class Fr extends pe{constructor(e){super(),_e(this,e,Xa,Ya,Ee,{})}}function Vn(i){let e;const t=i[4].default,n=Ye(t,i,i[3],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8)&&Xe(n,t,r,r[3],e?Ke(t,r[3],s,null):We(r[3]),null)},i(r){e||(y(n,r),e=!0)},o(r){P(n,r),e=!1},d(r){n&&n.d(r)}}}function Wa(i){let e,t,n=i[0]===i[1]&&Vn(i);return{c(){n&&n.c(),e=se()},l(r){n&&n.l(r),e=se()},m(r,s){n&&n.m(r,s),N(r,e,s),t=!0},p(r,[s]){r[0]===r[1]?n?(n.p(r,s),s&1&&y(n,1)):(n=Vn(r),n.c(),y(n,1),n.m(e.parentNode,e)):n&&(ie(),P(n,1,1,()=>{n=null}),le())},i(r){t||(y(n),t=!0)},o(r){P(n),t=!1},d(r){n&&n.d(r),r&&h(e)}}}function Ka(i,e,t){let n,{$$slots:r={},$$scope:s}=e;const l={},{registerPanel:a,selectedPanel:o}=wr(qt);return me(i,o,c=>t(0,n=c)),a(l),i.$$set=c=>{"$$scope"in c&&t(3,s=c.$$scope)},[n,l,o,s,r]}class Te extends pe{constructor(e){super(),_e(this,e,Ka,Wa,Ee,{})}}function Ja(i){let e,t,n,r;const s=i[5].default,l=Ye(s,i,i[4],null);return{c(){e=A("button"),l&&l.c(),this.h()},l(a){e=C(a,"BUTTON",{class:!0});var o=D(e);l&&l.l(o),o.forEach(h),this.h()},h(){U(e,"class","svelte-1rryekj"),zt(e,"selected",i[0]===i[1])},m(a,o){N(a,e,o),l&&l.m(e,null),t=!0,n||(r=oe(e,"click",i[6]),n=!0)},p(a,[o]){l&&l.p&&(!t||o&16)&&Xe(l,s,a,a[4],t?Ke(s,a[4],o,null):We(a[4]),null),(!t||o&3)&&zt(e,"selected",a[0]===a[1])},i(a){t||(y(l,a),t=!0)},o(a){P(l,a),t=!1},d(a){a&&h(e),l&&l.d(a),n=!1,r()}}}function Za(i,e,t){let n,{$$slots:r={},$$scope:s}=e;const l={},{registerTab:a,selectTab:o,selectedTab:c}=wr(qt);me(i,c,f=>t(0,n=f)),a(l);const u=()=>o(l);return i.$$set=f=>{"$$scope"in f&&t(4,s=f.$$scope)},[n,l,o,c,s,r,u]}class Me extends pe{constructor(e){super(),_e(this,e,Za,Ja,Ee,{})}}const Qa=(i,e)=>{const t=document.createElement("input");t.type="file",t.id="uploadedConfig",t.addEventListener("change",n=>{const r=n.target.files;if(r&&r.length>0){const s=r[0],l=new FileReader;l.addEventListener("load",()=>{const a=JSON.parse(l.result),o=ts(i,a);if(o){alert(o);return}else ue.update(()=>ns(i,a)),yr(i,e)?alert("Imported configuration is identical to currently loaded configuration; no changes to upload."):alert("New configuration imported. Choose 'update controller' to import, or 'Cancel' to abort")}),l.readAsText(s)}}),t.click(),t.remove()},xa=i=>{const e="data:text/json;charset=utf-8,"+encodeURIComponent(es(i)),n=ye(i.deviceId).name.trim().toLowerCase().replaceAll(" ","_"),r=document.createElement("a");r.href=e,r.download=`${n}_controller_config.json`,document.body.appendChild(r),r.click(),r.remove()};function Hn(i,e,t){const n=i.slice();return n[9]=e[t],n[11]=t,n}function jn(i,e,t){const n=i.slice();return n[9]=e[t],n[11]=t,n}function qn(i,e,t){const n=i.slice();return n[13]=e[t],n[11]=t,n}function zn(i,e,t){const n=i.slice();return n[13]=e[t],n[11]=t,n}function Yn(i){let e,t,n,r;return e=new Ur({props:{title:"Bank "+(i[0].pageNumber+1)+": Edit configuration",$$slots:{default:[eo]},$$scope:{ctx:i}}}),n=new Gr({props:{$$slots:{default:[ho]},$$scope:{ctx:i}}}),{c(){Z(e.$$.fragment),t=K(),Z(n.$$.fragment)},l(s){Q(e.$$.fragment,s),t=J(s),Q(n.$$.fragment,s)},m(s,l){x(e,s,l),N(s,t,l),x(n,s,l),r=!0},p(s,l){const a={};l&1&&(a.title="Bank "+(s[0].pageNumber+1)+": Edit configuration"),l&65538&&(a.$$scope={dirty:l,ctx:s}),e.$set(a);const o={};l&65548&&(o.$$scope={dirty:l,ctx:s}),n.$set(o)},i(s){r||(y(e.$$.fragment,s),y(n.$$.fragment,s),r=!0)},o(s){P(e.$$.fragment,s),P(n.$$.fragment,s),r=!1},d(s){ee(e,s),s&&h(t),ee(n,s)}}}function eo(i){let e,t,n,r,s,l;return e=new st({props:{label:"Cancel",icon:"times",click:i[4]}}),n=new st({props:{label:"Import config",icon:"file-import",click:i[5]}}),s=new st({props:{label:"Update controller",icon:"download",click:i[6],disabled:!i[1]}}),{c(){Z(e.$$.fragment),t=K(),Z(n.$$.fragment),r=K(),Z(s.$$.fragment)},l(a){Q(e.$$.fragment,a),t=J(a),Q(n.$$.fragment,a),r=J(a),Q(s.$$.fragment,a)},m(a,o){x(e,a,o),N(a,t,o),x(n,a,o),N(a,r,o),x(s,a,o),l=!0},p(a,o){const c={};o&2&&(c.disabled=!a[1]),s.$set(c)},i(a){l||(y(e.$$.fragment,a),y(n.$$.fragment,a),y(s.$$.fragment,a),l=!0)},o(a){P(e.$$.fragment,a),P(n.$$.fragment,a),P(s.$$.fragment,a),l=!1},d(a){ee(e,a),a&&h(t),ee(n,a),a&&h(r),ee(s,a)}}}function to(i){let e;return{c(){e=O("USB")},l(t){e=k(t,"USB")},m(t,n){N(t,e,n)},d(t){t&&h(e)}}}function no(i){let e;return{c(){e=O("TRS Midi")},l(t){e=k(t,"TRS Midi")},m(t,n){N(t,e,n)},d(t){t&&h(e)}}}function ro(i){let e;return{c(){e=O("USB Buttons")},l(t){e=k(t,"USB Buttons")},m(t,n){N(t,e,n)},d(t){t&&h(e)}}}function so(i){let e;return{c(){e=O("TRS Buttons")},l(t){e=k(t,"TRS Buttons")},m(t,n){N(t,e,n)},d(t){t&&h(e)}}}function io(i){let e;return{c(){e=O("Device Options")},l(t){e=k(t,"Device Options")},m(t,n){N(t,e,n)},d(t){t&&h(e)}}}function lo(i){let e,t,n,r,s,l,a,o,c,u;return e=new Me({props:{$$slots:{default:[to]},$$scope:{ctx:i}}}),n=new Me({props:{$$slots:{default:[no]},$$scope:{ctx:i}}}),s=new Me({props:{$$slots:{default:[ro]},$$scope:{ctx:i}}}),a=new Me({props:{$$slots:{default:[so]},$$scope:{ctx:i}}}),c=new Me({props:{$$slots:{default:[io]},$$scope:{ctx:i}}}),{c(){Z(e.$$.fragment),t=K(),Z(n.$$.fragment),r=K(),Z(s.$$.fragment),l=K(),Z(a.$$.fragment),o=K(),Z(c.$$.fragment)},l(f){Q(e.$$.fragment,f),t=J(f),Q(n.$$.fragment,f),r=J(f),Q(s.$$.fragment,f),l=J(f),Q(a.$$.fragment,f),o=J(f),Q(c.$$.fragment,f)},m(f,m){x(e,f,m),N(f,t,m),x(n,f,m),N(f,r,m),x(s,f,m),N(f,l,m),x(a,f,m),N(f,o,m),x(c,f,m),u=!0},p(f,m){const d={};m&65536&&(d.$$scope={dirty:m,ctx:f}),e.$set(d);const g={};m&65536&&(g.$$scope={dirty:m,ctx:f}),n.$set(g);const w={};m&65536&&(w.$$scope={dirty:m,ctx:f}),s.$set(w);const $={};m&65536&&($.$$scope={dirty:m,ctx:f}),a.$set($);const R={};m&65536&&(R.$$scope={dirty:m,ctx:f}),c.$set(R)},i(f){u||(y(e.$$.fragment,f),y(n.$$.fragment,f),y(s.$$.fragment,f),y(a.$$.fragment,f),y(c.$$.fragment,f),u=!0)},o(f){P(e.$$.fragment,f),P(n.$$.fragment,f),P(s.$$.fragment,f),P(a.$$.fragment,f),P(c.$$.fragment,f),u=!1},d(f){ee(e,f),f&&h(t),ee(n,f),f&&h(r),ee(s,f),f&&h(l),ee(a,f),f&&h(o),ee(c,f)}}}function Xn(i){let e,t;return e=new Dr({props:{editControl:i[13],index:i[11]}}),{c(){Z(e.$$.fragment)},l(n){Q(e.$$.fragment,n)},m(n,r){x(e,n,r),t=!0},p(n,r){const s={};r&8&&(s.editControl=n[13]),e.$set(s)},i(n){t||(y(e.$$.fragment,n),t=!0)},o(n){P(e.$$.fragment,n),t=!1},d(n){ee(e,n)}}}function Wn(i){let e,t,n=i[2]&&i[11]<i[2].controlCount&&Xn(i);return{c(){n&&n.c(),e=se()},l(r){n&&n.l(r),e=se()},m(r,s){n&&n.m(r,s),N(r,e,s),t=!0},p(r,s){r[2]&&r[11]<r[2].controlCount?n?(n.p(r,s),s&4&&y(n,1)):(n=Xn(r),n.c(),y(n,1),n.m(e.parentNode,e)):n&&(ie(),P(n,1,1,()=>{n=null}),le())},i(r){t||(y(n),t=!0)},o(r){P(n),t=!1},d(r){n&&n.d(r),r&&h(e)}}}function ao(i){let e,t,n=i[3].usbControls,r=[];for(let l=0;l<n.length;l+=1)r[l]=Wn(zn(i,n,l));const s=l=>P(r[l],1,1,()=>{r[l]=null});return{c(){e=A("div");for(let l=0;l<r.length;l+=1)r[l].c();this.h()},l(l){e=C(l,"DIV",{id:!0,class:!0});var a=D(e);for(let o=0;o<r.length;o+=1)r[o].l(a);a.forEach(h),this.h()},h(){U(e,"id","controls"),U(e,"class","svelte-13ul1lp")},m(l,a){N(l,e,a);for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(e,null);t=!0},p(l,a){if(a&12){n=l[3].usbControls;let o;for(o=0;o<n.length;o+=1){const c=zn(l,n,o);r[o]?(r[o].p(c,a),y(r[o],1)):(r[o]=Wn(c),r[o].c(),y(r[o],1),r[o].m(e,null))}for(ie(),o=n.length;o<r.length;o+=1)s(o);le()}},i(l){if(!t){for(let a=0;a<n.length;a+=1)y(r[a]);t=!0}},o(l){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)P(r[a]);t=!1},d(l){l&&h(e),ge(r,l)}}}function Kn(i){let e,t;return e=new Dr({props:{editControl:i[13],index:i[11]}}),{c(){Z(e.$$.fragment)},l(n){Q(e.$$.fragment,n)},m(n,r){x(e,n,r),t=!0},p(n,r){const s={};r&8&&(s.editControl=n[13]),e.$set(s)},i(n){t||(y(e.$$.fragment,n),t=!0)},o(n){P(e.$$.fragment,n),t=!1},d(n){ee(e,n)}}}function Jn(i){let e,t,n=i[2]&&i[11]<i[2].controlCount&&Kn(i);return{c(){n&&n.c(),e=se()},l(r){n&&n.l(r),e=se()},m(r,s){n&&n.m(r,s),N(r,e,s),t=!0},p(r,s){r[2]&&r[11]<r[2].controlCount?n?(n.p(r,s),s&4&&y(n,1)):(n=Kn(r),n.c(),y(n,1),n.m(e.parentNode,e)):n&&(ie(),P(n,1,1,()=>{n=null}),le())},i(r){t||(y(n),t=!0)},o(r){P(n),t=!1},d(r){n&&n.d(r),r&&h(e)}}}function oo(i){let e,t,n=i[3].trsControls,r=[];for(let l=0;l<n.length;l+=1)r[l]=Jn(qn(i,n,l));const s=l=>P(r[l],1,1,()=>{r[l]=null});return{c(){e=A("div");for(let l=0;l<r.length;l+=1)r[l].c();this.h()},l(l){e=C(l,"DIV",{id:!0,class:!0});var a=D(e);for(let o=0;o<r.length;o+=1)r[o].l(a);a.forEach(h),this.h()},h(){U(e,"id","controls"),U(e,"class","svelte-13ul1lp")},m(l,a){N(l,e,a);for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(e,null);t=!0},p(l,a){if(a&12){n=l[3].trsControls;let o;for(o=0;o<n.length;o+=1){const c=qn(l,n,o);r[o]?(r[o].p(c,a),y(r[o],1)):(r[o]=Jn(c),r[o].c(),y(r[o],1),r[o].m(e,null))}for(ie(),o=n.length;o<r.length;o+=1)s(o);le()}},i(l){if(!t){for(let a=0;a<n.length;a+=1)y(r[a]);t=!0}},o(l){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)P(r[a]);t=!1},d(l){l&&h(e),ge(r,l)}}}function Zn(i){let e,t,n=i[3].usbButtons,r=[];for(let l=0;l<n.length;l+=1)r[l]=xn(jn(i,n,l));const s=l=>P(r[l],1,1,()=>{r[l]=null});return{c(){e=A("div");for(let l=0;l<r.length;l+=1)r[l].c();this.h()},l(l){e=C(l,"DIV",{id:!0,class:!0});var a=D(e);for(let o=0;o<r.length;o+=1)r[o].l(a);a.forEach(h),this.h()},h(){U(e,"id","controls"),U(e,"class","svelte-13ul1lp")},m(l,a){N(l,e,a);for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(e,null);t=!0},p(l,a){if(a&12){n=l[3].usbButtons;let o;for(o=0;o<n.length;o+=1){const c=jn(l,n,o);r[o]?(r[o].p(c,a),y(r[o],1)):(r[o]=xn(c),r[o].c(),y(r[o],1),r[o].m(e,null))}for(ie(),o=n.length;o<r.length;o+=1)s(o);le()}},i(l){if(!t){for(let a=0;a<n.length;a+=1)y(r[a]);t=!0}},o(l){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)P(r[a]);t=!1},d(l){l&&h(e),ge(r,l)}}}function Qn(i){let e,t;return e=new Pr({props:{editButton:i[9],index:i[11]}}),{c(){Z(e.$$.fragment)},l(n){Q(e.$$.fragment,n)},m(n,r){x(e,n,r),t=!0},p(n,r){const s={};r&8&&(s.editButton=n[9]),e.$set(s)},i(n){t||(y(e.$$.fragment,n),t=!0)},o(n){P(e.$$.fragment,n),t=!1},d(n){ee(e,n)}}}function xn(i){let e,t,n=i[11]<i[2].buttonCount&&Qn(i);return{c(){n&&n.c(),e=se()},l(r){n&&n.l(r),e=se()},m(r,s){n&&n.m(r,s),N(r,e,s),t=!0},p(r,s){r[11]<r[2].buttonCount?n?(n.p(r,s),s&4&&y(n,1)):(n=Qn(r),n.c(),y(n,1),n.m(e.parentNode,e)):n&&(ie(),P(n,1,1,()=>{n=null}),le())},i(r){t||(y(n),t=!0)},o(r){P(n),t=!1},d(r){n&&n.d(r),r&&h(e)}}}function co(i){var r;let e,t,n=((r=i[2])==null?void 0:r.buttonCount)&&Zn(i);return{c(){n&&n.c(),e=se()},l(s){n&&n.l(s),e=se()},m(s,l){n&&n.m(s,l),N(s,e,l),t=!0},p(s,l){var a;(a=s[2])!=null&&a.buttonCount?n?(n.p(s,l),l&4&&y(n,1)):(n=Zn(s),n.c(),y(n,1),n.m(e.parentNode,e)):n&&(ie(),P(n,1,1,()=>{n=null}),le())},i(s){t||(y(n),t=!0)},o(s){P(n),t=!1},d(s){n&&n.d(s),s&&h(e)}}}function er(i){let e,t,n=i[3].trsButtons,r=[];for(let l=0;l<n.length;l+=1)r[l]=nr(Hn(i,n,l));const s=l=>P(r[l],1,1,()=>{r[l]=null});return{c(){e=A("div");for(let l=0;l<r.length;l+=1)r[l].c();this.h()},l(l){e=C(l,"DIV",{id:!0,class:!0});var a=D(e);for(let o=0;o<r.length;o+=1)r[o].l(a);a.forEach(h),this.h()},h(){U(e,"id","controls"),U(e,"class","svelte-13ul1lp")},m(l,a){N(l,e,a);for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(e,null);t=!0},p(l,a){if(a&12){n=l[3].trsButtons;let o;for(o=0;o<n.length;o+=1){const c=Hn(l,n,o);r[o]?(r[o].p(c,a),y(r[o],1)):(r[o]=nr(c),r[o].c(),y(r[o],1),r[o].m(e,null))}for(ie(),o=n.length;o<r.length;o+=1)s(o);le()}},i(l){if(!t){for(let a=0;a<n.length;a+=1)y(r[a]);t=!0}},o(l){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)P(r[a]);t=!1},d(l){l&&h(e),ge(r,l)}}}function tr(i){let e,t;return e=new Pr({props:{editButton:i[9],index:i[11]}}),{c(){Z(e.$$.fragment)},l(n){Q(e.$$.fragment,n)},m(n,r){x(e,n,r),t=!0},p(n,r){const s={};r&8&&(s.editButton=n[9]),e.$set(s)},i(n){t||(y(e.$$.fragment,n),t=!0)},o(n){P(e.$$.fragment,n),t=!1},d(n){ee(e,n)}}}function nr(i){let e,t,n=i[11]<i[2].buttonCount&&tr(i);return{c(){n&&n.c(),e=se()},l(r){n&&n.l(r),e=se()},m(r,s){n&&n.m(r,s),N(r,e,s),t=!0},p(r,s){r[11]<r[2].buttonCount?n?(n.p(r,s),s&4&&y(n,1)):(n=tr(r),n.c(),y(n,1),n.m(e.parentNode,e)):n&&(ie(),P(n,1,1,()=>{n=null}),le())},i(r){t||(y(n),t=!0)},o(r){P(n),t=!1},d(r){n&&n.d(r),r&&h(e)}}}function fo(i){var r;let e,t,n=((r=i[2])==null?void 0:r.buttonCount)&&er(i);return{c(){n&&n.c(),e=se()},l(s){n&&n.l(s),e=se()},m(s,l){n&&n.m(s,l),N(s,e,l),t=!0},p(s,l){var a;(a=s[2])!=null&&a.buttonCount?n?(n.p(s,l),l&4&&y(n,1)):(n=er(s),n.c(),y(n,1),n.m(e.parentNode,e)):n&&(ie(),P(n,1,1,()=>{n=null}),le())},i(s){t||(y(n),t=!0)},o(s){P(n),t=!1},d(s){n&&n.d(s),s&&h(e)}}}function uo(i){let e,t;return e=new La({}),{c(){Z(e.$$.fragment)},l(n){Q(e.$$.fragment,n)},m(n,r){x(e,n,r),t=!0},i(n){t||(y(e.$$.fragment,n),t=!0)},o(n){P(e.$$.fragment,n),t=!1},d(n){ee(e,n)}}}function ho(i){let e,t,n,r,s,l,a,o,c,u,f,m;return e=new Fr({props:{$$slots:{default:[lo]},$$scope:{ctx:i}}}),n=new Te({props:{$$slots:{default:[ao]},$$scope:{ctx:i}}}),s=new Te({props:{$$slots:{default:[oo]},$$scope:{ctx:i}}}),a=new Te({props:{$$slots:{default:[co]},$$scope:{ctx:i}}}),c=new Te({props:{$$slots:{default:[fo]},$$scope:{ctx:i}}}),f=new Te({props:{$$slots:{default:[uo]},$$scope:{ctx:i}}}),{c(){Z(e.$$.fragment),t=K(),Z(n.$$.fragment),r=K(),Z(s.$$.fragment),l=K(),Z(a.$$.fragment),o=K(),Z(c.$$.fragment),u=K(),Z(f.$$.fragment)},l(d){Q(e.$$.fragment,d),t=J(d),Q(n.$$.fragment,d),r=J(d),Q(s.$$.fragment,d),l=J(d),Q(a.$$.fragment,d),o=J(d),Q(c.$$.fragment,d),u=J(d),Q(f.$$.fragment,d)},m(d,g){x(e,d,g),N(d,t,g),x(n,d,g),N(d,r,g),x(s,d,g),N(d,l,g),x(a,d,g),N(d,o,g),x(c,d,g),N(d,u,g),x(f,d,g),m=!0},p(d,g){const w={};g&65536&&(w.$$scope={dirty:g,ctx:d}),e.$set(w);const $={};g&65548&&($.$$scope={dirty:g,ctx:d}),n.$set($);const R={};g&65548&&(R.$$scope={dirty:g,ctx:d}),s.$set(R);const v={};g&65548&&(v.$$scope={dirty:g,ctx:d}),a.$set(v);const E={};g&65548&&(E.$$scope={dirty:g,ctx:d}),c.$set(E);const p={};g&65536&&(p.$$scope={dirty:g,ctx:d}),f.$set(p)},i(d){m||(y(e.$$.fragment,d),y(n.$$.fragment,d),y(s.$$.fragment,d),y(a.$$.fragment,d),y(c.$$.fragment,d),y(f.$$.fragment,d),m=!0)},o(d){P(e.$$.fragment,d),P(n.$$.fragment,d),P(s.$$.fragment,d),P(a.$$.fragment,d),P(c.$$.fragment,d),P(f.$$.fragment,d),m=!1},d(d){ee(e,d),d&&h(t),ee(n,d),d&&h(r),ee(s,d),d&&h(l),ee(a,d),d&&h(o),ee(c,d),d&&h(u),ee(f,d)}}}function mo(i){let e,t,n=i[3]&&i[0]&&Yn(i);return{c(){n&&n.c(),e=se()},l(r){n&&n.l(r),e=se()},m(r,s){n&&n.m(r,s),N(r,e,s),t=!0},p(r,[s]){r[3]&&r[0]?n?(n.p(r,s),s&9&&y(n,1)):(n=Yn(r),n.c(),y(n,1),n.m(e.parentNode,e)):n&&(ie(),P(n,1,1,()=>{n=null}),le())},i(r){t||(y(n),t=!0)},o(r){P(n),t=!1},d(r){n&&n.d(r),r&&h(e)}}}function po(i,e,t){let n,r,s,l,a;me(i,ve,m=>t(0,r=m)),me(i,Ve,m=>t(7,s=m)),me(i,ue,m=>t(3,l=m)),me(i,Pe,m=>t(8,a=m));let o=!1;ue.subscribe(m=>{m&&r&&t(1,o=!yr(m,r))});const c=()=>{rt(Ve,s=!1,s)},u=()=>{l&&r&&Qa(l,r)},f=()=>{lt(l),ls(l,a),rt(ve,r=l,r),rt(Ve,s=!1,s)};return i.$$.update=()=>{i.$$.dirty&1&&t(2,n=r?ye(r.deviceId):null)},[r,o,n,l,c,u,f]}class _o extends pe{constructor(e){super(),_e(this,e,po,mo,Ee,{})}}function rr(i){let e,t,n,r,s,l,a=i[0].val!==void 0&&sr(i);return{c(){e=A("dt"),t=O("Value"),n=A("dd"),r=A("div"),a&&a.c(),s=K(),l=A("div"),this.h()},l(o){e=C(o,"DT",{class:!0});var c=D(e);t=k(c,"Value"),c.forEach(h),n=C(o,"DD",{class:!0});var u=D(n);r=C(u,"DIV",{class:!0});var f=D(r);a&&a.l(f),s=J(f),l=C(f,"DIV",{class:!0,style:!0}),D(l).forEach(h),f.forEach(h),u.forEach(h),this.h()},h(){U(e,"class","svelte-5fijw0"),U(l,"class","bar svelte-5fijw0"),ke(l,"height",i[0].val+"px"),ke(l,"background-color","rgb("+ze[i[1]]+",125,125)"),U(r,"class","inner svelte-5fijw0"),U(n,"class","display svelte-5fijw0")},m(o,c){N(o,e,c),b(e,t),N(o,n,c),b(n,r),a&&a.m(r,null),b(r,s),b(r,l)},p(o,c){o[0].val!==void 0?a?a.p(o,c):(a=sr(o),a.c(),a.m(r,s)):a&&(a.d(1),a=null),c&1&&ke(l,"height",o[0].val+"px"),c&2&&ke(l,"background-color","rgb("+ze[o[1]]+",125,125)")},d(o){o&&h(e),o&&h(n),a&&a.d()}}}function sr(i){let e,t=i[0].val+"",n,r;return{c(){e=A("span"),n=O(t),this.h()},l(s){e=C(s,"SPAN",{class:!0});var l=D(e);n=k(l,t),l.forEach(h),this.h()},h(){U(e,"class",r=Yt(i[0].val<27?"lowvalue":"")+" svelte-5fijw0")},m(s,l){N(s,e,l),b(e,n)},p(s,l){l&1&&t!==(t=s[0].val+"")&&fe(n,t),l&1&&r!==(r=Yt(s[0].val<27?"lowvalue":"")+" svelte-5fijw0")&&U(e,"class",r)},d(s){s&&h(e)}}}function Eo(i){let e,t,n=mt[i[1]]+"",r,s,l,a,o,c,u,f,m,d=i[0].cc+"",g,w=!i[2]&&rr(i);return{c(){e=A("dl"),t=A("dt"),r=O(n),s=K(),l=A("dt"),a=O("Channel"),o=A("dd"),c=O(i[3]),u=A("dt"),f=O("CC"),m=A("dd"),g=O(d),w&&w.c(),this.h()},l($){e=C($,"DL",{class:!0});var R=D(e);t=C(R,"DT",{class:!0,style:!0});var v=D(t);r=k(v,n),s=J(v),v.forEach(h),l=C(R,"DT",{class:!0});var E=D(l);a=k(E,"Channel"),E.forEach(h),o=C(R,"DD",{class:!0});var p=D(o);c=k(p,i[3]),p.forEach(h),u=C(R,"DT",{class:!0});var _=D(u);f=k(_,"CC"),_.forEach(h),m=C(R,"DD",{class:!0});var M=D(m);g=k(M,d),M.forEach(h),w&&w.l(R),R.forEach(h),this.h()},h(){U(t,"class","index svelte-5fijw0"),ke(t,"background-color","rgb("+ze[i[1]]+",125,125)"),U(l,"class","svelte-5fijw0"),U(o,"class","svelte-5fijw0"),U(u,"class","svelte-5fijw0"),U(m,"class","svelte-5fijw0"),U(e,"class","config-column svelte-5fijw0")},m($,R){N($,e,R),b(e,t),b(t,r),b(t,s),b(e,l),b(l,a),b(e,o),b(o,c),b(e,u),b(u,f),b(e,m),b(m,g),w&&w.m(e,null)},p($,[R]){R&2&&n!==(n=mt[$[1]]+"")&&fe(r,n),R&2&&ke(t,"background-color","rgb("+ze[$[1]]+",125,125)"),R&8&&fe(c,$[3]),R&1&&d!==(d=$[0].cc+"")&&fe(g,d),$[2]?w&&(w.d(1),w=null):w?w.p($,R):(w=rr($),w.c(),w.m(e,null))},i:ae,o:ae,d($){$&&h(e),w&&w.d()}}}function bo(i,e,t){let n,{control:r}=e,{index:s}=e,{disableValue:l=!1}=e;return i.$$set=a=>{"control"in a&&t(0,r=a.control),"index"in a&&t(1,s=a.index),"disableValue"in a&&t(2,l=a.disableValue)},i.$$.update=()=>{i.$$.dirty&1&&t(3,n=r.channel==0?"OFF":`${r.channel}`)},[r,s,l,n]}class Vr extends pe{constructor(e){super(),_e(this,e,bo,Eo,Ee,{control:0,index:1,disableValue:2})}}const ir=["Set a channel to 0 to disable it","Read the instructions on the back!","Click Edit Config for device options","Ignore those eject warnings","The boot folder is called MTM_BOOT"],go=()=>ir[Math.floor(Math.random()*ir.length)];function lr(i){let e,t,n,r,s,l,a,o=go()+"",c;function u(G,Y){if(G[0].faderBlink)return $o;if(!G[0].faderBlink)return vo}let f=u(i),m=f&&f(i);function d(G,Y){if(G[0].accelBlink)return wo;if(!G[0].accelBlink)return No}let g=d(i),w=g&&g(i);function $(G,Y){if(G[0].controllerFlip)return yo;if(!G[0].controllerFlip)return So}let R=$(i),v=R&&R(i);function E(G,Y){if(G[0].midiThru)return Ao;if(!G[0].midiThru)return Io}let p=E(i),_=p&&p(i);function M(G,Y){if(G[0].midiMode)return Ro;if(!G[0].midiMode)return Co}let F=M(i),W=F&&F(i);return{c(){e=A("p"),t=O(`Fader blink
    `),m&&m.c(),n=O(`
    | Gesture blink
    `),w&&w.c(),r=O(`
    | Usb on
    `),v&&v.c(),s=O(`
    | Midi thru
    `),_&&_.c(),l=O(`
    |

    `),W&&W.c(),a=O(`
    |

    

    Tip: `),c=O(o)},l(G){e=C(G,"P",{});var Y=D(e);t=k(Y,`Fader blink
    `),m&&m.l(Y),n=k(Y,`
    | Gesture blink
    `),w&&w.l(Y),r=k(Y,`
    | Usb on
    `),v&&v.l(Y),s=k(Y,`
    | Midi thru
    `),_&&_.l(Y),l=k(Y,`
    |

    `),W&&W.l(Y),a=k(Y,`
    |

    

    Tip: `),c=k(Y,o),Y.forEach(h)},m(G,Y){N(G,e,Y),b(e,t),m&&m.m(e,null),b(e,n),w&&w.m(e,null),b(e,r),v&&v.m(e,null),b(e,s),_&&_.m(e,null),b(e,l),W&&W.m(e,null),b(e,a),b(e,c)},p(G,Y){f!==(f=u(G))&&(m&&m.d(1),m=f&&f(G),m&&(m.c(),m.m(e,n))),g!==(g=d(G))&&(w&&w.d(1),w=g&&g(G),w&&(w.c(),w.m(e,r))),R!==(R=$(G))&&(v&&v.d(1),v=R&&R(G),v&&(v.c(),v.m(e,s))),p!==(p=E(G))&&(_&&_.d(1),_=p&&p(G),_&&(_.c(),_.m(e,l))),F!==(F=M(G))&&(W&&W.d(1),W=F&&F(G),W&&(W.c(),W.m(e,a)))},d(G){G&&h(e),m&&m.d(),w&&w.d(),v&&v.d(),_&&_.d(),W&&W.d()}}}function vo(i){let e;return{c(){e=O("off")},l(t){e=k(t,"off")},m(t,n){N(t,e,n)},d(t){t&&h(e)}}}function $o(i){let e;return{c(){e=O("on")},l(t){e=k(t,"on")},m(t,n){N(t,e,n)},d(t){t&&h(e)}}}function No(i){let e;return{c(){e=O("off")},l(t){e=k(t,"off")},m(t,n){N(t,e,n)},d(t){t&&h(e)}}}function wo(i){let e;return{c(){e=O("on")},l(t){e=k(t,"on")},m(t,n){N(t,e,n)},d(t){t&&h(e)}}}function So(i){let e;return{c(){e=O("right")},l(t){e=k(t,"right")},m(t,n){N(t,e,n)},d(t){t&&h(e)}}}function yo(i){let e;return{c(){e=O("left")},l(t){e=k(t,"left")},m(t,n){N(t,e,n)},d(t){t&&h(e)}}}function Io(i){let e;return{c(){e=O("off")},l(t){e=k(t,"off")},m(t,n){N(t,e,n)},d(t){t&&h(e)}}}function Ao(i){let e;return{c(){e=O("on")},l(t){e=k(t,"on")},m(t,n){N(t,e,n)},d(t){t&&h(e)}}}function Co(i){let e;return{c(){e=O("Midi Type A")},l(t){e=k(t,"Midi Type A")},m(t,n){N(t,e,n)},d(t){t&&h(e)}}}function Ro(i){let e;return{c(){e=O("Midi Type B")},l(t){e=k(t,"Midi Type B")},m(t,n){N(t,e,n)},d(t){t&&h(e)}}}function To(i){let e,t=i[0]&&lr(i);return{c(){t&&t.c(),e=se()},l(n){t&&t.l(n),e=se()},m(n,r){t&&t.m(n,r),N(n,e,r)},p(n,[r]){n[0]?t?t.p(n,r):(t=lr(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:ae,o:ae,d(n){t&&t.d(n),n&&h(e)}}}function Mo(i,e,t){let n;return me(i,ve,r=>t(0,n=r)),[n]}class Oo extends pe{constructor(e){super(),_e(this,e,Mo,To,Ee,{})}}function ko(i){let e,t,n,r=i[0].paramA+"",s,l,a,o,c=i[0].paramB+"",u;return{c(){e=A("dt"),t=O("CC"),n=A("dd"),s=O(r),l=A("dt"),a=O("On Value"),o=A("dd"),u=O(c),this.h()},l(f){e=C(f,"DT",{class:!0});var m=D(e);t=k(m,"CC"),m.forEach(h),n=C(f,"DD",{class:!0});var d=D(n);s=k(d,r),d.forEach(h),l=C(f,"DT",{class:!0});var g=D(l);a=k(g,"On Value"),g.forEach(h),o=C(f,"DD",{class:!0});var w=D(o);u=k(w,c),w.forEach(h),this.h()},h(){U(e,"class","svelte-5fijw0"),U(n,"class","svelte-5fijw0"),U(l,"class","svelte-5fijw0"),U(o,"class","svelte-5fijw0")},m(f,m){N(f,e,m),b(e,t),N(f,n,m),b(n,s),N(f,l,m),b(l,a),N(f,o,m),b(o,u)},p(f,m){m&1&&r!==(r=f[0].paramA+"")&&fe(s,r),m&1&&c!==(c=f[0].paramB+"")&&fe(u,c)},d(f){f&&h(e),f&&h(n),f&&h(l),f&&h(o)}}}function Lo(i){let e,t,n,r=i[0].paramA+"",s,l,a=i[3](i[0].paramA)+"",o,c,u,f,m,d=i[0].paramB+"",g;return{c(){e=A("dt"),t=O("Note Number"),n=A("dd"),s=O(r),l=O(" ("),o=O(a),c=O(")"),u=A("dt"),f=O("Velocity"),m=A("dd"),g=O(d),this.h()},l(w){e=C(w,"DT",{class:!0});var $=D(e);t=k($,"Note Number"),$.forEach(h),n=C(w,"DD",{class:!0});var R=D(n);s=k(R,r),l=k(R," ("),o=k(R,a),c=k(R,")"),R.forEach(h),u=C(w,"DT",{class:!0});var v=D(u);f=k(v,"Velocity"),v.forEach(h),m=C(w,"DD",{class:!0});var E=D(m);g=k(E,d),E.forEach(h),this.h()},h(){U(e,"class","svelte-5fijw0"),U(n,"class","svelte-5fijw0"),U(u,"class","svelte-5fijw0"),U(m,"class","svelte-5fijw0")},m(w,$){N(w,e,$),b(e,t),N(w,n,$),b(n,s),b(n,l),b(n,o),b(n,c),N(w,u,$),b(u,f),N(w,m,$),b(m,g)},p(w,$){$&1&&r!==(r=w[0].paramA+"")&&fe(s,r),$&1&&a!==(a=w[3](w[0].paramA)+"")&&fe(o,a),$&1&&d!==(d=w[0].paramB+"")&&fe(g,d)},d(w){w&&h(e),w&&h(n),w&&h(u),w&&h(m)}}}function Bo(i){let e,t,n,r,s,l,a=i[0].channel+"",o,c,u,f,m;function d($,R){return $[0].mode==1?Lo:ko}let g=d(i),w=g(i);return{c(){e=A("dl"),t=A("dt"),n=O(i[1]),r=A("dt"),s=O("Channel"),l=A("dd"),o=O(a),c=A("dt"),u=O("Mode"),f=A("dd"),m=O(i[2]),w.c(),this.h()},l($){e=C($,"DL",{class:!0});var R=D(e);t=C(R,"DT",{class:!0});var v=D(t);n=k(v,i[1]),v.forEach(h),r=C(R,"DT",{class:!0});var E=D(r);s=k(E,"Channel"),E.forEach(h),l=C(R,"DD",{class:!0});var p=D(l);o=k(p,a),p.forEach(h),c=C(R,"DT",{class:!0});var _=D(c);u=k(_,"Mode"),_.forEach(h),f=C(R,"DD",{class:!0});var M=D(f);m=k(M,i[2]),M.forEach(h),w.l(R),R.forEach(h),this.h()},h(){U(t,"class","index svelte-5fijw0"),U(r,"class","svelte-5fijw0"),U(l,"class","svelte-5fijw0"),U(c,"class","svelte-5fijw0"),U(f,"class","svelte-5fijw0"),U(e,"class","config-column svelte-5fijw0")},m($,R){N($,e,R),b(e,t),b(t,n),b(e,r),b(r,s),b(e,l),b(l,o),b(e,c),b(c,u),b(e,f),b(f,m),w.m(e,null)},p($,[R]){R&2&&fe(n,$[1]),R&1&&a!==(a=$[0].channel+"")&&fe(o,a),R&4&&fe(m,$[2]),g===(g=d($))&&w?w.p($,R):(w.d(1),w=g($),w&&(w.c(),w.m(e,null)))},i:ae,o:ae,d($){$&&h(e),w.d()}}}function Do(i,e,t){let n,r,{button:s}=e,{index:l}=e;function a(o){const c=Br[o%12],u=Math.floor(o/12)-1;return`${c}${u}`}return i.$$set=o=>{"button"in o&&t(0,s=o.button),"index"in o&&t(4,l=o.index)},i.$$.update=()=>{i.$$.dirty&1&&t(2,n=Ot[s.mode]),i.$$.dirty&16&&t(1,r=kt[l])},[s,r,n,a,l]}class Hr extends pe{constructor(e){super(),_e(this,e,Do,Bo,Ee,{button:0,index:4})}}function ar(i,e,t){const n=i.slice();return n[7]=e[t],n[9]=t,n}function or(i,e,t){const n=i.slice();return n[7]=e[t],n[9]=t,n}function cr(i,e,t){const n=i.slice();return n[11]=e[t],n[9]=t,n}function fr(i,e,t){const n=i.slice();return n[11]=e[t],n[9]=t,n}function Po(i){let e,t,n,r;return e=new st({props:{label:"Export current config",icon:"file-export",click:i[3]}}),n=new st({props:{label:"Edit Config",icon:"pencil-alt",click:i[4]}}),{c(){Z(e.$$.fragment),t=K(),Z(n.$$.fragment)},l(s){Q(e.$$.fragment,s),t=J(s),Q(n.$$.fragment,s)},m(s,l){x(e,s,l),N(s,t,l),x(n,s,l),r=!0},p:ae,i(s){r||(y(e.$$.fragment,s),y(n.$$.fragment,s),r=!0)},o(s){P(e.$$.fragment,s),P(n.$$.fragment,s),r=!1},d(s){ee(e,s),s&&h(t),ee(n,s)}}}function Uo(i){let e;return{c(){e=O("USB")},l(t){e=k(t,"USB")},m(t,n){N(t,e,n)},d(t){t&&h(e)}}}function Go(i){let e;return{c(){e=O("TRS Jack")},l(t){e=k(t,"TRS Jack")},m(t,n){N(t,e,n)},d(t){t&&h(e)}}}function Fo(i){let e;return{c(){e=O("USB Buttons")},l(t){e=k(t,"USB Buttons")},m(t,n){N(t,e,n)},d(t){t&&h(e)}}}function Vo(i){let e;return{c(){e=O("TRS Buttons")},l(t){e=k(t,"TRS Buttons")},m(t,n){N(t,e,n)},d(t){t&&h(e)}}}function Ho(i){let e,t,n,r,s,l,a,o;return e=new Me({props:{$$slots:{default:[Uo]},$$scope:{ctx:i}}}),n=new Me({props:{$$slots:{default:[Go]},$$scope:{ctx:i}}}),s=new Me({props:{$$slots:{default:[Fo]},$$scope:{ctx:i}}}),a=new Me({props:{$$slots:{default:[Vo]},$$scope:{ctx:i}}}),{c(){Z(e.$$.fragment),t=K(),Z(n.$$.fragment),r=K(),Z(s.$$.fragment),l=K(),Z(a.$$.fragment)},l(c){Q(e.$$.fragment,c),t=J(c),Q(n.$$.fragment,c),r=J(c),Q(s.$$.fragment,c),l=J(c),Q(a.$$.fragment,c)},m(c,u){x(e,c,u),N(c,t,u),x(n,c,u),N(c,r,u),x(s,c,u),N(c,l,u),x(a,c,u),o=!0},p(c,u){const f={};u&16384&&(f.$$scope={dirty:u,ctx:c}),e.$set(f);const m={};u&16384&&(m.$$scope={dirty:u,ctx:c}),n.$set(m);const d={};u&16384&&(d.$$scope={dirty:u,ctx:c}),s.$set(d);const g={};u&16384&&(g.$$scope={dirty:u,ctx:c}),a.$set(g)},i(c){o||(y(e.$$.fragment,c),y(n.$$.fragment,c),y(s.$$.fragment,c),y(a.$$.fragment,c),o=!0)},o(c){P(e.$$.fragment,c),P(n.$$.fragment,c),P(s.$$.fragment,c),P(a.$$.fragment,c),o=!1},d(c){ee(e,c),c&&h(t),ee(n,c),c&&h(r),ee(s,c),c&&h(l),ee(a,c)}}}function ur(i){let e,t,n=i[0].usbControls,r=[];for(let l=0;l<n.length;l+=1)r[l]=dr(fr(i,n,l));const s=l=>P(r[l],1,1,()=>{r[l]=null});return{c(){e=A("div");for(let l=0;l<r.length;l+=1)r[l].c();this.h()},l(l){e=C(l,"DIV",{id:!0,class:!0});var a=D(e);for(let o=0;o<r.length;o+=1)r[o].l(a);a.forEach(h),this.h()},h(){U(e,"id","controls"),U(e,"class","svelte-13ul1lp")},m(l,a){N(l,e,a);for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(e,null);t=!0},p(l,a){if(a&5){n=l[0].usbControls;let o;for(o=0;o<n.length;o+=1){const c=fr(l,n,o);r[o]?(r[o].p(c,a),y(r[o],1)):(r[o]=dr(c),r[o].c(),y(r[o],1),r[o].m(e,null))}for(ie(),o=n.length;o<r.length;o+=1)s(o);le()}},i(l){if(!t){for(let a=0;a<n.length;a+=1)y(r[a]);t=!0}},o(l){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)P(r[a]);t=!1},d(l){l&&h(e),ge(r,l)}}}function hr(i){let e,t;return e=new Vr({props:{control:i[11],index:i[9]}}),{c(){Z(e.$$.fragment)},l(n){Q(e.$$.fragment,n)},m(n,r){x(e,n,r),t=!0},p(n,r){const s={};r&1&&(s.control=n[11]),e.$set(s)},i(n){t||(y(e.$$.fragment,n),t=!0)},o(n){P(e.$$.fragment,n),t=!1},d(n){ee(e,n)}}}function dr(i){let e,t,n=i[2]&&i[9]<i[2].controlCount&&hr(i);return{c(){n&&n.c(),e=se()},l(r){n&&n.l(r),e=se()},m(r,s){n&&n.m(r,s),N(r,e,s),t=!0},p(r,s){r[2]&&r[9]<r[2].controlCount?n?(n.p(r,s),s&4&&y(n,1)):(n=hr(r),n.c(),y(n,1),n.m(e.parentNode,e)):n&&(ie(),P(n,1,1,()=>{n=null}),le())},i(r){t||(y(n),t=!0)},o(r){P(n),t=!1},d(r){n&&n.d(r),r&&h(e)}}}function jo(i){let e,t,n=i[0]&&i[0].usbControls&&ur(i);return{c(){n&&n.c(),e=se()},l(r){n&&n.l(r),e=se()},m(r,s){n&&n.m(r,s),N(r,e,s),t=!0},p(r,s){r[0]&&r[0].usbControls?n?(n.p(r,s),s&1&&y(n,1)):(n=ur(r),n.c(),y(n,1),n.m(e.parentNode,e)):n&&(ie(),P(n,1,1,()=>{n=null}),le())},i(r){t||(y(n),t=!0)},o(r){P(n),t=!1},d(r){n&&n.d(r),r&&h(e)}}}function mr(i){let e,t,n,r,s,l=i[0].trsControls,a=[];for(let c=0;c<l.length;c+=1)a[c]=_r(cr(i,l,c));const o=c=>P(a[c],1,1,()=>{a[c]=null});return{c(){e=A("div");for(let c=0;c<a.length;c+=1)a[c].c();t=K(),n=A("p"),r=O("There is no realtime preview of the TRS outputs."),this.h()},l(c){e=C(c,"DIV",{id:!0,class:!0});var u=D(e);for(let m=0;m<a.length;m+=1)a[m].l(u);u.forEach(h),t=J(c),n=C(c,"P",{});var f=D(n);r=k(f,"There is no realtime preview of the TRS outputs."),f.forEach(h),this.h()},h(){U(e,"id","controls"),U(e,"class","svelte-13ul1lp")},m(c,u){N(c,e,u);for(let f=0;f<a.length;f+=1)a[f]&&a[f].m(e,null);N(c,t,u),N(c,n,u),b(n,r),s=!0},p(c,u){if(u&5){l=c[0].trsControls;let f;for(f=0;f<l.length;f+=1){const m=cr(c,l,f);a[f]?(a[f].p(m,u),y(a[f],1)):(a[f]=_r(m),a[f].c(),y(a[f],1),a[f].m(e,null))}for(ie(),f=l.length;f<a.length;f+=1)o(f);le()}},i(c){if(!s){for(let u=0;u<l.length;u+=1)y(a[u]);s=!0}},o(c){a=a.filter(Boolean);for(let u=0;u<a.length;u+=1)P(a[u]);s=!1},d(c){c&&h(e),ge(a,c),c&&h(t),c&&h(n)}}}function pr(i){let e,t;return e=new Vr({props:{control:i[11],index:i[9],disableValue:!0}}),{c(){Z(e.$$.fragment)},l(n){Q(e.$$.fragment,n)},m(n,r){x(e,n,r),t=!0},p(n,r){const s={};r&1&&(s.control=n[11]),e.$set(s)},i(n){t||(y(e.$$.fragment,n),t=!0)},o(n){P(e.$$.fragment,n),t=!1},d(n){ee(e,n)}}}function _r(i){let e,t,n=i[2]&&i[9]<i[2].controlCount&&pr(i);return{c(){n&&n.c(),e=se()},l(r){n&&n.l(r),e=se()},m(r,s){n&&n.m(r,s),N(r,e,s),t=!0},p(r,s){r[2]&&r[9]<r[2].controlCount?n?(n.p(r,s),s&4&&y(n,1)):(n=pr(r),n.c(),y(n,1),n.m(e.parentNode,e)):n&&(ie(),P(n,1,1,()=>{n=null}),le())},i(r){t||(y(n),t=!0)},o(r){P(n),t=!1},d(r){n&&n.d(r),r&&h(e)}}}function qo(i){let e,t,n=i[0]&&i[0].trsControls&&mr(i);return{c(){n&&n.c(),e=se()},l(r){n&&n.l(r),e=se()},m(r,s){n&&n.m(r,s),N(r,e,s),t=!0},p(r,s){r[0]&&r[0].trsControls?n?(n.p(r,s),s&1&&y(n,1)):(n=mr(r),n.c(),y(n,1),n.m(e.parentNode,e)):n&&(ie(),P(n,1,1,()=>{n=null}),le())},i(r){t||(y(n),t=!0)},o(r){P(n),t=!1},d(r){n&&n.d(r),r&&h(e)}}}function Er(i){let e,t,n=i[0].usbButtons,r=[];for(let l=0;l<n.length;l+=1)r[l]=gr(or(i,n,l));const s=l=>P(r[l],1,1,()=>{r[l]=null});return{c(){e=A("div");for(let l=0;l<r.length;l+=1)r[l].c();this.h()},l(l){e=C(l,"DIV",{id:!0,class:!0});var a=D(e);for(let o=0;o<r.length;o+=1)r[o].l(a);a.forEach(h),this.h()},h(){U(e,"id","controls"),U(e,"class","svelte-13ul1lp")},m(l,a){N(l,e,a);for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(e,null);t=!0},p(l,a){if(a&5){n=l[0].usbButtons;let o;for(o=0;o<n.length;o+=1){const c=or(l,n,o);r[o]?(r[o].p(c,a),y(r[o],1)):(r[o]=gr(c),r[o].c(),y(r[o],1),r[o].m(e,null))}for(ie(),o=n.length;o<r.length;o+=1)s(o);le()}},i(l){if(!t){for(let a=0;a<n.length;a+=1)y(r[a]);t=!0}},o(l){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)P(r[a]);t=!1},d(l){l&&h(e),ge(r,l)}}}function br(i){let e,t;return e=new Hr({props:{button:i[7],index:i[9]}}),{c(){Z(e.$$.fragment)},l(n){Q(e.$$.fragment,n)},m(n,r){x(e,n,r),t=!0},p(n,r){const s={};r&1&&(s.button=n[7]),e.$set(s)},i(n){t||(y(e.$$.fragment,n),t=!0)},o(n){P(e.$$.fragment,n),t=!1},d(n){ee(e,n)}}}function gr(i){let e,t,n=i[2]&&i[9]<i[2].buttonCount&&br(i);return{c(){n&&n.c(),e=se()},l(r){n&&n.l(r),e=se()},m(r,s){n&&n.m(r,s),N(r,e,s),t=!0},p(r,s){r[2]&&r[9]<r[2].buttonCount?n?(n.p(r,s),s&4&&y(n,1)):(n=br(r),n.c(),y(n,1),n.m(e.parentNode,e)):n&&(ie(),P(n,1,1,()=>{n=null}),le())},i(r){t||(y(n),t=!0)},o(r){P(n),t=!1},d(r){n&&n.d(r),r&&h(e)}}}function zo(i){var r;let e,t,n=i[0]&&((r=i[2])==null?void 0:r.buttonCount)&&i[0].usbButtons&&Er(i);return{c(){n&&n.c(),e=se()},l(s){n&&n.l(s),e=se()},m(s,l){n&&n.m(s,l),N(s,e,l),t=!0},p(s,l){var a;s[0]&&((a=s[2])!=null&&a.buttonCount)&&s[0].usbButtons?n?(n.p(s,l),l&5&&y(n,1)):(n=Er(s),n.c(),y(n,1),n.m(e.parentNode,e)):n&&(ie(),P(n,1,1,()=>{n=null}),le())},i(s){t||(y(n),t=!0)},o(s){P(n),t=!1},d(s){n&&n.d(s),s&&h(e)}}}function vr(i){let e,t,n=i[0].trsButtons,r=[];for(let l=0;l<n.length;l+=1)r[l]=Nr(ar(i,n,l));const s=l=>P(r[l],1,1,()=>{r[l]=null});return{c(){e=A("div");for(let l=0;l<r.length;l+=1)r[l].c();this.h()},l(l){e=C(l,"DIV",{id:!0,class:!0});var a=D(e);for(let o=0;o<r.length;o+=1)r[o].l(a);a.forEach(h),this.h()},h(){U(e,"id","controls"),U(e,"class","svelte-13ul1lp")},m(l,a){N(l,e,a);for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(e,null);t=!0},p(l,a){if(a&5){n=l[0].trsButtons;let o;for(o=0;o<n.length;o+=1){const c=ar(l,n,o);r[o]?(r[o].p(c,a),y(r[o],1)):(r[o]=Nr(c),r[o].c(),y(r[o],1),r[o].m(e,null))}for(ie(),o=n.length;o<r.length;o+=1)s(o);le()}},i(l){if(!t){for(let a=0;a<n.length;a+=1)y(r[a]);t=!0}},o(l){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)P(r[a]);t=!1},d(l){l&&h(e),ge(r,l)}}}function $r(i){let e,t;return e=new Hr({props:{button:i[7],index:i[9]}}),{c(){Z(e.$$.fragment)},l(n){Q(e.$$.fragment,n)},m(n,r){x(e,n,r),t=!0},p(n,r){const s={};r&1&&(s.button=n[7]),e.$set(s)},i(n){t||(y(e.$$.fragment,n),t=!0)},o(n){P(e.$$.fragment,n),t=!1},d(n){ee(e,n)}}}function Nr(i){let e,t,n=i[2]&&i[9]<i[2].buttonCount&&$r(i);return{c(){n&&n.c(),e=se()},l(r){n&&n.l(r),e=se()},m(r,s){n&&n.m(r,s),N(r,e,s),t=!0},p(r,s){r[2]&&r[9]<r[2].buttonCount?n?(n.p(r,s),s&4&&y(n,1)):(n=$r(r),n.c(),y(n,1),n.m(e.parentNode,e)):n&&(ie(),P(n,1,1,()=>{n=null}),le())},i(r){t||(y(n),t=!0)},o(r){P(n),t=!1},d(r){n&&n.d(r),r&&h(e)}}}function Yo(i){var r;let e,t,n=i[0]&&((r=i[2])==null?void 0:r.buttonCount)&&i[0].trsButtons&&vr(i);return{c(){n&&n.c(),e=se()},l(s){n&&n.l(s),e=se()},m(s,l){n&&n.m(s,l),N(s,e,l),t=!0},p(s,l){var a;s[0]&&((a=s[2])!=null&&a.buttonCount)&&s[0].trsButtons?n?(n.p(s,l),l&5&&y(n,1)):(n=vr(s),n.c(),y(n,1),n.m(e.parentNode,e)):n&&(ie(),P(n,1,1,()=>{n=null}),le())},i(s){t||(y(n),t=!0)},o(s){P(n),t=!1},d(s){n&&n.d(s),s&&h(e)}}}function Xo(i){let e,t,n,r,s,l,a,o,c,u;return e=new Fr({props:{$$slots:{default:[Ho]},$$scope:{ctx:i}}}),n=new Te({props:{$$slots:{default:[jo]},$$scope:{ctx:i}}}),s=new Te({props:{$$slots:{default:[qo]},$$scope:{ctx:i}}}),a=new Te({props:{$$slots:{default:[zo]},$$scope:{ctx:i}}}),c=new Te({props:{$$slots:{default:[Yo]},$$scope:{ctx:i}}}),{c(){Z(e.$$.fragment),t=K(),Z(n.$$.fragment),r=K(),Z(s.$$.fragment),l=K(),Z(a.$$.fragment),o=K(),Z(c.$$.fragment)},l(f){Q(e.$$.fragment,f),t=J(f),Q(n.$$.fragment,f),r=J(f),Q(s.$$.fragment,f),l=J(f),Q(a.$$.fragment,f),o=J(f),Q(c.$$.fragment,f)},m(f,m){x(e,f,m),N(f,t,m),x(n,f,m),N(f,r,m),x(s,f,m),N(f,l,m),x(a,f,m),N(f,o,m),x(c,f,m),u=!0},p(f,m){const d={};m&16384&&(d.$$scope={dirty:m,ctx:f}),e.$set(d);const g={};m&16389&&(g.$$scope={dirty:m,ctx:f}),n.$set(g);const w={};m&16389&&(w.$$scope={dirty:m,ctx:f}),s.$set(w);const $={};m&16389&&($.$$scope={dirty:m,ctx:f}),a.$set($);const R={};m&16389&&(R.$$scope={dirty:m,ctx:f}),c.$set(R)},i(f){u||(y(e.$$.fragment,f),y(n.$$.fragment,f),y(s.$$.fragment,f),y(a.$$.fragment,f),y(c.$$.fragment,f),u=!0)},o(f){P(e.$$.fragment,f),P(n.$$.fragment,f),P(s.$$.fragment,f),P(a.$$.fragment,f),P(c.$$.fragment,f),u=!1},d(f){ee(e,f),f&&h(t),ee(n,f),f&&h(r),ee(s,f),f&&h(l),ee(a,f),f&&h(o),ee(c,f)}}}function Wo(i){let e,t,n,r,s,l;return e=new Ur({props:{title:"Bank "+i[1]+": Current Configuration",$$slots:{default:[Po]},$$scope:{ctx:i}}}),n=new Gr({props:{$$slots:{default:[Xo]},$$scope:{ctx:i}}}),s=new Oo({}),{c(){Z(e.$$.fragment),t=K(),Z(n.$$.fragment),r=K(),Z(s.$$.fragment)},l(a){Q(e.$$.fragment,a),t=J(a),Q(n.$$.fragment,a),r=J(a),Q(s.$$.fragment,a)},m(a,o){x(e,a,o),N(a,t,o),x(n,a,o),N(a,r,o),x(s,a,o),l=!0},p(a,[o]){const c={};o&2&&(c.title="Bank "+a[1]+": Current Configuration"),o&16384&&(c.$$scope={dirty:o,ctx:a}),e.$set(c);const u={};o&16389&&(u.$$scope={dirty:o,ctx:a}),n.$set(u)},i(a){l||(y(e.$$.fragment,a),y(n.$$.fragment,a),y(s.$$.fragment,a),l=!0)},o(a){P(e.$$.fragment,a),P(n.$$.fragment,a),P(s.$$.fragment,a),l=!1},d(a){ee(e,a),a&&h(t),ee(n,a),a&&h(r),ee(s,a)}}}function Ko(i,e,t){let n,r,s,l,a;me(i,ve,u=>t(0,s=u)),me(i,ue,u=>t(5,l=u)),me(i,Ve,u=>t(6,a=u));const o=()=>{s&&xa(s)},c=()=>{rt(Ve,a=!0,a),s&&rt(ue,l=structuredClone(s),l)};return i.$$.update=()=>{i.$$.dirty&1&&t(2,n=s?ye(s.deviceId):null),i.$$.dirty&1&&t(1,r=s?s.pageNumber+1:"?")},[s,r,n,o,c]}class Jo extends pe{constructor(e){super(),_e(this,e,Ko,Wo,Ee,{})}}function Zo(i){let e,t;return{c(){e=A("p"),t=O(`WebMIDI could not be enabled. Please use a web browser that supports
        WebMIDI, such as Google Chrome.`),this.h()},l(n){e=C(n,"P",{class:!0});var r=D(e);t=k(r,`WebMIDI could not be enabled. Please use a web browser that supports
        WebMIDI, such as Google Chrome.`),r.forEach(h),this.h()},h(){U(e,"class","notice svelte-wd7jzg")},m(n,r){N(n,e,r),b(e,t)},p:ae,i:ae,o:ae,d(n){n&&h(e)}}}function Qo(i){let e,t,n,r;const s=[ec,xo],l=[];function a(o,c){return o[1]?0:1}return e=a(i),t=l[e]=s[e](i),{c(){t.c(),n=se()},l(o){t.l(o),n=se()},m(o,c){l[e].m(o,c),N(o,n,c),r=!0},p(o,c){let u=e;e=a(o),e===u?l[e].p(o,c):(ie(),P(l[u],1,1,()=>{l[u]=null}),le(),t=l[e],t?t.p(o,c):(t=l[e]=s[e](o),t.c()),y(t,1),t.m(n.parentNode,n))},i(o){r||(y(t),r=!0)},o(o){P(t),r=!1},d(o){l[e].d(o),o&&h(n)}}}function xo(i){let e,t,n,r,s,l,a,o,c,u,f;return{c(){e=A("p"),t=O("Searching for a controller via USB, hang on a second or ten."),n=A("br"),r=A("br"),s=O(`
          If you haven't plugged in your 8mu, do it now.`),l=A("br"),a=A("br"),o=A("br"),c=K(),u=A("img"),this.h()},l(m){e=C(m,"P",{class:!0});var d=D(e);t=k(d,"Searching for a controller via USB, hang on a second or ten."),n=C(d,"BR",{}),r=C(d,"BR",{}),s=k(d,`
          If you haven't plugged in your 8mu, do it now.`),l=C(d,"BR",{}),a=C(d,"BR",{}),o=C(d,"BR",{}),c=J(d),u=C(d,"IMG",{src:!0}),d.forEach(h),this.h()},h(){Yr(u.src,f="https://www.musicthing.co.uk/images/8mu_editor_crop.png")||U(u,"src",f),U(e,"class","notice svelte-wd7jzg")},m(m,d){N(m,e,d),b(e,t),b(e,n),b(e,r),b(e,s),b(e,l),b(e,a),b(e,o),b(e,c),b(e,u)},p:ae,i:ae,o:ae,d(m){m&&h(e)}}}function ec(i){let e,t,n,r,s;const l=[nc,tc],a=[];function o(c,u){return c[2]?0:1}return e=o(i),t=a[e]=l[e](i),{c(){t.c(),n=K(),r=A("p")},l(c){t.l(c),n=J(c),r=C(c,"P",{}),D(r).forEach(h)},m(c,u){a[e].m(c,u),N(c,n,u),N(c,r,u),s=!0},p(c,u){let f=e;e=o(c),e!==f&&(ie(),P(a[f],1,1,()=>{a[f]=null}),le(),t=a[e],t||(t=a[e]=l[e](c),t.c()),y(t,1),t.m(n.parentNode,n))},i(c){s||(y(t),s=!0)},o(c){P(t),s=!1},d(c){a[e].d(c),c&&h(n),c&&h(r)}}}function tc(i){let e,t;return e=new Jo({}),{c(){Z(e.$$.fragment)},l(n){Q(e.$$.fragment,n)},m(n,r){x(e,n,r),t=!0},i(n){t||(y(e.$$.fragment,n),t=!0)},o(n){P(e.$$.fragment,n),t=!1},d(n){ee(e,n)}}}function nc(i){let e,t;return e=new _o({}),{c(){Z(e.$$.fragment)},l(n){Q(e.$$.fragment,n)},m(n,r){x(e,n,r),t=!0},i(n){t||(y(e.$$.fragment,n),t=!0)},o(n){P(e.$$.fragment,n),t=!1},d(n){ee(e,n)}}}function rc(i){let e,t,n,r,s,l,a,o,c,u,f,m,d,g,w,$,R,v,E,p,_,M,F,W,G;l=new pa({});const Y=[Qo,Zo],z=[];function ce(I,T){return I[0]?0:1}return c=ce(i),u=z[c]=Y[c](i),{c(){e=A("main"),t=A("div"),n=A("h1"),r=O("8mu configuration tool"),s=K(),Z(l.$$.fragment),a=K(),o=A("div"),u.c(),f=K(),m=A("div"),d=A("div"),g=O("8mu Editor v"),w=O(i[3]),$=K(),R=A("br"),v=O("Having trouble? Please try "),E=A("a"),p=O("v1.0.1"),_=O(" and "),M=A("a"),F=O("let me know"),W=O("."),this.h()},l(I){e=C(I,"MAIN",{class:!0});var T=D(e);t=C(T,"DIV",{id:!0,class:!0});var q=D(t);n=C(q,"H1",{class:!0});var S=D(n);r=k(S,"8mu configuration tool"),S.forEach(h),s=J(q),Q(l.$$.fragment,q),q.forEach(h),a=J(T),o=C(T,"DIV",{id:!0,class:!0});var B=D(o);u.l(B),B.forEach(h),f=J(T),m=C(T,"DIV",{id:!0,class:!0});var V=D(m);d=C(V,"DIV",{class:!0});var X=D(d);g=k(X,"8mu Editor v"),w=k(X,i[3]),$=J(X),R=C(X,"BR",{}),v=k(X,"Having trouble? Please try "),E=C(X,"A",{href:!0});var ne=D(E);p=k(ne,"v1.0.1"),ne.forEach(h),_=k(X," and "),M=C(X,"A",{href:!0});var te=D(M);F=k(te,"let me know"),te.forEach(h),W=k(X,"."),X.forEach(h),V.forEach(h),T.forEach(h),this.h()},h(){U(n,"class","svelte-wd7jzg"),U(t,"id","head"),U(t,"class","svelte-wd7jzg"),U(o,"id","inner"),U(o,"class","svelte-wd7jzg"),U(E,"href","https://tomwhitwell.github.io/test-host/"),U(M,"href","https://github.com/TomWhitwell/8mu_Public/issues"),U(d,"class","foot-left svelte-wd7jzg"),U(m,"id","foot"),U(m,"class","svelte-wd7jzg"),U(e,"class","svelte-wd7jzg")},m(I,T){N(I,e,T),b(e,t),b(t,n),b(n,r),b(t,s),x(l,t,null),b(e,a),b(e,o),z[c].m(o,null),b(e,f),b(e,m),b(m,d),b(d,g),b(d,w),b(d,$),b(d,R),b(d,v),b(d,E),b(E,p),b(d,_),b(d,M),b(M,F),b(d,W),G=!0},p(I,[T]){let q=c;c=ce(I),c===q?z[c].p(I,T):(ie(),P(z[q],1,1,()=>{z[q]=null}),le(),u=z[c],u?u.p(I,T):(u=z[c]=Y[c](I),u.c()),y(u,1),u.m(o,null))},i(I){G||(y(l.$$.fragment,I),y(u),G=!0)},o(I){P(l.$$.fragment,I),P(u),G=!1},d(I){I&&h(e),ee(l),z[c].d()}}}function sc(i,e,t){let n,r,s;me(i,Lt,o=>t(0,n=o)),me(i,ve,o=>t(1,r=o)),me(i,Ve,o=>t(2,s=o));const l="2.0.0",a=!!navigator.requestMIDIAccess;return zr(()=>{a&&H.enable({sysex:!0}).then(fs).catch(o=>alert(o))}),[n,r,s,l]}class oc extends pe{constructor(e){super(),_e(this,e,sc,rc,Ee,{})}}export{oc as default};
